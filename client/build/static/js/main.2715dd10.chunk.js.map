{"version":3,"sources":["context/currency_rate.js","components/DatePicker/index.js","api/invoice/index.js","components/Table/index.js","components/InvoicesTable/columns.js","components/InvoicesTable/index.js","components/Modals/CurrencyModal.js","components/ProductsTable/pdf.js","components/ProductsTable/index.js","pages/invoices/index.js","components/SaleReportTable/columns.js","components/SaleReportTable/index.js","components/Cards/SaleReport/index.js","components/Cards/GroupSales/index.js","pages/ventas/index.js","components/ClientReportTable/columns.js","components/ClientReportTable/index.js","components/Cards/ClientReport/index.js","components/SearchInput/index.js","api/products/index.js","components/ProductSearch/index.js","components/ClientPerProduct/Table/columns.js","components/ClientPerProduct/Table/index.js","api/clients/index.js","components/ClientPerProduct/Card/index.js","components/ClientSearch/index.js","components/MonthlyAverageClient/Card/index.js","pages/clientes/index.js","components/Cards/CostFluctuation/index.js","api/groups/index.js","components/GroupSearch/index.js","components/PriceListTable/columns.js","components/PriceListTable/index.js","components/PDF/PriceList/index.js","components/Cards/GroupStock/index.js","hooks/useReportFilter.js","components/ProductCostPerGroup/Card/index.js","pages/productos/index.js","employees/Table/Sales/columns.js","employees/Table/Sales/EmployeesSalesTable.js","api/employees/index.js","employees/Search/EmployeeSearch.js","employees/Modal/Commission/CommissionModal.js","employees/Actions/index.js","pages/employees/index.js","api/currency_rates/index.js","App.js","index.js"],"names":["CurrencyRateContext","React","createContext","CurrencyRateProvider","children","useState","currencyRate","setCurrencyRate","Provider","value","DatePicker","onSubmit","loading","submitDisabled","from","DateTime","now","toISODate","to","dateRange","setDateRange","className","type","onChange","event","target","Button","variant","onClick","disabled","role","BASE_URL","fetchInvoiceReport","a","fetch","response","json","report","console","log","fetchInvoiceList","invoices","Table","data","columns","filterPlaceholder","onFilter","maxHeight","showFooter","onRowSelect","multiSelect","useTable","useRowSelect","getTableProps","getTableBodyProps","headerGroups","footerGroups","rows","prepareRow","state","onFilterDebounced","debounce","useEffect","selectedRows","filter","row","isSelected","map","original","find","MemoizedRow","memo","getRowProps","e","lastSelectedRowIndex","Object","keys","selectedRowIds","length","newSelectedRowIndex","index","ctrlKey","shiftKey","toggleRowSelected","i","getToggleRowSelectedProps","cells","cell","title","getCellProps","style","background","color","render","placeholder","autoFocus","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","group","getFooterGroupProps","getFooterProps","Header","accessor","Cell","toFixed","dayjs","format","InvoicesTable","memoizedColumns","useMemo","Card","Body","CurrencyModal","show","onClose","Modal","size","onHide","closeButton","Title","pdfschema","productList","quantityTotal","totalSummary","currency","content","text","local","toFormat","table","widths","body","product","quantity","total","bold","styles","header","alignment","margin","pageMargins","pageSize","pdfMake","vfs","pdfFonts","ProductsTable","useContext","showCurrencyModal","setShowCurrencyModal","reduce","acc","item","sortedData","sort","b","toLowerCase","localeCompare","Footer","productsData","Number","price","Cambio","pdfData","pdf","createPdf","open","InvoicesPage","setLoading","setInvoices","setSelectedRows","productsSummary","products","forEach","productId","values","invoicesTotalSummary","invoice","preventDefault","Container","fluid","current","toLocaleString","rawProfit","netProfit","SaleReportTable","SaleReportCard","sorting","setSorting","setSortedData","sorted","marginRight","GroupSales","chartData","top","right","bottom","left","innerRadius","padAngle","cornerRadius","activeOuterRadiusOffset","arcLabel","borderWidth","arcLinkLabelsSkipAngle","arcLinkLabelsTextColor","arcLinkLabelsThickness","arcLinkLabelsColor","arcLabelsSkipAngle","arcLabelsTextColor","modifiers","tooltip","datum","label","VentasPage","filtered_invoices_report","invoices_report","group_sales_chart","setData","searchTerm","filteredData","f","includes","group_sales_chart_data","id","categoria","sales_report","SaleReport","ClientReportTable","ClientReportCard","SearchInput","loadOptions","defaultOptions","cacheOptions","onSelect","inputValue","callback","loadingMessage","isClearable","fetchProducts","filterParam","fetchCostFluctuation","fetchCostPerGroup","fetchProductsByGroup","fetchProductPriceList","groupId","ProductSearch","loadProductVariants","records","record","product_name","Descripcion","key","option","action","ClientPerProductTable","fetchClients","clients","fetchBestClients","fetchBestClientsPerProduct","fetchMonthlyAverage","clientId","ClientPerProductCard","selectedProduct","setSelectedProduct","IdProducto","then","display","flexDirection","gap","fromISO","flex","justifyContent","width","ClientSearch","loadClients","IdCliente","name","MonthlyAverageClient","selectedClient","setSelectedClient","xScale","yScale","min","max","stacked","reverse","axisTop","axisRight","pointSize","pointColor","theme","pointBorderWidth","pointBorderColor","pointLabelYOffset","useMesh","ClientesPage","filtered_best_clients","best_clients","client","ClientReport","CostFluctuation","fetch_product_report","report_data","axisLeft","legend","legendPosition","legendOffset","axisBottom","fetchGroups","groups","GroupSearch","loadGroups","PriceListTable","PriceListPDF","stock","GroupStock","selectedGroup","setSelectedGroup","data_to_filter","initial_state","setFilteredData","filterValue","filterKey","nestedKey","nestedFilter","filtered","r","useReportFilter","inputRef","useRef","fetch_stock_by_group","ref","div","document","createElement","doc","jsPDF","pdfName","Date","toISOString","replaceAll","setProperties","setFontSize","align","innerHTML","renderToStaticMarkup","PriceList","autoTable","html","firstChild","cellPadding","didParseCell","section","raw","nodeName","fillColor","cellWidth","addPage","save","ProductCostPerGroupCard","group_name","total_cost","valueFormat","ProductosPage","setZone","invoiceTotal","commissionTotal","EmployeeSalesTable","getAllEmployees","employees","getComisionInfo","employeeId","catch","error","commissionInfo","updateComisionInfo","method","JSON","stringify","res","getEmployeeSales","sales","EmployeeSearch","loadEmployees","CommissionModal","employee","setCommissionInfo","formData","setFormData","message","submissionState","setSubmissionState","sanitizedFormData","submitForm","success","Alert","Spinner","animation","info","step","commission","onFocus","select","EmployeeActions","onDateSubmit","employeeSalesLoading","setEmployeeSalesLoading","selectedEmployee","setSelectedEmployee","showCommissionModal","setShowCommissionModal","EmployeesPage","employeeSales","setEmployeeSales","fetchCurrencyRates","status","App","location","useLocation","Simbolo","Navbar","bg","expand","Brand","Toggle","Collapse","Nav","route","pathname","textTransform","path","component","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2715dd10.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nexport const CurrencyRateContext = React.createContext();\n\nexport const CurrencyRateProvider = ({ children }) => {\n  const [currencyRate, setCurrencyRate] = useState(0);\n\n  return (\n    <CurrencyRateContext.Provider value={{ currencyRate, setCurrencyRate }}>{children}</CurrencyRateContext.Provider>\n  );\n};\n","import { useState } from 'react';\nimport { DateTime } from 'luxon';\nimport { Button } from 'react-bootstrap';\n\nconst DatePicker = ({ onSubmit, loading, submitDisabled }) => {\n  const [dateRange, setDateRange] = useState({\n    from: DateTime.now().toISODate(),\n    to: DateTime.now().toISODate(),\n  });\n\n  return (\n    <div className='d-flex flex-column flex-sm-row justify-content-center mb-3 gap-2'>\n      <div className='d-flex flex-row justify-content-center align-items-center gap-2 text-light'>\n        <label className='d-none d-sm-flex'>Desde:</label>\n        <input\n          type='date'\n          value={dateRange.from}\n          onChange={(event) => setDateRange({ ...dateRange, from: event.target.value })}\n        />\n        <label className='d-none d-sm-flex'>Hasta:</label>\n        <input\n          type='date'\n          value={dateRange.to}\n          onChange={(event) => setDateRange({ ...dateRange, to: event.target.value })}\n        />\n      </div>\n      <Button variant='primary' onClick={(event) => onSubmit(event, dateRange)} disabled={loading || submitDisabled}>\n        {loading && (\n          <div>\n            <span className='spinner-border spinner-border-sm' role='status' aria-hidden='true'></span>\n            <span className='visually-hidden'>Loading...</span>\n          </div>\n        )}\n        {!loading && <span className='mr-2'>Enviar</span>}\n      </Button>\n    </div>\n  );\n};\n\nexport default DatePicker;\n","const BASE_URL = '/api/invoices';\r\n\r\nexport const fetchInvoiceReport = async ({ from, to }) => {\r\n  const response = await fetch(`${BASE_URL}/sales?from=${from}&to=${to}`);\r\n  const report = await response.json();\r\n  console.log('From fetchInvoiceReport: ', report);\r\n  return report;\r\n};\r\n\r\nexport const fetchInvoiceList = async ({ from, to }) => {\r\n  const response = await fetch(`${BASE_URL}?from=${from}&to=${to}`);\r\n  const invoices = await response.json();\r\n  return invoices;\r\n};\r\n","import { useEffect } from 'react';\r\nimport React from 'react';\r\nimport { useTable, useRowSelect } from 'react-table';\r\n\r\nimport debounce from 'lodash.debounce';\r\n\r\nconst Table = ({\r\n  data = [],\r\n  loading,\r\n  columns = [],\r\n  filterPlaceholder,\r\n  onFilter,\r\n  maxHeight = 350,\r\n  showFooter = false,\r\n  onRowSelect,\r\n  multiSelect = false,\r\n}) => {\r\n  const { getTableProps, getTableBodyProps, headerGroups, footerGroups, rows, prepareRow, state } = useTable(\r\n    {\r\n      columns,\r\n      data,\r\n    },\r\n    useRowSelect\r\n  );\r\n\r\n  const onFilterDebounced = debounce((value) => {\r\n    onFilter(value);\r\n  }, 500);\r\n\r\n  useEffect(() => {\r\n    if (multiSelect) {\r\n      const selectedRows = rows.filter((row) => row.isSelected);\r\n      onRowSelect(selectedRows.map((row) => row.original));\r\n    } else {\r\n      onRowSelect && onRowSelect(rows.find((row) => row.isSelected)?.original);\r\n    }\r\n  }, [state, multiSelect, onRowSelect]);\r\n\r\n  const MemoizedRow = React.memo(\r\n    ({ row }) => {\r\n      return (\r\n        <tr\r\n          {...row.getRowProps({\r\n            onClick: onRowSelect\r\n              ? (e) => {\r\n                  const lastSelectedRowIndex = Object.keys(state.selectedRowIds)[\r\n                    Object.keys(state.selectedRowIds).length - 1\r\n                  ];\r\n                  const newSelectedRowIndex = row.index;\r\n\r\n                  if (e.ctrlKey && !e.shiftKey) {\r\n                    row.toggleRowSelected();\r\n                  } else if (e.shiftKey && !e.ctrlKey) {\r\n                    if (multiSelect) {\r\n                      if (newSelectedRowIndex >= lastSelectedRowIndex) {\r\n                        for (let i = lastSelectedRowIndex; i <= newSelectedRowIndex; i++) {\r\n                          if (i !== lastSelectedRowIndex) {\r\n                            rows[i].toggleRowSelected();\r\n                          }\r\n                        }\r\n                      } else {\r\n                        for (let i = lastSelectedRowIndex; i >= newSelectedRowIndex; i--) {\r\n                          if (i !== lastSelectedRowIndex) {\r\n                            rows[i].toggleRowSelected();\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  } else {\r\n                    if (row.isSelected) {\r\n                      row.toggleRowSelected();\r\n                    } else {\r\n                      state.selectedRowIds = {};\r\n                      row.toggleRowSelected();\r\n                    }\r\n                  }\r\n                }\r\n              : null,\r\n          })}\r\n          {...row.getToggleRowSelectedProps({})}\r\n        >\r\n          {row.cells.map((cell, index) => {\r\n            return (\r\n              <td\r\n                title={cell.value}\r\n                {...cell.getCellProps()}\r\n                style={{\r\n                  background: row.isSelected ? 'lightblue' : 'white',\r\n                  color: row.isSelected ? 'white' : 'black',\r\n                }}\r\n              >\r\n                {cell.render('Cell')}\r\n              </td>\r\n            );\r\n          })}\r\n        </tr>\r\n      );\r\n    },\r\n    [data]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {onFilter && (\r\n        <div className='table-filter-container'>\r\n          <input\r\n            className='table-filter-input'\r\n            onChange={(event) => onFilterDebounced(event.target.value)}\r\n            placeholder={filterPlaceholder}\r\n            autoFocus\r\n          />\r\n        </div>\r\n      )}\r\n      <div className='table-container' style={{ maxHeight }}>\r\n        <table {...getTableProps()}>\r\n          <thead>\r\n            {headerGroups.map((headerGroup) => (\r\n              <tr {...headerGroup.getHeaderGroupProps()}>\r\n                {headerGroup.headers.map((column) => (\r\n                  <th {...column.getHeaderProps()}>{column.render('Header')}</th>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </thead>\r\n          <tbody {...getTableBodyProps()}>\r\n            {rows.map((row) => {\r\n              prepareRow(row);\r\n              return <MemoizedRow row={row} />;\r\n            })}\r\n          </tbody>\r\n          {showFooter && data.length > 0 && (\r\n            <tfoot>\r\n              {footerGroups.map((group) => (\r\n                <tr {...group.getFooterGroupProps()}>\r\n                  {group.headers.map((column) => (\r\n                    <td {...column.getFooterProps()}>{column.render('Footer')}</td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tfoot>\r\n          )}\r\n        </table>\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import dayjs from 'dayjs';\n\nconst columns = [\n  {\n    Header: 'ID',\n    accessor: 'invoiceId',\n  },\n  {\n    Header: 'Cliente',\n    accessor: 'client',\n  },\n  {\n    Header: 'RIF',\n    accessor: 'rif',\n  },\n  {\n    Header: 'TOTAL',\n    accessor: 'total',\n    Cell: ({ value }) => `$${value ? value.toFixed(2) : ''}`,\n  },\n  {\n    Header: 'Fecha',\n    accessor: 'createdAt',\n    Cell: ({ value }) => {\n      return dayjs(value).format('MMM DD, YYYY');\n    },\n  },\n];\n\nexport default columns;\n","import Table from 'components/Table';\nimport { Card } from 'react-bootstrap';\nimport { useMemo } from 'react';\nimport columns from './columns';\n\nconst InvoicesTable = ({ data, loading, onRowSelect }) => {\n  const memoizedColumns = useMemo(() => columns, []);\n\n  return (\n    <Card className='noselect'>\n      <Card.Header>\n        <h3>Facturas</h3>\n      </Card.Header>\n      <Card.Body>\n        <Table data={data} columns={memoizedColumns} loading={loading} onRowSelect={onRowSelect} multiSelect />\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default InvoicesTable;\n","import { Modal, Button } from 'react-bootstrap';\n\nfunction CurrencyModal({ show, onClose, onSubmit }) {\n  return (\n    <Modal show={show} size='sm' onHide={onClose}>\n      <Modal.Header closeButton onHide={onClose}>\n        <Modal.Title>Moneda</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Button className='w-100 mb-3' onClick={() => onSubmit('USD')}>\n          USD\n        </Button>\n        <Button className='w-100' onClick={() => onSubmit('Bs')}>\n          Bs\n        </Button>\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default CurrencyModal;\n","import { DateTime } from 'luxon';\n\nconst pdfschema = (productList, quantityTotal, totalSummary, currency) => ({\n  content: [\n    { text: 'ALIMENTOS DM MARKET, C.A.', style: 'header' },\n    {\n      text: 'CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.',\n      style: 'header',\n    },\n    { text: 'R.I.F.: J-41270446-0', style: 'header' },\n    { text: DateTime.local().toFormat('dd/MM/yyyy'), style: 'header' },\n    {\n      style: 'table',\n      table: {\n        widths: [85, '*', 'auto', 'auto'],\n        body: [\n          ['CATEGORÍA', 'PRODUCTO', 'CANTIDAD', `TOTAL (${currency})`],\n          ...productList.map(({ group, product, quantity, total }) => [group, product, quantity, total]),\n          ['', '', { text: quantityTotal, bold: true }, { text: `${currency} ${totalSummary}`, bold: true }],\n        ],\n      },\n    },\n  ],\n  styles: {\n    header: {\n      alignment: 'center',\n    },\n    table: {\n      margin: [0, 20, 0, 0],\n    },\n  },\n\n  pageMargins: 40,\n  pageSize: 'LETTER',\n});\n\nexport default pdfschema;\n","import { useMemo, useContext, useState } from 'react';\nimport { CurrencyRateContext } from '../../context/currency_rate';\nimport { Card, Button } from 'react-bootstrap';\nimport Table from 'components/Table';\nimport CurrencyModal from 'components/Modals/CurrencyModal';\nimport pdf from './pdf';\nimport pdfMake from 'pdfmake/build/pdfmake';\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\npdfMake.vfs = pdfFonts.pdfMake.vfs;\n\nconst ProductsTable = ({ data, totalSummary }) => {\n  const { currencyRate } = useContext(CurrencyRateContext);\n\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\n\n  const quantityTotal = useMemo(() => {\n    if (!data) return 0;\n\n    return data.reduce((acc, item) => {\n      return acc + item.quantity;\n    }, 0);\n  }, [data]);\n\n  const sortedData = useMemo(() => {\n    if (!data) return [];\n\n    return data.sort((a, b) => {\n      return (\n        a.group.toLowerCase().localeCompare(b.group.toLowerCase()) ||\n        a.product.toLowerCase().localeCompare(b.product.toLowerCase())\n      );\n    });\n  }, [data]);\n\n  const memoizedColumns = useMemo(\n    () => [\n      {\n        Header: 'Categoría',\n        accessor: 'group',\n      },\n      {\n        Header: 'ID',\n        accessor: 'productId',\n      },\n      {\n        Header: 'Producto',\n        accessor: 'product',\n      },\n      {\n        Header: 'Cantidad',\n        accessor: 'quantity',\n        Footer: () => {\n          return <span>{quantityTotal ? quantityTotal.toFixed(2) : ''}</span>;\n        },\n      },\n      {\n        Header: 'Total',\n        accessor: 'total',\n        Footer: () => {\n          return <span>${totalSummary ? totalSummary.toFixed(2) : ''}</span>;\n        },\n      },\n    ],\n    [totalSummary, quantityTotal]\n  );\n\n  console.log(sortedData);\n\n  const exportToPDF = () => {\n    const pdfData = pdf(sortedData, quantityTotal, totalSummary);\n\n    pdfMake.createPdf(pdfData).open();\n  };\n\n  return (\n    <Card>\n      <Card.Header>\n        <div className='d-flex w-100 justify-content-between'>\n          <h3>Productos</h3>\n          <Button onClick={() => setShowCurrencyModal(true)}>Imprimir</Button>\n        </div>\n      </Card.Header>\n      <Card.Body>\n        <Table data={sortedData} columns={memoizedColumns} showFooter />\n      </Card.Body>\n      {showCurrencyModal && (\n        <CurrencyModal\n          show={showCurrencyModal}\n          onClose={() => setShowCurrencyModal(false)}\n          onSubmit={async (currency) => {\n            let productsData = sortedData;\n\n            if (currency === 'Bs') {\n              productsData = productsData.map((item) => {\n                return {\n                  ...item,\n                  total: Number(item.price * item.quantity * currencyRate?.Cambio).toFixed(2),\n                };\n              });\n            }\n\n            const pdfData = pdf(productsData, quantityTotal, totalSummary, currency);\n\n            pdfMake.createPdf(pdfData).open();\n          }}\n        />\n      )}\n    </Card>\n  );\n};\n\nexport default ProductsTable;\n","import { useState, useMemo } from 'react';\nimport { Container } from 'react-bootstrap';\nimport DatePicker from 'components/DatePicker';\nimport { fetchInvoiceList } from '../../api/invoice';\nimport InvoicesTable from 'components/InvoicesTable';\nimport ProductsTable from 'components/ProductsTable';\n\nconst InvoicesPage = () => {\n  const [loading, setLoading] = useState(false);\n  const [invoices, setInvoices] = useState([]);\n  const [selectedRows, setSelectedRows] = useState([]);\n\n  const productsSummary = useMemo(() => {\n    if (!selectedRows || selectedRows.length === 0) return [];\n\n    const products = {};\n\n    selectedRows.forEach((row) => {\n      row.products.forEach((product) => {\n        if (!products[product.productId]) {\n          products[product.productId] = {\n            ...product,\n            quantity: 0,\n          };\n        }\n\n        products[product.productId].quantity += product.quantity;\n        products[product.productId].total = products[product.productId].quantity * products[product.productId].price;\n        products[product.productId].total = products[product.productId].total.toFixed(2);\n      });\n    });\n    //convert products to an array\n    return Object.values(products);\n  }, [selectedRows]);\n\n  const invoicesTotalSummary = useMemo(() => {\n    if (!selectedRows || selectedRows.length === 0) return 0;\n\n    return selectedRows.reduce((total, invoice) => total + invoice?.total, 0);\n  }, [selectedRows]);\n\n  const onSubmit = async (event, dateRange) => {\n    event.preventDefault();\n\n    setLoading(true);\n    const response = await fetchInvoiceList(dateRange);\n    setInvoices(response);\n    setLoading(false);\n  };\n\n  return (\n    <Container fluid>\n      <DatePicker onSubmit={onSubmit} loading={loading} />\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\n        <div className='col-12 col-xl-6'>\n          <InvoicesTable data={invoices} loading={loading} onRowSelect={setSelectedRows} />\n        </div>\n        <div className='col-12 col-xl-6'>\n          <ProductsTable data={productsSummary} loading={loading} totalSummary={invoicesTotalSummary} />\n        </div>\n      </div>\n    </Container>\n  );\n};\n\nexport default InvoicesPage;\n","const columns = [\r\n  {\r\n    Header: \"Producto\",\r\n    accessor: \"product\",\r\n  },\r\n  {\r\n    Header: \"Cantidad\",\r\n    accessor: \"quantity\",\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.quantity;\r\n      }, 0);\r\n      return Number(total).toFixed(2);\r\n    },\r\n  },\r\n  {\r\n    Header: \"Bruto\",\r\n    accessor: \"rawProfit\",\r\n    Cell: ({ value }) => {\r\n      return value ? \"$\" + value.toLocaleString() : \"\";\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.rawProfit;\r\n      }, 0);\r\n      return \"$\" + Number(total.toFixed(2)).toLocaleString();\r\n    },\r\n  },\r\n  {\r\n    Header: \"Utilidad\",\r\n    accessor: \"netProfit\",\r\n    Cell: ({ value }) => {\r\n      return value ? \"$\" + value.toLocaleString() : \"\";\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.netProfit;\r\n      }, 0);\r\n      return \"$\" + Number(total.toFixed(2)).toLocaleString();\r\n    },\r\n  },\r\n  {\r\n    Header: \"Promedio\",\r\n    accessor: \"averageProfitPercent\",\r\n    Cell: ({ value }) => {\r\n      return value + \"%\";\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst SaleReportTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} showFooter loading={loading} />;\r\n};\r\n\r\nexport default SaleReportTable;\r\n","import { useEffect, useState } from 'react';\r\nimport SaleReportTable from 'components/SaleReportTable';\r\n\r\nconst SaleReportCard = ({ data = [], onFilter, loading }) => {\r\n  const [sorting, setSorting] = useState('rawProfit');\r\n  const [sortedData, setSortedData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const sorted = data.sort((a, b) => {\r\n      return b[sorting] - a[sorting];\r\n    });\r\n    setSortedData([...sorted]);\r\n  }, [sorting, data]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Ventas</h3>\r\n        <div>\r\n          <label style={{ marginRight: '5px' }}>Ordenar:</label>\r\n          <select onChange={(event) => setSorting(event.target.value)} value={sorting}>\r\n            <option value='quantity'>Cantidad</option>\r\n            <option value='rawProfit'>Bruto</option>\r\n            <option value='netProfit'>Utilidad</option>\r\n            <option value='averageProfitPercent'>Promedio</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className='card-body'>\r\n        <input\r\n          className='input-filter'\r\n          placeholder='Buscar...'\r\n          type='search'\r\n          onChange={(event) => onFilter(event.target.value)}\r\n        />\r\n        <SaleReportTable data={sortedData} loading={loading} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SaleReportCard;\r\n","import { ResponsivePie } from '@nivo/pie';\n\nconst GroupSales = ({ chartData = [], loading }) => {\n  return (\n    <div className='card'>\n      <div className='card-header'>\n        <h3>Gráfico de categorías</h3>\n      </div>\n      <div className='card-body'>\n        {chartData.length > 0 && (\n          <ResponsivePie\n            data={chartData}\n            margin={{ top: 30, right: 20, bottom: 20, left: 20 }}\n            innerRadius={0.5}\n            padAngle={0.7}\n            cornerRadius={3}\n            activeOuterRadiusOffset={8}\n            arcLabel={function (e) {\n              return `${e.value} (${e.data.netProfit})`;\n            }}\n            borderWidth={1}\n            arcLinkLabelsSkipAngle={10}\n            arcLinkLabelsTextColor='#333333'\n            arcLinkLabelsThickness={2}\n            arcLinkLabelsColor={{ from: 'color' }}\n            arcLabelsSkipAngle={10}\n            arcLabelsTextColor={{\n              from: 'color',\n              modifiers: [['darker', 2]],\n            }}\n            tooltip={({ datum }) => {\n              return (\n                <div className='tooltip-container'>\n                  <span className='small-square' style={{ background: datum.color }}></span>\n                  <strong>{datum.label}</strong>\n                  <label>Bruto: </label>\n                  <span>${Number(datum.value).toLocaleString()}</span>\n                  <label>Utilidad: </label>\n                  <span>${Number(datum.data.netProfit).toLocaleString()}</span>\n                </div>\n              );\n            }}\n          />\n        )}\n        {loading && (\n          <div className='position-absolute top-50 start-50 translate-middle'>\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GroupSales;\n","import { useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport SaleReportCard from 'components/Cards/SaleReport';\nimport GroupSales from 'components/Cards/GroupSales';\nimport DatePicker from 'components/DatePicker';\nimport { fetchInvoiceReport } from 'api/invoice';\nimport debounce from 'lodash.debounce';\n\nconst VentasPage = () => {\n  const [data, setData] = useState({\n    filtered_invoices_report: [],\n    invoices_report: [],\n    group_sales_chart: [],\n  });\n  const [loading, setLoading] = useState(false);\n\n  const onFilter = debounce((searchTerm) => {\n    const filteredData = data.invoices_report.filter((f) => f.product.toLowerCase().includes(searchTerm.toLowerCase()));\n    setData({ ...data, filtered_invoices_report: filteredData });\n  }, 500);\n\n  const onSubmit = async (event, dateRange) => {\n    event.preventDefault();\n\n    setLoading(true);\n    const response = await fetchInvoiceReport(dateRange);\n    const chartData = response.group_sales_chart_data.reduce(\n      (acc, current) => [\n        ...acc,\n        {\n          id: current.categoria,\n          label: current.categoria,\n          value: current.rawProfit,\n          netProfit: current.netProfit,\n        },\n      ],\n      []\n    );\n    setData({ ...data, invoices_report: response.sales_report, group_sales_chart: chartData });\n    setLoading(false);\n  };\n\n  return (\n    <Container fluid>\n      <DatePicker onSubmit={onSubmit} loading={loading} />\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\n        <div className='col-12 col-xl-6'>\n          <SaleReportCard\n            data={data.filtered_invoices_report.length > 0 ? data.filtered_invoices_report : data.invoices_report}\n            onFilter={onFilter}\n            loading={loading}\n          />\n        </div>\n        <div className='col-12 col-xl-6'>\n          <GroupSales chartData={data.group_sales_chart} loading={loading} />\n        </div>\n      </div>\n    </Container>\n  );\n};\n\nexport default VentasPage;\n","const columns = [\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'total_USD',\r\n    Cell: ({ value }) => {\r\n      return '$' + value.toLocaleString();\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from '../Table';\r\nimport columns from './columns';\r\n\r\nconst ClientReportTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} loading={loading} />;\r\n};\r\n\r\nexport default ClientReportTable;\r\n","import ClientReportTable from 'components/ClientReportTable';\r\n\r\nconst ClientReportCard = ({ loading, data = [], onFilter }) => {\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Mejores clientes</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        {data.length > 0 && (\r\n          <>\r\n            <input\r\n              className='input-filter'\r\n              placeholder='Buscar...'\r\n              type='search'\r\n              onChange={(event) => onFilter(event.target.value, 'client', 'client_report')}\r\n            />\r\n            <ClientReportTable data={data} loading={loading} />\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientReportCard;\r\n","import AsyncSelect from 'react-select/async';\r\nimport debounce from 'debounce-promise';\r\n\r\nconst SearchInput = ({ placeholder, loadOptions, defaultOptions = true, cacheOptions = true, onSelect }) => {\r\n  return (\r\n    <AsyncSelect\r\n      loadOptions={debounce((inputValue, callback) => loadOptions(inputValue, callback), 700)}\r\n      cacheOptions={cacheOptions}\r\n      defaultOptions={defaultOptions}\r\n      placeholder={placeholder}\r\n      onChange={onSelect ? onSelect : null}\r\n      loadingMessage={() => {\r\n        return 'Cargando...';\r\n      }}\r\n      isClearable\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchInput;\r\n","const BASE_URL = \"/api/products\";\r\nconst REPORTS_BASE_URL = \"/api/reports/products\";\r\n\r\nexport const fetchProducts = async ({ filter }) => {\r\n  const filterParam = filter ? `?filter=${filter}` : \"\";\r\n  const response = await fetch(BASE_URL + filterParam);\r\n  const products = await response.json();\r\n  return products;\r\n};\r\n\r\nexport const fetchCostFluctuation = async (productId) => {\r\n  const response = await fetch(`${BASE_URL}/cost-fluctuation/${productId}`);\r\n  const report = await response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchCostPerGroup = async () => {\r\n  const response = await fetch(`${BASE_URL}/cost/group`);\r\n  const report = await response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchProductsByGroup = async () => {\r\n  const response = await fetch(`${BASE_URL}/group`);\r\n  const products = await response.json();\r\n  return products;\r\n};\r\n\r\nexport const fetchProductPriceList = async (groupId) => {\r\n  const response = await fetch(`${BASE_URL}/price-list/${groupId}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchProductReports = async (productId) => {\r\n  const response = await fetch(`${REPORTS_BASE_URL}/cost-fluctuation/${productId}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchBestClients = async (productId, dateRange) => {\r\n  const response = await fetch(\r\n    `${REPORTS_BASE_URL}/best-clients/${productId}?from=${dateRange.from}&to=${dateRange.to}`\r\n  );\r\n  const report = response.json();\r\n  return report;\r\n};\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchProducts } from 'api/products';\r\n\r\nconst ProductSearch = ({ onSelect }) => {\r\n    const loadProductVariants = async (inputValue) => {\r\n        let products = await fetchProducts({ filter: inputValue });\r\n\r\n        if (products && products.length > 0) {\r\n            const records = products.map((record) => {\r\n                let product_name = record.Descripcion;\r\n\r\n                const product = {\r\n                    key: record.id,\r\n                    label: product_name,\r\n                    value: record,\r\n                };\r\n                return product;\r\n            });\r\n\r\n            return records;\r\n        }\r\n    };\r\n\r\n    const handleSelect = (option, { action }) => {\r\n        if (action === 'select-option') {\r\n            onSelect(option.value, action);\r\n        } else if (action === 'clear') {\r\n            onSelect(null, action);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SearchInput\r\n            loadOptions={loadProductVariants}\r\n            defaultOptions={false}\r\n            placeholder='Buscar producto...'\r\n            onSelect={handleSelect}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ProductSearch;\r\n","const columns = [\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n  {\r\n    Header: 'Cantidad',\r\n    accessor: 'quantity_total',\r\n  },\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'total_USD',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value.toLocaleString() : '';\r\n    },\r\n  },\r\n  {\r\n    Header: 'Utilidad',\r\n    accessor: 'utilidad',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value.toLocaleString() : 0;\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst ClientPerProductTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} loading={loading} />;\r\n};\r\n\r\nexport default ClientPerProductTable;\r\n","const BASE_URL = '/api/clients';\n\nexport const fetchClients = async ({ filter }) => {\n  const filterParam = filter ? `?filter=${filter}` : '';\n  const response = await fetch(`${BASE_URL}${filterParam}`);\n  const clients = response.json();\n  return clients;\n};\nexport const fetchBestClients = async (dateRange) => {\n  const response = await fetch(`${BASE_URL}/best/?from=${dateRange.from}&to=${dateRange.to}`);\n  const report = response.json();\n  return report;\n};\n\nexport const fetchBestClientsPerProduct = async (productId, dateRange) => {\n  const response = await fetch(`${BASE_URL}/best/product/${productId}?from=${dateRange.from}&to=${dateRange.to}`);\n  const report = response.json();\n  return report;\n};\n\nexport const fetchMonthlyAverage = async (clientId) => {\n  const response = await fetch(`${BASE_URL}/average/month/${clientId}`);\n  const report = response.json();\n  return report;\n};\n","import { useState, useEffect } from 'react';\r\nimport ProductSearch from 'components/ProductSearch';\r\nimport ClientPerProductTable from 'components/ClientPerProduct/Table';\r\nimport { fetchBestClientsPerProduct } from 'api/clients';\r\nimport { DateTime } from 'luxon';\r\n\r\nconst ClientPerProductCard = ({ dateRange }) => {\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedProduct && dateRange.from && dateRange.to) {\r\n      setLoading(true);\r\n      fetchBestClientsPerProduct(selectedProduct.IdProducto, dateRange).then((response) => {\r\n        setData([...response]);\r\n        setLoading(false);\r\n      });\r\n    } else if (!selectedProduct) {\r\n      setData([]);\r\n    }\r\n  }, [selectedProduct, dateRange]);\r\n  console.log(data);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Cliente por producto</h3>\r\n        <div style={{ display: 'flex', flexDirection: 'row', gap: '5px' }}>\r\n          <small>Desde: </small>\r\n          <small>{DateTime.fromISO(dateRange.from).toLocaleString()} </small>\r\n          <small>Hasta: </small>\r\n          <small>{DateTime.fromISO(dateRange.to).toLocaleString()} </small>\r\n        </div>\r\n      </div>\r\n      <div className='card-body'>\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            flex: '1',\r\n            justifyContent: 'space-between',\r\n          }}\r\n        >\r\n          <div style={{ width: '100%' }}>\r\n            <ProductSearch onSelect={setSelectedProduct} />\r\n          </div>\r\n        </div>\r\n        <ClientPerProductTable data={data} loading={loading} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientPerProductCard;\r\n","import SearchInput from 'components/SearchInput';\nimport { fetchClients } from 'api/clients';\n\nconst ClientSearch = ({ onSelect }) => {\n    const loadClients = async (inputValue) => {\n        let clients = await fetchClients({ filter: inputValue });\n\n        if (clients && clients.length > 0) {\n            const records = clients.map((record) => {\n                const client = {\n                    key: record.IdCliente,\n                    label: record.name,\n                    value: record,\n                };\n                return client;\n            });\n\n            return records;\n        }\n    };\n\n    const handleSelect = (option, { action }) => {\n        if (action === 'select-option') {\n            onSelect && onSelect(option.value, action);\n        } else if (action === 'clear') {\n            onSelect && onSelect(null, action);\n        }\n    };\n\n    return (\n        <SearchInput\n            loadOptions={loadClients}\n            defaultOptions={false}\n            placeholder='Buscar cliente...'\n            onSelect={handleSelect}\n        />\n    );\n};\n\nexport default ClientSearch;\n","import { useState, useEffect } from 'react';\nimport { fetchMonthlyAverage } from 'api/clients';\nimport ClientSearch from 'components/ClientSearch';\nimport { ResponsiveLine } from '@nivo/line';\n\nconst MonthlyAverageClient = () => {\n  const [selectedClient, setSelectedClient] = useState(null);\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (selectedClient) {\n      setLoading(true);\n      fetchMonthlyAverage(selectedClient.IdCliente).then((response) => {\n        console.log(response);\n        if (Object.keys(response).length > 0) {\n          setData([response]);\n        }\n        setLoading(false);\n      });\n    } else {\n      setData([]);\n    }\n  }, [selectedClient]);\n\n  return (\n    <div className='card'>\n      <div className='card-header'>\n        <h3>Promedio mensual</h3>\n      </div>\n      <div className='card-body'>\n        <ClientSearch onSelect={setSelectedClient} />\n        {data && (\n          <ResponsiveLine\n            data={data}\n            margin={{ top: 20, right: 30, bottom: 80, left: 40 }}\n            xScale={{ type: 'point' }}\n            yScale={{\n              type: 'linear',\n              min: 'auto',\n              max: 'auto',\n              stacked: true,\n              reverse: false,\n            }}\n            axisTop={null}\n            axisRight={null}\n            pointSize={10}\n            pointColor={{ theme: 'background' }}\n            pointBorderWidth={2}\n            pointBorderColor={{ from: 'serieColor' }}\n            pointLabelYOffset={-12}\n            useMesh={true}\n          />\n        )}\n        {loading && (\n          <div className='position-absolute top-50 start-50 translate-middle'>\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MonthlyAverageClient;\n","import { useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport ClientReportCard from 'components/Cards/ClientReport';\nimport ClientPerProductCard from 'components/ClientPerProduct/Card';\nimport MonthlyAverageClientCard from 'components/MonthlyAverageClient/Card';\nimport DatePicker from 'components/DatePicker';\nimport { fetchBestClients } from 'api/clients';\nimport { DateTime } from 'luxon';\nimport debounce from 'lodash.debounce';\n\nconst ClientesPage = () => {\n  const [data, setData] = useState({\n    filtered_best_clients: [],\n    best_clients: [],\n    group_sales_chart: [],\n  });\n  const [dateRange, setDateRange] = useState({\n    from: DateTime.now().toISODate(),\n    to: DateTime.now().toISODate(),\n  });\n  const [loading, setLoading] = useState(false);\n\n  const onFilter = debounce((searchTerm) => {\n    const filteredData = data.best_clients.filter((f) => f.client.toLowerCase().includes(searchTerm.toLowerCase()));\n    setData({ ...data, filtered_best_clients: filteredData });\n  }, 500);\n\n  const onSubmit = async (event, dateRange) => {\n    event.preventDefault();\n\n    setLoading(true);\n    const response = await fetchBestClients(dateRange);\n    setDateRange(dateRange);\n    setData({ ...data, best_clients: response });\n    setLoading(false);\n  };\n\n  return (\n    <Container fluid>\n      <DatePicker onSubmit={onSubmit} loading={loading} />\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\n        <div className='col-12 col-xl-4'>\n          <ClientReportCard\n            data={data.filtered_best_clients.length > 0 ? data.filtered_best_clients : data.best_clients}\n            onFilter={onFilter}\n            loading={loading}\n          />\n        </div>\n        <div className='col-12 col-xl-4'>\n          <ClientPerProductCard dateRange={dateRange} />\n        </div>\n        <div className='col-12 col-xl-4'>\n          <MonthlyAverageClientCard />\n        </div>\n      </div>\n    </Container>\n  );\n};\n\nexport default ClientesPage;\n","import { useState, useEffect } from 'react';\r\nimport ProductSearch from 'components/ProductSearch';\r\nimport { ResponsiveLine } from '@nivo/line';\r\nimport { fetchCostFluctuation } from 'api/products';\r\n\r\nconst CostFluctuation = () => {\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedProduct) {\r\n      const fetch_product_report = async () => {\r\n        setLoading(true);\r\n        const report_data = await fetchCostFluctuation(selectedProduct.IdProducto);\r\n        if (Object.keys(report_data).length > 0) {\r\n          setData([report_data]);\r\n        }\r\n        setLoading(false);\r\n      };\r\n\r\n      fetch_product_report();\r\n    } else if (!selectedProduct) {\r\n      setData([]);\r\n    }\r\n  }, [selectedProduct]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Promedio mensual costo</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        <ProductSearch onSelect={setSelectedProduct} />\r\n        <ResponsiveLine\r\n          data={data}\r\n          margin={{ top: 20, right: 30, bottom: 80, left: 40 }}\r\n          xScale={{ type: 'point' }}\r\n          yScale={{\r\n            type: 'linear',\r\n            min: 'auto',\r\n            max: 'auto',\r\n            stacked: true,\r\n            reverse: false,\r\n          }}\r\n          axisTop={null}\r\n          axisRight={null}\r\n          axisLeft={{\r\n            legend: 'Precio',\r\n            legendPosition: 'middle',\r\n            legendOffset: -30,\r\n          }}\r\n          axisBottom={{\r\n            legend: 'Meses',\r\n            legendPosition: 'middle',\r\n            legendOffset: 30,\r\n          }}\r\n          pointSize={10}\r\n          pointColor={{ theme: 'background' }}\r\n          pointBorderWidth={2}\r\n          pointBorderColor={{ from: 'serieColor' }}\r\n          pointLabelYOffset={-12}\r\n          useMesh={true}\r\n        />\r\n      </div>\r\n      {loading && (\r\n        <div className='position-absolute top-50 start-50 translate-middle'>\r\n          <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CostFluctuation;\r\n","const BASE_URL = \"/api/groups\";\r\n\r\nexport const fetchGroups = async ({ filter }) => {\r\n  const filterParam = filter ? `?filter=${filter}` : \"\";\r\n  const response = await fetch(BASE_URL + filterParam);\r\n  const groups = await response.json();\r\n  return groups;\r\n};\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchGroups } from 'api/groups';\r\n\r\nconst GroupSearch = ({ onSelect }) => {\r\n    const loadGroups = async (inputValue) => {\r\n        let groups = await fetchGroups({ filter: inputValue });\r\n\r\n        if (groups && groups.length > 0) {\r\n            const records = groups.map((record) => {\r\n                const group = {\r\n                    key: record.groupId,\r\n                    label: record.name,\r\n                    value: record,\r\n                };\r\n                return group;\r\n            });\r\n\r\n            return records;\r\n        }\r\n    };\r\n\r\n    const handleSelect = (option, { action }) => {\r\n        if (action === 'select-option') {\r\n            onSelect(option.value, action);\r\n        } else if (action === 'clear') {\r\n            onSelect(null, action);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ width: '100%' }}>\r\n            <SearchInput loadOptions={loadGroups} placeholder='Buscar categoría...' onSelect={handleSelect} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GroupSearch;\r\n","const columns = [\r\n  {\r\n    Header: 'Producto',\r\n    accessor: 'product',\r\n  },\r\n  {\r\n    Header: 'Precio',\r\n    accessor: 'price',\r\n  },\r\n  {\r\n    Header: 'Inventario',\r\n    accessor: 'stock',\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst PriceListTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} loading={loading} />;\r\n};\r\n\r\nexport default PriceListTable;\r\n","const PriceListPDF = ({ data = [], group = '', currency }) => {\n  return (\n    <table id='price-list-table'>\n      <thead>\n        <tr>\n          <th>Categoría</th>\n          <th>Producto</th>\n          <th>{`Precio (${currency})`}</th>\n          <th>DISPONIBLE</th>\n        </tr>\n      </thead>\n      <tbody>\n        {data.map((row) => {\n          if (row.stock > 0) {\n            return (\n              <tr key={row.productId}>\n                <td>{group}</td>\n                <td>{row.product}</td>\n                <td>{row.price}</td>\n                <td>EN STOCK</td>\n              </tr>\n            );\n          } else {\n            return '';\n          }\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nexport default PriceListPDF;\n","import { useState, useEffect, useRef, useContext } from 'react';\r\nimport { CurrencyRateContext } from '../../../context/currency_rate';\r\nimport GroupSearch from 'components/GroupSearch';\r\nimport { fetchProductPriceList } from 'api/products';\r\nimport PriceListTable from 'components/PriceListTable';\r\nimport { useReportFilter } from 'hooks/useReportFilter';\r\nimport { DateTime } from 'luxon';\r\nimport PriceListPDF from 'components/PDF/PriceList';\r\nimport { renderToStaticMarkup } from 'react-dom/server';\r\nimport { fetchProductsByGroup } from 'api/products';\r\nimport { Button } from 'react-bootstrap';\r\nimport CurrencyModal from 'components/Modals/CurrencyModal';\r\n\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nconst GroupStock = () => {\r\n  const [selectedGroup, setSelectedGroup] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const { filteredData, setFilteredData, onFilterDebounced } = useReportFilter(data);\r\n  const inputRef = useRef(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\r\n\r\n  const { currencyRate } = useContext(CurrencyRateContext);\r\n\r\n  useEffect(() => {\r\n    if (selectedGroup) {\r\n      const fetch_stock_by_group = async () => {\r\n        setLoading(true);\r\n        const data = await fetchProductPriceList(selectedGroup.groupId);\r\n        setFilteredData([]);\r\n        inputRef.current.value = '';\r\n        setData([...data]);\r\n        setLoading(false);\r\n      };\r\n\r\n      fetch_stock_by_group();\r\n    } else if (!selectedGroup) {\r\n      setData([]);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedGroup]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Lista de precios por categoría</h3>\r\n        <Button variant='primary' onClick={() => setShowCurrencyModal(true)}>\r\n          <span>Imprimir</span>\r\n        </Button>\r\n      </div>\r\n      <div className='card-body'>\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            gap: '20%',\r\n          }}\r\n        >\r\n          <GroupSearch onSelect={setSelectedGroup} />\r\n\r\n          <input\r\n            ref={inputRef}\r\n            className='input-filter'\r\n            placeholder='Buscar...'\r\n            type='search'\r\n            onChange={(event) => {\r\n              onFilterDebounced(event.target.value, 'product');\r\n            }}\r\n          />\r\n        </div>\r\n        <PriceListTable data={filteredData.length > 0 ? filteredData : data} loading={loading} />\r\n      </div>\r\n      {showCurrencyModal && (\r\n        <CurrencyModal\r\n          show={showCurrencyModal}\r\n          onClose={() => setShowCurrencyModal(false)}\r\n          onSubmit={async (currency) => {\r\n            console.log('currency', currency);\r\n            const groups = await fetchProductsByGroup();\r\n            var div = document.createElement('div');\r\n\r\n            const doc = new jsPDF('p', 'pt', 'a4');\r\n            const pdfName = `LISTA-DE-PRECIOS-${DateTime.fromISO(new Date().toISOString())\r\n              .toLocaleString()\r\n              .replaceAll('/', '-')}.pdf`;\r\n            doc.setProperties({\r\n              title: pdfName,\r\n            });\r\n            doc.setFontSize(16);\r\n            doc.text('ALIMENTOS DM MARKET, C.A.', 300, 25, { align: 'center' });\r\n            doc.setFontSize(6);\r\n            doc.text(\r\n              'CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.',\r\n              300,\r\n              35,\r\n              { align: 'center' }\r\n            );\r\n            doc.setFontSize(8);\r\n            doc.text('R.I.F.: J-41270446-0', 300, 45, { align: 'center' });\r\n            doc.text('Teléfono:', 300, 55, { align: 'center' });\r\n\r\n            doc.setFontSize(9);\r\n            doc.text(`LISTA DE PRECIOS AL ${DateTime.fromISO(new Date().toISOString()).toLocaleString()}`, 300, 70, {\r\n              align: 'center',\r\n            });\r\n\r\n            Object.keys(groups).forEach((key) => {\r\n              let products = groups[key];\r\n\r\n              products = products.map((product) => {\r\n                if (currency === 'Bs') {\r\n                  console.log('yes currency is Bs');\r\n                  return {\r\n                    ...product,\r\n                    price: Number(product.price * currencyRate?.Cambio).toFixed(2),\r\n                  };\r\n                }\r\n\r\n                return product;\r\n              });\r\n\r\n              div.innerHTML = renderToStaticMarkup(<PriceListPDF data={products} group={key} currency={currency} />);\r\n              doc.autoTable({\r\n                html: div.firstChild,\r\n                styles: { cellPadding: 2 },\r\n                didParseCell: (data) => {\r\n                  if (data.section === 'body' && data.cell.raw && data.cell.raw.nodeName === 'TH') {\r\n                    data.cell.styles.fillColor = 'gray';\r\n                    data.cell.styles.color = 'white';\r\n                    data.cell.styles.cellWidth = 'wrap';\r\n                  }\r\n                },\r\n                margin: { top: 80 },\r\n              });\r\n              doc.addPage();\r\n            });\r\n            doc.save(pdfName);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupStock;\r\n","import { useState } from 'react';\r\nimport debounce from 'lodash.debounce';\r\n\r\nexport const useReportFilter = (data_to_filter, initial_state = []) => {\r\n  const [filteredData, setFilteredData] = useState(initial_state);\r\n\r\n  const onFilterDebounced = debounce((filterValue, filterKey, nestedKey) => {\r\n    if (nestedKey) {\r\n      nestedFilter(filterValue, filterKey, nestedKey);\r\n    } else {\r\n      filter(filterValue, filterKey);\r\n    }\r\n  }, 500);\r\n\r\n  const filter = (filterValue, filterKey) => {\r\n    const filtered = data_to_filter.filter((r) => r[filterKey].toLowerCase().includes(filterValue.toLowerCase()));\r\n    setFilteredData(filtered);\r\n    return filtered;\r\n  };\r\n\r\n  const nestedFilter = (filterValue, filterKey, nestedKey) => {\r\n    console.log('nestedKLey', nestedKey);\r\n    const filtered = data_to_filter[nestedKey].filter((r) => r[filterKey].toLowerCase().includes(filterValue.toLowerCase()));\r\n    setFilteredData({ ...filteredData, [nestedKey]: filtered });\r\n  };\r\n\r\n  return {\r\n    filter,\r\n    filteredData,\r\n    setFilteredData,\r\n    onFilterDebounced,\r\n  };\r\n};\r\n","import { useEffect, useState } from 'react';\nimport { ResponsivePie } from '@nivo/pie';\nimport { fetchCostPerGroup } from 'api/products';\n\nconst ProductCostPerGroupCard = () => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const fetch = async () => {\n      setLoading(true);\n      const response = await fetchCostPerGroup();\n      if (response && response.length) {\n        const chartData = response.reduce(\n          (acc, current) => [\n            ...acc,\n            {\n              id: current.group_name,\n              label: current.product,\n              value: current.total_cost,\n            },\n          ],\n          []\n        );\n        console.log(response, chartData);\n        setData(chartData);\n      }\n      setLoading(false);\n    };\n    fetch();\n  }, []);\n\n  return (\n    <div className='card'>\n      <div className='card-header'>\n        <h3>Inversión por categoría</h3>\n      </div>\n      <div className='card-body'>\n        {data.length > 0 && (\n          <ResponsivePie\n            data={data}\n            margin={{ top: 30, right: 20, bottom: 20, left: 20 }}\n            innerRadius={0.5}\n            padAngle={0.7}\n            cornerRadius={3}\n            valueFormat={(value) => value.toLocaleString()}\n            activeOuterRadiusOffset={8}\n            borderWidth={1}\n            arcLinkLabelsSkipAngle={10}\n            arcLinkLabelsTextColor='#333333'\n            arcLinkLabelsThickness={2}\n            arcLinkLabelsColor={{ from: 'color' }}\n            arcLabelsSkipAngle={10}\n            arcLabelsTextColor={{\n              from: 'color',\n              modifiers: [['darker', 2]],\n            }}\n          />\n        )}\n        {loading && (\n          <div className='position-absolute top-50 start-50 translate-middle'>\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCostPerGroupCard;\n","import Container from 'react-bootstrap/Container';\nimport CostFluctuationCard from 'components/Cards/CostFluctuation';\nimport GroupStock from 'components/Cards/GroupStock';\nimport ProductCostPerGroup from 'components/ProductCostPerGroup/Card';\n\nconst ProductosPage = () => {\n  return (\n    <Container fluid>\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\n        <div className='col-12 col-xl-4'>\n          <CostFluctuationCard />\n        </div>\n        <div className='col-12 col-xl-4'>\n          <GroupStock />\n        </div>\n        <div className='col-12 col-xl-4'>\n          <ProductCostPerGroup />\n        </div>\n      </div>\n    </Container>\n  );\n};\n\nexport default ProductosPage;\n","import { DateTime } from 'luxon';\n\nconst columns = [\n  {\n    Header: 'ID',\n    accessor: 'invoiceId',\n  },\n  {\n    Header: 'Cliente',\n    accessor: 'client',\n  },\n\n  {\n    Header: 'Rif',\n    accessor: 'rif',\n  },\n  {\n    Header: 'Fecha',\n    accessor: 'createdAt',\n    Cell: ({ value }) => {\n      return DateTime.fromISO(value, { setZone: true }).toFormat('F');\n    },\n  },\n\n  {\n    Header: 'Total',\n    accessor: 'invoiceTotal',\n    Cell: ({ value }) => {\n      return value ? '$' + value : '';\n    },\n    Footer: ({ data }) => {\n      const total = data.reduce((acc, current) => {\n        return acc + current.invoiceTotal;\n      }, 0);\n      return total ? '$' + Number(total).toLocaleString() : 0;\n    },\n  },\n\n  {\n    Header: 'Comisión',\n    accessor: 'commissionTotal',\n    Cell: ({ value }) => {\n      return value ? '$' + value : '';\n    },\n    Footer: ({ data }) => {\n      const total = data.reduce((acc, current) => {\n        return acc + current.commissionTotal;\n      }, 0);\n      return total ? '$' + Number(total).toLocaleString() : 0;\n    },\n  },\n];\n\nexport default columns;\n","import { useMemo } from 'react';\nimport Table from 'components/Table';\nimport columns from './columns';\n\nconst EmployeeSalesTable = ({ data, loading }) => {\n  const memoizedColumns = useMemo(() => columns, []);\n\n  return (\n    <>\n      <div className='card'>\n        <div className='card-header'>\n          <h2>Reporte de ventas</h2>\n        </div>\n        <div className='card-body'>\n          <Table data={data} columns={memoizedColumns} loading={loading} showFooter maxHeight={400} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EmployeeSalesTable;\n","const BASE_URL = '/api/employees';\n\nexport const getAllEmployees = async () => {\n  const response = await fetch(`${BASE_URL}`);\n  const employees = await response.json();\n  return employees;\n};\n\nexport const getComisionInfo = async (employeeId) => {\n  const response = await fetch(`${BASE_URL}/commissionInfo/${employeeId}`).catch((error) => ({ error }));\n  const commissionInfo = await response.json();\n  return commissionInfo;\n};\n\nexport const updateComisionInfo = async (employeeId, data) => {\n  const res = await fetch(`${BASE_URL}/commissionInfo/${employeeId}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ commissionInfo: data }),\n  }).catch((error) => ({ error }));\n\n  const response = await res.json();\n  return response;\n};\n\nexport const getEmployeeSales = async (employeeId, dateRange) => {\n  const response = await fetch(`${BASE_URL}/sales/${employeeId}?from=${dateRange.from}&to=${dateRange.to}`).catch(\n    (error) => ({ error })\n  );\n  const sales = await response.json();\n  return sales;\n};\n","import { getAllEmployees } from 'api/employees';\nimport SearchInput from 'components/SearchInput';\n\nconst EmployeeSearch = ({ onSelect }) => {\n  const loadEmployees = async (inputValue) => {\n    let employees = await getAllEmployees({ filter: inputValue });\n\n    if (employees && employees.length > 0) {\n      const records = employees.map((record) => {\n        const employee = {\n          key: record.id,\n          label: record.name,\n          value: record,\n        };\n        return employee;\n      });\n\n      return records;\n    }\n  };\n\n  const handleSelect = (option, { action }) => {\n    if (action === 'select-option') {\n      onSelect && onSelect(option.value, action);\n    } else if (action === 'clear') {\n      onSelect && onSelect(null, action);\n    }\n  };\n\n  return <SearchInput loadOptions={loadEmployees} placeholder='Buscar vendedor...' onSelect={handleSelect} />;\n};\n\nexport default EmployeeSearch;\n","import { useEffect, useState } from 'react';\nimport { Modal, Button, Alert, Spinner } from 'react-bootstrap';\nimport { getComisionInfo, updateComisionInfo } from 'api/employees';\n\nconst CommissionModal = ({ employee, show, onClose }) => {\n  const [commissionInfo, setCommissionInfo] = useState({ data: [], loading: false });\n  const [formData, setFormData] = useState({});\n  const [submissionState, setSubmissionState] = useState({\n    loading: false,\n    error: false,\n    message: '',\n  });\n\n  useEffect(() => {\n    setCommissionInfo({ ...commissionInfo, loading: true });\n    getComisionInfo(employee.id).then((data) => {\n      setCommissionInfo({ data, loading: false });\n    });\n  }, []);\n\n  const sanitizedFormData = () => {\n    const data = {};\n    Object.keys(formData).map((key) => {\n      if (formData[key]) {\n        data[key] = Number(formData[key]);\n      }\n    });\n    return data;\n  };\n\n  const submitForm = async (event) => {\n    event.preventDefault();\n    if (!submissionState.loading) {\n      setSubmissionState({ ...submissionState, loading: true, text: '' });\n      const response = await updateComisionInfo(employee.id, sanitizedFormData());\n      if (response.error) {\n        setSubmissionState({ error: true, text: response.error.message, loading: false });\n      } else if (response.success) {\n        setSubmissionState({ error: false, text: 'El recurso fue actualizado con éxito', loading: false });\n      }\n    }\n  };\n\n  const modalBody = () => {\n    if (commissionInfo.data.error) {\n      return <Alert variant='danger'>{commissionInfo.data.error.message}</Alert>;\n    } else if (commissionInfo.loading) {\n      return <Spinner animation='border' />;\n    } else {\n      return commissionInfo.data.map((info) => {\n        return (\n          <div key={info.groupId} className='d-flex flex-column col-sm-4'>\n            <label className='form-label'>{info.group}</label>\n            <div className='input-group mb-3'>\n              <span className='input-group-text' id='basic-addon1'>\n                %\n              </span>\n              <input\n                type='number'\n                min={0}\n                step={0.01}\n                className='form-control'\n                placeholder={info.commission || 0}\n                value={formData[info.groupId] || ''}\n                onChange={(e) => setFormData({ ...formData, [info.groupId]: e.target.value })}\n                onFocus={(e) => e.target.select()}\n              />\n            </div>\n          </div>\n        );\n      });\n    }\n  };\n\n  return (\n    <Modal show={show} size='lg' onHide={onClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>{employee.name}</Modal.Title>\n      </Modal.Header>\n      <form onSubmit={submitForm}>\n        <Modal.Body>\n          <div className='row justify-content-center'>{modalBody()}</div>\n        </Modal.Body>\n        <Modal.Footer className='px-0 pb-2'>\n          <div className='container-fluid d-flex justify-content-between align-items-center gap-5'>\n            <div className='col-9'>\n              {submissionState.text && (\n                <Alert variant={submissionState.error ? 'danger' : 'success'} className='mb-0 mt-0 p-1'>\n                  {submissionState.text}\n                </Alert>\n              )}\n            </div>\n            <div className='col-3 d-flex flex-wrap gap-2'>\n              <Button\n                type='submit'\n                variant='success'\n                disabled={Object.keys(formData).length === 0 || submissionState.loading}\n              >\n                Enviar\n              </Button>\n              <Button variant='danger' onClick={onClose}>\n                Cerrar\n              </Button>\n            </div>\n          </div>\n        </Modal.Footer>\n      </form>\n    </Modal>\n  );\n};\n\nexport default CommissionModal;\n","import { useState } from 'react';\nimport EmployeeSearch from 'employees/Search';\nimport { Button } from 'react-bootstrap';\nimport DatePicker from 'components/DatePicker';\nimport CommissionModal from 'employees/Modal/Commission';\nimport { getEmployeeSales } from 'api/employees';\n\nconst EmployeeActions = ({ onDateSubmit }) => {\n  const [employeeSalesLoading, setEmployeeSalesLoading] = useState(false);\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [showCommissionModal, setShowCommissionModal] = useState(false);\n\n  const submitDateHandler = (event, dateRange) => {\n    event.preventDefault();\n    if (selectedEmployee) {\n      setEmployeeSalesLoading(true);\n      getEmployeeSales(selectedEmployee.id, dateRange).then((response) => {\n        setEmployeeSalesLoading(false);\n        onDateSubmit(response);\n      });\n    }\n  };\n\n  return (\n    <>\n      <div className='col-12 mb-4'>\n        <div className='row justify-content-end'>\n          <div className='col-6 mb-2'>\n            <EmployeeSearch onSelect={setSelectedEmployee} />\n          </div>\n          <div className='col-4'>\n            <Button variant='primary' disabled={!selectedEmployee} onClick={() => setShowCommissionModal(true)}>\n              Asignar comisión\n            </Button>\n          </div>\n        </div>\n        <DatePicker onSubmit={submitDateHandler} loading={employeeSalesLoading} submitDisabled={!selectedEmployee} />\n      </div>\n      {showCommissionModal && (\n        <CommissionModal\n          show={showCommissionModal}\n          onClose={() => setShowCommissionModal(false)}\n          employee={selectedEmployee}\n        />\n      )}\n    </>\n  );\n};\n\nexport default EmployeeActions;\n","import { useState } from 'react';\nimport EmployeeSalesTable from 'employees/Table/Sales';\nimport EmployeeActions from 'employees/Actions';\n\nconst EmployeesPage = () => {\n  const [employeeSales, setEmployeeSales] = useState([]);\n\n  const onSubmit = (sales) => {\n    setEmployeeSales(sales);\n  };\n\n  return (\n    <>\n      <div className='row justify-content-center'>\n        <div className='col-sm-12 col-xl-8'>\n          <EmployeeActions onDateSubmit={onSubmit} />\n          <EmployeeSalesTable data={employeeSales} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EmployeesPage;\n","const BASE_URL = '/api/currency_rates';\n\nexport const fetchCurrencyRates = async () => {\n  const response = await fetch(`${BASE_URL}`);\n  const data = await response.json();\n\n  return { status: response.status, data };\n};\n","import { useEffect, useContext } from 'react';\n\nimport { CurrencyRateContext } from './context/currency_rate';\n\nimport Navbar from 'react-bootstrap/Navbar';\nimport Container from 'react-bootstrap/Container';\nimport Nav from 'react-bootstrap/Nav';\n\nimport InvoicesPage from 'pages/invoices';\nimport VentasPage from 'pages/ventas';\nimport ClientesPage from 'pages/clientes';\nimport ProductosPage from 'pages/productos';\nimport EmployeesPage from 'pages/employees';\n\nimport { Link, Switch, Route, useLocation } from 'react-router-dom';\nimport { fetchCurrencyRates } from './api/currency_rates';\n\nfunction App() {\n  const location = useLocation();\n\n  const { currencyRate, setCurrencyRate } = useContext(CurrencyRateContext);\n\n  useEffect(() => {\n    fetchCurrencyRates().then((response) => {\n      if (response.status === 200) {\n        setCurrencyRate(response.data.find((currency) => currency.Simbolo === 'BsS'));\n      }\n    });\n  }, []);\n\n  return (\n    <div className='App bg-dark'>\n      <Container fluid id='main' className='m-0 p-0 vh-100'>\n        <Navbar bg='dark' variant='dark' className='border-bottom' expand='lg'>\n          <Container fluid>\n            <Navbar.Brand>SISTEMA DE REPORTES</Navbar.Brand>\n\n            <Navbar.Toggle aria-controls='basic-navbar-nav' />\n            <Navbar.Collapse id='basic-navbar-nav'>\n              <Container fluid className='d-flex justify-content-between align-items-center'>\n                <Nav className='me-auto'>\n                  {['facturas', 'ventas', 'clientes', 'productos', 'vendedores'].map((route, index) => {\n                    return (\n                      <Link\n                        key={index}\n                        to={`/${route}`}\n                        className={`text-decoration-none mx-1 text-secondary nav-link ${\n                          (location.pathname.includes(route) && 'active') || ''\n                        }`}\n                      >\n                        <span style={{ textTransform: 'capitalize' }}>{route}</span>\n                      </Link>\n                    );\n                  })}\n                </Nav>\n                <div className='text-light'>\n                  <span>\n                    REF: <span className='fw-bold text-info'>{currencyRate?.Cambio}</span> {currencyRate?.Simbolo}\n                  </span>\n                </div>\n              </Container>\n            </Navbar.Collapse>\n          </Container>\n        </Navbar>\n\n        <Container fluid className='py-3'>\n          <Switch>\n            <Route path='/facturas' component={InvoicesPage} />\n            <Route path='/ventas' component={VentasPage} />\n            <Route path='/clientes' component={ClientesPage} />\n            <Route path='/productos' component={ProductosPage} />\n            <Route path='/vendedores' component={EmployeesPage} />\n          </Switch>\n        </Container>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport { CurrencyRateProvider } from './context/currency_rate';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <CurrencyRateProvider>\n        <App />\n      </CurrencyRateProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}