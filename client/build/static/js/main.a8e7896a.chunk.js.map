{"version":3,"sources":["components/Table/index.js","components/SaleReportTable/columns.js","components/SaleReportTable/index.js","components/Cards/SaleReport/index.js","components/Cards/GroupSales/index.js","components/DatePicker/index.js","api/invoice/index.js","pages/ventas/index.js","components/ClientReportTable/columns.js","components/ClientReportTable/index.js","components/Cards/ClientReport/index.js","components/SearchInput/index.js","api/products/index.js","components/ProductSearch/index.js","components/ClientPerProduct/Table/columns.js","components/ClientPerProduct/Table/index.js","api/clients/index.js","components/ClientPerProduct/Card/index.js","components/ClientSearch/index.js","components/MonthlyAverageClient/Card/index.js","pages/clientes/index.js","components/Cards/CostFluctuation/index.js","api/groups/index.js","components/GroupSearch/index.js","components/PriceListTable/columns.js","components/PriceListTable/index.js","components/PDF/PriceList/index.js","components/Cards/GroupStock/index.js","hooks/useReportFilter.js","components/ProductCostPerGroup/Card/index.js","pages/productos/index.js","employees/Table/Sales/columns.js","employees/Table/Sales/EmployeesSalesTable.js","api/employees/index.js","employees/Search/EmployeeSearch.js","employees/Modal/Commission/CommissionModal.js","employees/Actions/index.js","pages/employees/index.js","App.js","index.js"],"names":["Table","data","loading","columns","filterPlaceholder","onFilter","maxHeight","showFooter","onRowSelect","useTable","useRowSelect","getTableProps","getTableBodyProps","headerGroups","footerGroups","rows","prepareRow","onFilterDebounced","selectedFlatRows","debounce","value","MemoizedRow","React","memo","row","getRowProps","onClick","toggleRowSelected","isSelected","original","getToggleRowSelectedProps","cells","map","cell","index","title","getCellProps","style","background","color","render","className","onChange","event","target","placeholder","autoFocus","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","length","group","getFooterGroupProps","getFooterProps","role","Header","accessor","Footer","total","reduce","acc","current","quantity","Number","toFixed","Cell","toLocaleString","rawProfit","netProfit","SaleReportTable","memoizedColumns","useMemo","SaleReportCard","useState","sorting","setSorting","sortedData","setSortedData","useEffect","sorted","sort","a","b","marginRight","type","GroupSales","chartData","margin","top","right","bottom","left","innerRadius","padAngle","cornerRadius","activeOuterRadiusOffset","arcLabel","e","borderWidth","arcLinkLabelsSkipAngle","arcLinkLabelsTextColor","arcLinkLabelsThickness","arcLinkLabelsColor","from","arcLabelsSkipAngle","arcLabelsTextColor","modifiers","tooltip","datum","label","DatePicker","onSubmit","submitDisabled","DateTime","now","toISODate","to","dateRange","setDateRange","Button","variant","disabled","fetchInvoiceReport","fetch","response","json","report","console","log","VentasPage","filtered_invoices_report","invoices_report","group_sales_chart","setData","setLoading","searchTerm","filteredData","filter","f","product","toLowerCase","includes","preventDefault","group_sales_chart_data","id","categoria","sales_report","Container","fluid","SaleReport","ClientReportTable","ClientReportCard","SearchInput","loadOptions","defaultOptions","cacheOptions","onSelect","inputValue","callback","loadingMessage","isClearable","BASE_URL","fetchProducts","filterParam","products","fetchCostFluctuation","productId","fetchCostPerGroup","fetchProductsByGroup","fetchProductPriceList","groupId","ProductSearch","loadProductVariants","records","record","product_name","Descripcion","key","option","action","ClientPerProductTable","fetchClients","clients","fetchBestClients","fetchBestClientsPerProduct","fetchMonthlyAverage","clientId","ClientPerProductCard","selectedProduct","setSelectedProduct","IdProducto","then","display","flexDirection","gap","fromISO","flex","justifyContent","width","ClientSearch","loadClients","IdCliente","name","MonthlyAverageClient","selectedClient","setSelectedClient","xScale","yScale","min","max","stacked","reverse","axisTop","axisRight","pointSize","pointColor","theme","pointBorderWidth","pointBorderColor","pointLabelYOffset","useMesh","ClientesPage","filtered_best_clients","best_clients","client","ClientReport","CostFluctuation","fetch_product_report","report_data","axisLeft","legend","legendPosition","legendOffset","axisBottom","fetchGroups","groups","GroupSearch","loadGroups","PriceListTable","PriceListPDF","stock","price","doc","jsPDF","pdfName","Date","toISOString","replaceAll","setProperties","GroupStock","selectedGroup","setSelectedGroup","data_to_filter","initial_state","setFilteredData","filterValue","filterKey","nestedKey","nestedFilter","filtered","r","useReportFilter","inputRef","useRef","printPDF","setPrintPDF","fetch_stock_by_group","fetch_product_data","div","document","createElement","setFontSize","text","align","Object","keys","forEach","innerHTML","renderToStaticMarkup","PriceList","autoTable","html","firstChild","styles","cellPadding","didParseCell","section","raw","nodeName","fillColor","cellWidth","addPage","save","ref","ProductCostPerGroupCard","group_name","total_cost","valueFormat","ProductosPage","setZone","toFormat","invoiceTotal","commissionTotal","EmployeeSalesTable","getAllEmployees","employees","getComisionInfo","employeeId","catch","error","commissionInfo","updateComisionInfo","method","body","JSON","stringify","res","getEmployeeSales","sales","EmployeeSearch","loadEmployees","CommissionModal","employee","show","onClose","setCommissionInfo","formData","setFormData","message","submissionState","setSubmissionState","sanitizedFormData","submitForm","success","Modal","size","onHide","closeButton","Title","Body","Alert","Spinner","animation","info","step","commission","onFocus","select","EmployeeActions","onDateSubmit","setEmployeeSales","employeeSalesLoading","setEmployeeSalesLoading","selectedEmployee","setSelectedEmployee","showCommissionModal","setShowCommissionModal","EmployeesPage","employeeSales","App","location","useLocation","Navbar","bg","expand","Brand","Toggle","Collapse","Nav","route","pathname","textTransform","path","component","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a8e7896a.chunk.js","sourcesContent":["import React from 'react';\r\nimport { useTable, useRowSelect } from 'react-table';\r\n\r\nimport debounce from 'lodash.debounce';\r\n\r\nconst Table = ({\r\n  data = [],\r\n  loading,\r\n  columns = [],\r\n  filterPlaceholder,\r\n  onFilter,\r\n  maxHeight = 350,\r\n  showFooter = false,\r\n  onRowSelect,\r\n}) => {\r\n  const { getTableProps, getTableBodyProps, headerGroups, footerGroups, rows, prepareRow, selectedFlatRows } = useTable(\r\n    {\r\n      columns,\r\n      data,\r\n    },\r\n    useRowSelect\r\n  );\r\n\r\n  const onFilterDebounced = debounce((value) => {\r\n    onFilter(value);\r\n  }, 500);\r\n\r\n  const MemoizedRow = React.memo(\r\n    ({ row }) => {\r\n      return (\r\n        <tr\r\n          {...row.getRowProps({\r\n            onClick: onRowSelect\r\n              ? () => {\r\n                  row.toggleRowSelected();\r\n                  onRowSelect(!row.isSelected ? row.original : null);\r\n                }\r\n              : null,\r\n          })}\r\n          {...row.getToggleRowSelectedProps({})}\r\n        >\r\n          {row.cells.map((cell, index) => {\r\n            return (\r\n              <td\r\n                title={cell.value}\r\n                {...cell.getCellProps()}\r\n                style={{\r\n                  background: row.isSelected ? 'lightblue' : 'white',\r\n                  color: row.isSelected ? 'white' : 'black',\r\n                }}\r\n              >\r\n                {cell.render('Cell')}\r\n              </td>\r\n            );\r\n          })}\r\n        </tr>\r\n      );\r\n    },\r\n    [data]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {onFilter && (\r\n        <div className='table-filter-container'>\r\n          <input\r\n            className='table-filter-input'\r\n            onChange={(event) => onFilterDebounced(event.target.value)}\r\n            placeholder={filterPlaceholder}\r\n            autoFocus\r\n          />\r\n        </div>\r\n      )}\r\n      <div className='table-container' style={{ maxHeight }}>\r\n        <table {...getTableProps()}>\r\n          <thead>\r\n            {headerGroups.map((headerGroup) => (\r\n              <tr {...headerGroup.getHeaderGroupProps()}>\r\n                {headerGroup.headers.map((column) => (\r\n                  <th {...column.getHeaderProps()}>{column.render('Header')}</th>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </thead>\r\n          <tbody {...getTableBodyProps()}>\r\n            {rows.map((row) => {\r\n              prepareRow(row);\r\n              return <MemoizedRow row={row} />;\r\n            })}\r\n          </tbody>\r\n          {showFooter && data.length > 0 && (\r\n            <tfoot>\r\n              {footerGroups.map((group) => (\r\n                <tr {...group.getFooterGroupProps()}>\r\n                  {group.headers.map((column) => (\r\n                    <td {...column.getFooterProps()}>{column.render('Footer')}</td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tfoot>\r\n          )}\r\n        </table>\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","const columns = [\r\n  {\r\n    Header: \"Producto\",\r\n    accessor: \"product\",\r\n  },\r\n  {\r\n    Header: \"Cantidad\",\r\n    accessor: \"quantity\",\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.quantity;\r\n      }, 0);\r\n      return Number(total).toFixed(2);\r\n    },\r\n  },\r\n  {\r\n    Header: \"Bruto\",\r\n    accessor: \"rawProfit\",\r\n    Cell: ({ value }) => {\r\n      return value ? \"$\" + value.toLocaleString() : \"\";\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.rawProfit;\r\n      }, 0);\r\n      return \"$\" + Number(total.toFixed(2)).toLocaleString();\r\n    },\r\n  },\r\n  {\r\n    Header: \"Utilidad\",\r\n    accessor: \"netProfit\",\r\n    Cell: ({ value }) => {\r\n      return value ? \"$\" + value.toLocaleString() : \"\";\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.netProfit;\r\n      }, 0);\r\n      return \"$\" + Number(total.toFixed(2)).toLocaleString();\r\n    },\r\n  },\r\n  {\r\n    Header: \"Promedio\",\r\n    accessor: \"averageProfitPercent\",\r\n    Cell: ({ value }) => {\r\n      return value + \"%\";\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst SaleReportTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} showFooter loading={loading} />;\r\n};\r\n\r\nexport default SaleReportTable;\r\n","import { useEffect, useState } from 'react';\r\nimport SaleReportTable from 'components/SaleReportTable';\r\n\r\nconst SaleReportCard = ({ data = [], onFilter, loading }) => {\r\n  const [sorting, setSorting] = useState('rawProfit');\r\n  const [sortedData, setSortedData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const sorted = data.sort((a, b) => {\r\n      return b[sorting] - a[sorting];\r\n    });\r\n    setSortedData([...sorted]);\r\n  }, [sorting, data]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Ventas</h3>\r\n        <div>\r\n          <label style={{ marginRight: '5px' }}>Ordenar:</label>\r\n          <select onChange={(event) => setSorting(event.target.value)} value={sorting}>\r\n            <option value='quantity'>Cantidad</option>\r\n            <option value='rawProfit'>Bruto</option>\r\n            <option value='netProfit'>Utilidad</option>\r\n            <option value='averageProfitPercent'>Promedio</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className='card-body'>\r\n        <input\r\n          className='input-filter'\r\n          placeholder='Buscar...'\r\n          type='search'\r\n          onChange={(event) => onFilter(event.target.value)}\r\n        />\r\n          <SaleReportTable data={sortedData} loading={loading} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SaleReportCard;\r\n","import { ResponsivePie } from '@nivo/pie';\r\n\r\nconst GroupSales = ({ chartData = [], loading }) => {\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Gráfico de categorías</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        {chartData.length > 0 && (\r\n          <ResponsivePie\r\n            data={chartData}\r\n            margin={{ top: 30, right: 20, bottom: 20, left: 20 }}\r\n            innerRadius={0.5}\r\n            padAngle={0.7}\r\n            cornerRadius={3}\r\n            activeOuterRadiusOffset={8}\r\n            arcLabel={function (e) {\r\n              return `${e.value} (${e.data.netProfit})`;\r\n            }}\r\n            borderWidth={1}\r\n            arcLinkLabelsSkipAngle={10}\r\n            arcLinkLabelsTextColor='#333333'\r\n            arcLinkLabelsThickness={2}\r\n            arcLinkLabelsColor={{ from: 'color' }}\r\n            arcLabelsSkipAngle={10}\r\n            arcLabelsTextColor={{\r\n              from: 'color',\r\n              modifiers: [['darker', 2]],\r\n            }}\r\n            tooltip={({ datum }) => {\r\n              return (\r\n                <div className='tooltip-container'>\r\n                  <span className='small-square' style={{ background: datum.color }}></span>\r\n                  <strong>{datum.label}</strong>\r\n                  <label>Bruto: </label>\r\n                  <span>${Number(datum.value).toLocaleString()}</span>\r\n                  <label>Utilidad: </label>\r\n                  <span>${Number(datum.data.netProfit).toLocaleString()}</span>\r\n                </div>\r\n              );\r\n            }}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupSales;\r\n","import { useState } from 'react';\r\nimport { DateTime } from 'luxon';\r\nimport { Button } from 'react-bootstrap';\r\n\r\nconst DatePicker = ({ onSubmit, loading, submitDisabled }) => {\r\n  const [dateRange, setDateRange] = useState({\r\n    from: DateTime.now().toISODate(),\r\n    to: DateTime.now().toISODate(),\r\n  });\r\n\r\n  return (\r\n    <div className='d-flex flex-column flex-sm-row justify-content-center mb-3 gap-2'>\r\n      <div className='d-flex flex-row justify-content-center align-items-center gap-2 text-light'>\r\n        <label className='d-none d-sm-flex'>Desde:</label>\r\n        <input\r\n          type='date'\r\n          value={dateRange.from}\r\n          onChange={(event) => setDateRange({ ...dateRange, from: event.target.value })}\r\n        />\r\n        <label className='d-none d-sm-flex'>Hasta:</label>\r\n        <input\r\n          type='date'\r\n          value={dateRange.to}\r\n          onChange={(event) => setDateRange({ ...dateRange, to: event.target.value })}\r\n        />\r\n      </div>\r\n      <Button\r\n        variant='primary'\r\n        onClick={(event) => onSubmit(event, dateRange)}\r\n        disabled={loading}\r\n        disabled={submitDisabled}\r\n      >\r\n        {loading && (\r\n          <div>\r\n            <span className='spinner-border spinner-border-sm' role='status' aria-hidden='true'></span>\r\n            <span className='visually-hidden'>Loading...</span>\r\n          </div>\r\n        )}\r\n        {!loading && <span className='mr-2'>Enviar</span>}\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DatePicker;\r\n","const BASE_URL = \"/api/invoices\";\r\n\r\nexport const fetchInvoiceReport = async ({ from, to }) => {\r\n  const response = await fetch(`${BASE_URL}/sales?from=${from}&to=${to}`);\r\n  const report = await response.json();\r\n  console.log(\"From fetchInvoiceReport: \", report);\r\n  return report;\r\n};\r\n","import { useState } from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport SaleReportCard from 'components/Cards/SaleReport';\r\nimport GroupSales from 'components/Cards/GroupSales';\r\nimport DatePicker from 'components/DatePicker';\r\nimport { fetchInvoiceReport } from 'api/invoice';\r\nimport debounce from 'lodash.debounce';\r\n\r\nconst VentasPage = () => {\r\n  const [data, setData] = useState({\r\n    filtered_invoices_report: [],\r\n    invoices_report: [],\r\n    group_sales_chart: [],\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onFilter = debounce((searchTerm) => {\r\n    const filteredData = data.invoices_report.filter((f) => f.product.toLowerCase().includes(searchTerm.toLowerCase()));\r\n    setData({ ...data, filtered_invoices_report: filteredData });\r\n  }, 500);\r\n\r\n  const onSubmit = async (event, dateRange) => {\r\n    event.preventDefault();\r\n\r\n    setLoading(true);\r\n    const response = await fetchInvoiceReport(dateRange);\r\n    const chartData = response.group_sales_chart_data.reduce(\r\n      (acc, current) => [\r\n        ...acc,\r\n        {\r\n          id: current.categoria,\r\n          label: current.categoria,\r\n          value: current.rawProfit,\r\n          netProfit: current.netProfit,\r\n        },\r\n      ],\r\n      []\r\n    );\r\n    setData({ ...data, invoices_report: response.sales_report, group_sales_chart: chartData });\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <DatePicker onSubmit={onSubmit} loading={loading} />\r\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\r\n        <div className='col-12 col-xl-6'>\r\n          <SaleReportCard\r\n            data={data.filtered_invoices_report.length > 0 ? data.filtered_invoices_report : data.invoices_report}\r\n            onFilter={onFilter}\r\n            loading={loading}\r\n          />\r\n        </div>\r\n        <div className='col-12 col-xl-6'>\r\n          <GroupSales chartData={data.group_sales_chart} loading={loading} />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default VentasPage;\r\n","const columns = [\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'total_USD',\r\n    Cell: ({ value }) => {\r\n      return '$' + value.toLocaleString();\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst ClientReportTable = ({ data }) => {\r\n    const memoizedColumns = useMemo(() => columns, []);\r\n\r\n    return <Table data={data} columns={memoizedColumns} />;\r\n};\r\n\r\nexport default ClientReportTable;\r\n","import ClientReportTable from 'components/ClientReportTable';\r\n\r\nconst ClientReportCard = ({ data = [], onFilter }) => {\r\n    return (\r\n        <div className='card'>\r\n            <div className='card-header'>\r\n                <h3>Mejores clientes</h3>\r\n            </div>\r\n            <div className='card-body'>\r\n                {data.length > 0 && (\r\n                    <>\r\n                        <input\r\n                            className='input-filter'\r\n                            placeholder='Buscar...'\r\n                            type='search'\r\n                            onChange={(event) => onFilter(event.target.value, 'client', 'client_report')}\r\n                        />\r\n                        <ClientReportTable data={data} />\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ClientReportCard;\r\n","import AsyncSelect from 'react-select/async';\r\nimport debounce from 'debounce-promise';\r\n\r\nconst SearchInput = ({ placeholder, loadOptions, defaultOptions = true, cacheOptions = true, onSelect }) => {\r\n  return (\r\n    <AsyncSelect\r\n      loadOptions={debounce((inputValue, callback) => loadOptions(inputValue, callback), 700)}\r\n      cacheOptions={cacheOptions}\r\n      defaultOptions={defaultOptions}\r\n      placeholder={placeholder}\r\n      onChange={onSelect ? onSelect : null}\r\n      loadingMessage={() => {\r\n        return 'Cargando...';\r\n      }}\r\n      isClearable\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchInput;\r\n","const BASE_URL = \"/api/products\";\r\nconst REPORTS_BASE_URL = \"/api/reports/products\";\r\n\r\nexport const fetchProducts = async ({ filter }) => {\r\n  const filterParam = filter ? `?filter=${filter}` : \"\";\r\n  const response = await fetch(BASE_URL + filterParam);\r\n  const products = await response.json();\r\n  return products;\r\n};\r\n\r\nexport const fetchCostFluctuation = async (productId) => {\r\n  const response = await fetch(`${BASE_URL}/cost-fluctuation/${productId}`);\r\n  const report = await response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchCostPerGroup = async () => {\r\n  const response = await fetch(`${BASE_URL}/cost/group`);\r\n  const report = await response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchProductsByGroup = async () => {\r\n  const response = await fetch(`${BASE_URL}/group`);\r\n  const products = await response.json();\r\n  return products;\r\n};\r\n\r\nexport const fetchProductPriceList = async (groupId) => {\r\n  const response = await fetch(`${BASE_URL}/price-list/${groupId}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchProductReports = async (productId) => {\r\n  const response = await fetch(`${REPORTS_BASE_URL}/cost-fluctuation/${productId}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchBestClients = async (productId, dateRange) => {\r\n  const response = await fetch(\r\n    `${REPORTS_BASE_URL}/best-clients/${productId}?from=${dateRange.from}&to=${dateRange.to}`\r\n  );\r\n  const report = response.json();\r\n  return report;\r\n};\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchProducts } from 'api/products';\r\n\r\nconst ProductSearch = ({ onSelect }) => {\r\n    const loadProductVariants = async (inputValue) => {\r\n        let products = await fetchProducts({ filter: inputValue });\r\n\r\n        if (products && products.length > 0) {\r\n            const records = products.map((record) => {\r\n                let product_name = record.Descripcion;\r\n\r\n                const product = {\r\n                    key: record.id,\r\n                    label: product_name,\r\n                    value: record,\r\n                };\r\n                return product;\r\n            });\r\n\r\n            return records;\r\n        }\r\n    };\r\n\r\n    const handleSelect = (option, { action }) => {\r\n        if (action === 'select-option') {\r\n            onSelect(option.value, action);\r\n        } else if (action === 'clear') {\r\n            onSelect(null, action);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SearchInput\r\n            loadOptions={loadProductVariants}\r\n            defaultOptions={false}\r\n            placeholder='Buscar producto...'\r\n            onSelect={handleSelect}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ProductSearch;\r\n","const columns = [\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n  {\r\n    Header: 'Cantidad',\r\n    accessor: 'quantity_total',\r\n  },\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'total_USD',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value.toLocaleString() : '';\r\n    },\r\n  },\r\n  {\r\n    Header: 'Utilidad',\r\n    accessor: 'utilidad',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value.toLocaleString() : 0;\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst ClientPerProductTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} loading={loading} />;\r\n};\r\n\r\nexport default ClientPerProductTable;\r\n","const BASE_URL = '/api/clients';\r\n\r\nexport const fetchClients = async ({ filter }) => {\r\n  const filterParam = filter ? `?filter=${filter}` : '';\r\n  const response = await fetch(`${BASE_URL}${filterParam}`);\r\n  const clients = response.json();\r\n  return clients;\r\n};\r\nexport const fetchBestClients = async (dateRange) => {\r\n  const response = await fetch(`${BASE_URL}/best/?from=${dateRange.from}&to=${dateRange.to}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchBestClientsPerProduct = async (productId, dateRange) => {\r\n  const response = await fetch(`${BASE_URL}/best/product/${productId}?from=${dateRange.from}&to=${dateRange.to}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchMonthlyAverage = async (clientId) => {\r\n  const response = await fetch(`${BASE_URL}/average/month/${clientId}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport ProductSearch from 'components/ProductSearch';\r\nimport ClientPerProductTable from 'components/ClientPerProduct/Table';\r\nimport { fetchBestClientsPerProduct } from 'api/clients';\r\nimport { DateTime } from 'luxon';\r\n\r\nconst ClientPerProductCard = ({ dateRange }) => {\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedProduct && dateRange.from && dateRange.to) {\r\n      setLoading(true);\r\n      fetchBestClientsPerProduct(selectedProduct.IdProducto, dateRange).then((response) => {\r\n        setData([...response]);\r\n        setLoading(false);\r\n      });\r\n    } else if (!selectedProduct) {\r\n      setData([]);\r\n    }\r\n  }, [selectedProduct, dateRange]);\r\n  console.log(data);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Cliente por producto</h3>\r\n        <div style={{ display: 'flex', flexDirection: 'row', gap: '5px' }}>\r\n          <small>Desde: </small>\r\n          <small>{DateTime.fromISO(dateRange.from).toLocaleString()} </small>\r\n          <small>Hasta: </small>\r\n          <small>{DateTime.fromISO(dateRange.to).toLocaleString()} </small>\r\n        </div>\r\n      </div>\r\n      <div className='card-body'>\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            flex: '1',\r\n            justifyContent: 'space-between',\r\n          }}\r\n        >\r\n          <div style={{ width: '100%' }}>\r\n            <ProductSearch onSelect={setSelectedProduct} />\r\n          </div>\r\n        </div>\r\n        <ClientPerProductTable data={data} loading={loading} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientPerProductCard;\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchClients } from 'api/clients';\r\n\r\nconst ClientSearch = ({ onSelect }) => {\r\n    const loadClients = async (inputValue) => {\r\n        let clients = await fetchClients({ filter: inputValue });\r\n\r\n        if (clients && clients.length > 0) {\r\n            const records = clients.map((record) => {\r\n                const client = {\r\n                    key: record.IdCliente,\r\n                    label: record.name,\r\n                    value: record,\r\n                };\r\n                return client;\r\n            });\r\n\r\n            return records;\r\n        }\r\n    };\r\n\r\n    const handleSelect = (option, { action }) => {\r\n        if (action === 'select-option') {\r\n            onSelect && onSelect(option.value, action);\r\n        } else if (action === 'clear') {\r\n            onSelect && onSelect(null, action);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SearchInput\r\n            loadOptions={loadClients}\r\n            defaultOptions={false}\r\n            placeholder='Buscar cliente...'\r\n            onSelect={handleSelect}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ClientSearch;\r\n","import { useState, useEffect } from 'react';\r\nimport { fetchMonthlyAverage } from 'api/clients';\r\nimport ClientSearch from 'components/ClientSearch';\r\nimport { ResponsiveLine } from '@nivo/line';\r\n\r\nconst MonthlyAverageClient = () => {\r\n  const [selectedClient, setSelectedClient] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedClient) {\r\n      setLoading(true);\r\n      fetchMonthlyAverage(selectedClient.IdCliente).then((response) => {\r\n        setData([response]);\r\n        setLoading(false);\r\n      });\r\n    } else {\r\n      setData([]);\r\n    }\r\n  }, [selectedClient]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Promedio mensual</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        <ClientSearch onSelect={setSelectedClient} />\r\n        {data && (\r\n          <ResponsiveLine\r\n            data={data}\r\n            margin={{ top: 20, right: 30, bottom: 80, left: 40 }}\r\n            xScale={{ type: 'point' }}\r\n            yScale={{\r\n              type: 'linear',\r\n              min: 'auto',\r\n              max: 'auto',\r\n              stacked: true,\r\n              reverse: false,\r\n            }}\r\n            axisTop={null}\r\n            axisRight={null}\r\n            pointSize={10}\r\n            pointColor={{ theme: 'background' }}\r\n            pointBorderWidth={2}\r\n            pointBorderColor={{ from: 'serieColor' }}\r\n            pointLabelYOffset={-12}\r\n            useMesh={true}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MonthlyAverageClient;\r\n","import { useState } from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport ClientReportCard from 'components/Cards/ClientReport';\r\nimport ClientPerProductCard from 'components/ClientPerProduct/Card';\r\nimport MonthlyAverageClientCard from 'components/MonthlyAverageClient/Card';\r\nimport DatePicker from 'components/DatePicker';\r\nimport { fetchBestClients } from 'api/clients';\r\nimport { DateTime } from 'luxon';\r\nimport debounce from 'lodash.debounce';\r\n\r\nconst ClientesPage = () => {\r\n  const [data, setData] = useState({\r\n    filtered_best_clients: [],\r\n    best_clients: [],\r\n    group_sales_chart: [],\r\n  });\r\n  const [dateRange, setDateRange] = useState({\r\n    from: DateTime.now().toISODate(),\r\n    to: DateTime.now().toISODate(),\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onFilter = debounce((searchTerm) => {\r\n    const filteredData = data.best_clients.filter((f) => f.client.toLowerCase().includes(searchTerm.toLowerCase()));\r\n    setData({ ...data, filtered_best_clients: filteredData });\r\n  }, 500);\r\n\r\n  const onSubmit = async (event, dateRange) => {\r\n    event.preventDefault();\r\n\r\n    setLoading(true);\r\n    const response = await fetchBestClients(dateRange);\r\n    setDateRange(dateRange);\r\n    setData({ ...data, best_clients: response });\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <DatePicker onSubmit={onSubmit} loading={loading} />\r\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\r\n        <div className='col-12 col-xl-4'>\r\n          <ClientReportCard\r\n            data={data.filtered_best_clients.length > 0 ? data.filtered_best_clients : data.best_clients}\r\n            onFilter={onFilter}\r\n          />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <ClientPerProductCard dateRange={dateRange} />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <MonthlyAverageClientCard />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ClientesPage;\r\n","import { useState, useEffect } from 'react';\r\nimport ProductSearch from 'components/ProductSearch';\r\nimport { ResponsiveLine } from '@nivo/line';\r\nimport { fetchCostFluctuation } from 'api/products';\r\n\r\nconst CostFluctuation = () => {\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedProduct) {\r\n      const fetch_product_report = async () => {\r\n        setLoading(true);\r\n        const report_data = await fetchCostFluctuation(selectedProduct.IdProducto);\r\n        setData([report_data]);\r\n        setLoading(false);\r\n      };\r\n\r\n      fetch_product_report();\r\n    } else if (!selectedProduct) {\r\n      setData([]);\r\n    }\r\n  }, [selectedProduct]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Promedio mensual costo</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        <ProductSearch onSelect={setSelectedProduct} />\r\n        <ResponsiveLine\r\n          data={data}\r\n          margin={{ top: 20, right: 30, bottom: 80, left: 40 }}\r\n          xScale={{ type: 'point' }}\r\n          yScale={{\r\n            type: 'linear',\r\n            min: 'auto',\r\n            max: 'auto',\r\n            stacked: true,\r\n            reverse: false,\r\n          }}\r\n          axisTop={null}\r\n          axisRight={null}\r\n          axisLeft={{\r\n            legend: 'Precio',\r\n            legendPosition: 'middle',\r\n            legendOffset: -30,\r\n          }}\r\n          axisBottom={{\r\n            legend: 'Meses',\r\n            legendPosition: 'middle',\r\n            legendOffset: 30,\r\n          }}\r\n          pointSize={10}\r\n          pointColor={{ theme: 'background' }}\r\n          pointBorderWidth={2}\r\n          pointBorderColor={{ from: 'serieColor' }}\r\n          pointLabelYOffset={-12}\r\n          useMesh={true}\r\n        />\r\n      </div>\r\n      {loading && (\r\n        <div className='position-absolute top-50 start-50 translate-middle'>\r\n          <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CostFluctuation;\r\n","const BASE_URL = \"/api/groups\";\r\n\r\nexport const fetchGroups = async ({ filter }) => {\r\n  const filterParam = filter ? `?filter=${filter}` : \"\";\r\n  const response = await fetch(BASE_URL + filterParam);\r\n  const groups = await response.json();\r\n  return groups;\r\n};\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchGroups } from 'api/groups';\r\n\r\nconst GroupSearch = ({ onSelect }) => {\r\n    const loadGroups = async (inputValue) => {\r\n        let groups = await fetchGroups({ filter: inputValue });\r\n\r\n        if (groups && groups.length > 0) {\r\n            const records = groups.map((record) => {\r\n                const group = {\r\n                    key: record.groupId,\r\n                    label: record.name,\r\n                    value: record,\r\n                };\r\n                return group;\r\n            });\r\n\r\n            return records;\r\n        }\r\n    };\r\n\r\n    const handleSelect = (option, { action }) => {\r\n        if (action === 'select-option') {\r\n            onSelect(option.value, action);\r\n        } else if (action === 'clear') {\r\n            onSelect(null, action);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ width: '100%' }}>\r\n            <SearchInput loadOptions={loadGroups} placeholder='Buscar categoría...' onSelect={handleSelect} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GroupSearch;\r\n","const columns = [\r\n  {\r\n    Header: 'Producto',\r\n    accessor: 'product',\r\n  },\r\n  {\r\n    Header: 'Precio',\r\n    accessor: 'price',\r\n  },\r\n  {\r\n    Header: 'Inventario',\r\n    accessor: 'stock',\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst PriceListTable = ({ data }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} />;\r\n};\r\n\r\nexport default PriceListTable;\r\n","const PriceListPDF = ({ data = [], group = '' }) => {\r\n  return (\r\n    <table id='price-list-table'>\r\n      <thead>\r\n        <tr>\r\n          <th>Categoría</th>\r\n          <th>Producto</th>\r\n          <th>Precio (USD)</th>\r\n          <th>DISPONIBLE</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {data.map((row) => {\r\n          if (row.stock > 0) {\r\n            return (\r\n              <tr key={row.productId}>\r\n                <td>{group}</td>\r\n                <td>{row.product}</td>\r\n                <td>{row.price}</td>\r\n                <td>EN STOCK</td>\r\n              </tr>\r\n            );\r\n          } else {\r\n            return '';\r\n          }\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default PriceListPDF;\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport GroupSearch from 'components/GroupSearch';\r\nimport { fetchProductPriceList } from 'api/products';\r\nimport PriceListTable from 'components/PriceListTable';\r\nimport { useReportFilter } from 'hooks/useReportFilter';\r\nimport { DateTime } from 'luxon';\r\nimport PriceListPDF from 'components/PDF/PriceList';\r\nimport { renderToStaticMarkup } from 'react-dom/server';\r\nimport { fetchProductsByGroup } from 'api/products';\r\n\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nconst doc = new jsPDF('p', 'pt', 'a4');\r\n\r\nconst pdfName = `LISTA-DE-PRECIOS-${DateTime.fromISO(new Date().toISOString())\r\n  .toLocaleString()\r\n  .replaceAll('/', '-')}.pdf`;\r\n\r\ndoc.setProperties({\r\n  title: pdfName,\r\n});\r\n\r\nconst GroupStock = () => {\r\n  const [selectedGroup, setSelectedGroup] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const { filteredData, setFilteredData, onFilterDebounced } = useReportFilter(data);\r\n  const inputRef = useRef(null);\r\n  const [printPDF, setPrintPDF] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedGroup) {\r\n      const fetch_stock_by_group = async () => {\r\n        const data = await fetchProductPriceList(selectedGroup.groupId);\r\n        setFilteredData([]);\r\n        inputRef.current.value = '';\r\n        setData([...data]);\r\n      };\r\n\r\n      fetch_stock_by_group();\r\n    } else if (!selectedGroup) {\r\n      setData([]);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedGroup]);\r\n\r\n  useEffect(() => {\r\n    if (printPDF) {\r\n      const fetch_product_data = async () => {\r\n        const groups = await fetchProductsByGroup();\r\n        var div = document.createElement('div');\r\n        doc.setFontSize(16);\r\n        doc.text('ALIMENTOS DM MARKET, C.A.', 300, 25, { align: 'center' });\r\n        doc.setFontSize(6);\r\n        doc.text(\r\n          'CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.',\r\n          300,\r\n          35,\r\n          { align: 'center' }\r\n        );\r\n        doc.setFontSize(8);\r\n        doc.text('R.I.F.: J-41270446-0', 300, 45, { align: 'center' });\r\n        doc.text('Teléfono:', 300, 55, { align: 'center' });\r\n\r\n        doc.setFontSize(9);\r\n        doc.text(`LISTA DE PRECIOS AL ${DateTime.fromISO(new Date().toISOString()).toLocaleString()}`, 300, 70, {\r\n          align: 'center',\r\n        });\r\n\r\n        Object.keys(groups).forEach((key, index) => {\r\n          const products = groups[key];\r\n          div.innerHTML = renderToStaticMarkup(<PriceListPDF data={products} group={key} />);\r\n          doc.autoTable({\r\n            html: div.firstChild,\r\n            styles: { cellPadding: 2 },\r\n            didParseCell: (data) => {\r\n              if (data.section === 'body' && data.cell.raw && data.cell.raw.nodeName === 'TH') {\r\n                data.cell.styles.fillColor = 'gray';\r\n                data.cell.styles.color = 'white';\r\n                data.cell.styles.cellWidth = 'wrap';\r\n              }\r\n            },\r\n            margin: { top: 80 },\r\n          });\r\n          doc.addPage();\r\n        });\r\n        doc.save(pdfName);\r\n        setPrintPDF(false);\r\n      };\r\n      fetch_product_data();\r\n    }\r\n  }, [printPDF]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Lista de precios por categoría</h3>\r\n        <button onClick={() => setPrintPDF(true)}>Imprimir</button>\r\n      </div>\r\n      <div className='card-body'>\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            gap: '20%',\r\n          }}\r\n        >\r\n          <GroupSearch onSelect={setSelectedGroup} />\r\n\r\n          <input\r\n            ref={inputRef}\r\n            className='input-filter'\r\n            placeholder='Buscar...'\r\n            type='search'\r\n            onChange={(event) => {\r\n              onFilterDebounced(event.target.value, 'product');\r\n            }}\r\n          />\r\n        </div>\r\n        <PriceListTable data={filteredData.length > 0 ? filteredData : data} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupStock;\r\n","import { useState } from 'react';\r\nimport debounce from 'lodash.debounce';\r\n\r\nexport const useReportFilter = (data_to_filter, initial_state = []) => {\r\n  const [filteredData, setFilteredData] = useState(initial_state);\r\n\r\n  const onFilterDebounced = debounce((filterValue, filterKey, nestedKey) => {\r\n    if (nestedKey) {\r\n      nestedFilter(filterValue, filterKey, nestedKey);\r\n    } else {\r\n      filter(filterValue, filterKey);\r\n    }\r\n  }, 500);\r\n\r\n  const filter = (filterValue, filterKey) => {\r\n    const filtered = data_to_filter.filter((r) => r[filterKey].toLowerCase().includes(filterValue.toLowerCase()));\r\n    setFilteredData(filtered);\r\n    return filtered;\r\n  };\r\n\r\n  const nestedFilter = (filterValue, filterKey, nestedKey) => {\r\n    console.log('nestedKLey', nestedKey);\r\n    const filtered = data_to_filter[nestedKey].filter((r) => r[filterKey].toLowerCase().includes(filterValue.toLowerCase()));\r\n    setFilteredData({ ...filteredData, [nestedKey]: filtered });\r\n  };\r\n\r\n  return {\r\n    filter,\r\n    filteredData,\r\n    setFilteredData,\r\n    onFilterDebounced,\r\n  };\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { ResponsivePie } from '@nivo/pie';\r\nimport { fetchCostPerGroup } from 'api/products';\r\n\r\nconst ProductCostPerGroupCard = () => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      setLoading(true);\r\n      const response = await fetchCostPerGroup();\r\n      if (response && response.length) {\r\n        const chartData = response.reduce(\r\n          (acc, current) => [\r\n            ...acc,\r\n            {\r\n              id: current.group_name,\r\n              label: current.product,\r\n              value: current.total_cost,\r\n            },\r\n          ],\r\n          []\r\n        );\r\n        console.log(response, chartData);\r\n        setData(chartData);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    fetch();\r\n  }, []);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Inversión por categoría</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        {data.length > 0 && (\r\n          <ResponsivePie\r\n            data={data}\r\n            margin={{ top: 30, right: 20, bottom: 20, left: 20 }}\r\n            innerRadius={0.5}\r\n            padAngle={0.7}\r\n            cornerRadius={3}\r\n            valueFormat={(value) => value.toLocaleString()}\r\n            activeOuterRadiusOffset={8}\r\n            borderWidth={1}\r\n            arcLinkLabelsSkipAngle={10}\r\n            arcLinkLabelsTextColor='#333333'\r\n            arcLinkLabelsThickness={2}\r\n            arcLinkLabelsColor={{ from: 'color' }}\r\n            arcLabelsSkipAngle={10}\r\n            arcLabelsTextColor={{\r\n              from: 'color',\r\n              modifiers: [['darker', 2]],\r\n            }}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCostPerGroupCard;\r\n","import Container from 'react-bootstrap/Container';\r\nimport CostFluctuationCard from 'components/Cards/CostFluctuation';\r\nimport GroupStock from 'components/Cards/GroupStock';\r\nimport ProductCostPerGroup from 'components/ProductCostPerGroup/Card';\r\n\r\nconst ProductosPage = () => {\r\n  return (\r\n    <Container fluid>\r\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\r\n        <div className='col-12 col-xl-4'>\r\n          <CostFluctuationCard />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <GroupStock />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <ProductCostPerGroup />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProductosPage;\r\n","import { DateTime } from 'luxon';\r\n\r\nexport default [\r\n  {\r\n    Header: 'ID',\r\n    accessor: 'invoiceId',\r\n  },\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n\r\n  {\r\n    Header: 'Rif',\r\n    accessor: 'rif',\r\n  },\r\n  {\r\n    Header: 'Fecha',\r\n    accessor: 'createdAt',\r\n    Cell: ({ value }) => {\r\n      return DateTime.fromISO(value, { setZone: true }).toFormat('F');\r\n    },\r\n  },\r\n\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'invoiceTotal',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value : '';\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.invoiceTotal;\r\n      }, 0);\r\n      return total ? '$' + Number(total).toLocaleString() : 0;\r\n    },\r\n  },\r\n\r\n  {\r\n    Header: 'Comisión',\r\n    accessor: 'commissionTotal',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value : '';\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.commissionTotal;\r\n      }, 0);\r\n      return total ? '$' + Number(total).toLocaleString() : 0;\r\n    },\r\n  },\r\n];\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst EmployeeSalesTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return (\r\n    <>\r\n      <div className='card'>\r\n        <div className='card-header'>\r\n          <h2>Reporte de ventas</h2>\r\n        </div>\r\n        <div className='card-body'>\r\n          <Table data={data} columns={memoizedColumns} loading={loading} showFooter maxHeight={400} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmployeeSalesTable;\r\n","const BASE_URL = '/api/employees';\r\n\r\nexport const getAllEmployees = async () => {\r\n  const response = await fetch(`${BASE_URL}`);\r\n  const employees = await response.json();\r\n  return employees;\r\n};\r\n\r\nexport const getComisionInfo = async (employeeId) => {\r\n  const response = await fetch(`${BASE_URL}/commissionInfo/${employeeId}`).catch((error) => ({ error }));\r\n  const commissionInfo = await response.json();\r\n  return commissionInfo;\r\n};\r\n\r\nexport const updateComisionInfo = async (employeeId, data) => {\r\n  const res = await fetch(`${BASE_URL}/commissionInfo/${employeeId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ commissionInfo: data }),\r\n  }).catch((error) => ({ error }));\r\n\r\n  const response = await res.json();\r\n  return response;\r\n};\r\n\r\nexport const getEmployeeSales = async (employeeId, dateRange) => {\r\n  const response = await fetch(`${BASE_URL}/sales/${employeeId}?from=${dateRange.from}&to=${dateRange.to}`).catch(\r\n    (error) => ({ error })\r\n  );\r\n  const sales = await response.json();\r\n  return sales;\r\n};\r\n","import { getAllEmployees } from 'api/employees';\r\nimport SearchInput from 'components/SearchInput';\r\n\r\nconst EmployeeSearch = ({ onSelect }) => {\r\n  const loadEmployees = async (inputValue) => {\r\n    let employees = await getAllEmployees({ filter: inputValue });\r\n\r\n    if (employees && employees.length > 0) {\r\n      const records = employees.map((record) => {\r\n        const employee = {\r\n          key: record.id,\r\n          label: record.name,\r\n          value: record,\r\n        };\r\n        return employee;\r\n      });\r\n\r\n      return records;\r\n    }\r\n  };\r\n\r\n  const handleSelect = (option, { action }) => {\r\n    if (action === 'select-option') {\r\n      onSelect && onSelect(option.value, action);\r\n    } else if (action === 'clear') {\r\n      onSelect && onSelect(null, action);\r\n    }\r\n  };\r\n\r\n  return <SearchInput loadOptions={loadEmployees} placeholder='Buscar vendedor...' onSelect={handleSelect} />;\r\n};\r\n\r\nexport default EmployeeSearch;\r\n","import { useEffect, useState } from 'react';\r\nimport { Modal, Button, Alert, Spinner } from 'react-bootstrap';\r\nimport { getComisionInfo, updateComisionInfo } from 'api/employees';\r\n\r\nconst CommissionModal = ({ employee, show, onClose }) => {\r\n  const [commissionInfo, setCommissionInfo] = useState({ data: [], loading: false });\r\n  const [formData, setFormData] = useState({});\r\n  const [submissionState, setSubmissionState] = useState({\r\n    loading: false,\r\n    error: false,\r\n    message: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    setCommissionInfo({ ...commissionInfo, loading: true });\r\n    getComisionInfo(employee.id).then((data) => {\r\n      setCommissionInfo({ data, loading: false });\r\n    });\r\n  }, []);\r\n\r\n  const sanitizedFormData = () => {\r\n    const data = {};\r\n    Object.keys(formData).map((key) => {\r\n      if (formData[key]) {\r\n        data[key] = Number(formData[key]);\r\n      }\r\n    });\r\n    return data;\r\n  };\r\n\r\n  const submitForm = async (event) => {\r\n    event.preventDefault();\r\n    if (!submissionState.loading) {\r\n      setSubmissionState({ ...submissionState, loading: true, text: '' });\r\n      const response = await updateComisionInfo(employee.id, sanitizedFormData());\r\n      if (response.error) {\r\n        setSubmissionState({ error: true, text: response.error.message, loading: false });\r\n      } else if (response.success) {\r\n        setSubmissionState({ error: false, text: 'El recurso fue actualizado con éxito', loading: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  const modalBody = () => {\r\n    if (commissionInfo.data.error) {\r\n      return <Alert variant='danger'>{commissionInfo.data.error.message}</Alert>;\r\n    } else if (commissionInfo.loading) {\r\n      return <Spinner animation='border' />;\r\n    } else {\r\n      return commissionInfo.data.map((info) => {\r\n        return (\r\n          <div key={info.groupId} className='d-flex flex-column col-sm-4'>\r\n            <label className='form-label'>{info.group}</label>\r\n            <div className='input-group mb-3'>\r\n              <span className='input-group-text' id='basic-addon1'>\r\n                %\r\n              </span>\r\n              <input\r\n                type='number'\r\n                min={0}\r\n                step={0.01}\r\n                className='form-control'\r\n                placeholder={info.commission || 0}\r\n                value={formData[info.groupId] || ''}\r\n                onChange={(e) => setFormData({ ...formData, [info.groupId]: e.target.value })}\r\n                onFocus={(e) => e.target.select()}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} size='lg' onHide={onClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>{employee.name}</Modal.Title>\r\n      </Modal.Header>\r\n      <form onSubmit={submitForm}>\r\n        <Modal.Body>\r\n          <div className='row justify-content-center'>{modalBody()}</div>\r\n        </Modal.Body>\r\n        <Modal.Footer className='px-0 pb-2'>\r\n          <div className='container-fluid d-flex justify-content-between align-items-center gap-5'>\r\n            <div className='col-9'>\r\n              {submissionState.text && (\r\n                <Alert variant={submissionState.error ? 'danger' : 'success'} className='mb-0 mt-0 p-1'>\r\n                  {submissionState.text}\r\n                </Alert>\r\n              )}\r\n            </div>\r\n            <div className='col-3 d-flex flex-wrap gap-2'>\r\n              <Button\r\n                type='submit'\r\n                variant='success'\r\n                disabled={Object.keys(formData).length === 0 || submissionState.loading}\r\n              >\r\n                Enviar\r\n              </Button>\r\n              <Button variant='danger' onClick={onClose}>\r\n                Cerrar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Modal.Footer>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CommissionModal;\r\n","import { useState } from 'react';\r\nimport EmployeeSearch from 'employees/Search';\r\nimport { Button } from 'react-bootstrap';\r\nimport DatePicker from 'components/DatePicker';\r\nimport CommissionModal from 'employees/Modal/Commission';\r\nimport { getEmployeeSales } from 'api/employees';\r\n\r\nconst EmployeeActions = ({ onDateSubmit }) => {\r\n  const [employeeSales, setEmployeeSales] = useState([]);\r\n  const [employeeSalesLoading, setEmployeeSalesLoading] = useState(false);\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n  const [showCommissionModal, setShowCommissionModal] = useState(false);\r\n\r\n  const submitDateHandler = (event, dateRange) => {\r\n    event.preventDefault();\r\n    if (selectedEmployee) {\r\n      setEmployeeSalesLoading(true);\r\n      getEmployeeSales(selectedEmployee.id, dateRange).then((response) => {\r\n        setEmployeeSales(response);\r\n        setEmployeeSalesLoading(false);\r\n        onDateSubmit(response);\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className='col-12 mb-4'>\r\n        <div className='row justify-content-end'>\r\n          <div className='col-6 mb-2'>\r\n            <EmployeeSearch onSelect={setSelectedEmployee} />\r\n          </div>\r\n          <div className='col-4'>\r\n            <Button variant='primary' disabled={!selectedEmployee} onClick={() => setShowCommissionModal(true)}>\r\n              Asignar comisión\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <DatePicker onSubmit={submitDateHandler} loading={employeeSalesLoading} submitDisabled={!selectedEmployee} />\r\n      </div>\r\n      {showCommissionModal && (\r\n        <CommissionModal\r\n          show={showCommissionModal}\r\n          onClose={() => setShowCommissionModal(false)}\r\n          employee={selectedEmployee}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmployeeActions;\r\n","import { useState, useCallback, useMemo } from 'react';\r\nimport EmployeeSalesTable from 'employees/Table/Sales';\r\nimport EmployeeActions from 'employees/Actions';\r\n\r\nconst EmployeesPage = () => {\r\n  const [employeeSales, setEmployeeSales] = useState([]);\r\n\r\n  const onSubmit = (sales) => {\r\n    setEmployeeSales(sales);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className='row justify-content-center'>\r\n        <div className='col-sm-12 col-xl-8'>\r\n          <EmployeeActions onDateSubmit={onSubmit} />\r\n          <EmployeeSalesTable data={employeeSales} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmployeesPage;\r\n","import Navbar from 'react-bootstrap/Navbar';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Nav from 'react-bootstrap/Nav';\r\n\r\nimport VentasPage from 'pages/ventas';\r\nimport ClientesPage from 'pages/clientes';\r\nimport ProductosPage from 'pages/productos';\r\nimport EmployeesPage from 'pages/employees';\r\n\r\nimport { Link, Switch, Route, useLocation } from 'react-router-dom';\r\n\r\nfunction App() {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <div className='App bg-dark'>\r\n      <Container fluid id='main' className='m-0 p-0 vh-100'>\r\n        <Navbar bg='dark' variant='dark' className='border-bottom' expand='lg'>\r\n          <Container fluid>\r\n            <Navbar.Brand>SISTEMA DE REPORTES</Navbar.Brand>\r\n\r\n            <Navbar.Toggle aria-controls='basic-navbar-nav' />\r\n            <Navbar.Collapse id='basic-navbar-nav'>\r\n              <Container fluid>\r\n                <Nav className='me-auto'>\r\n                  {['ventas', 'clientes', 'productos', 'vendedores'].map((route, index) => {\r\n                    return (\r\n                      <Link\r\n                        key={index}\r\n                        to={`/${route}`}\r\n                        className={`text-decoration-none mx-1 text-secondary nav-link ${\r\n                          (location.pathname.includes(route) && 'active') || ''\r\n                        }`}\r\n                      >\r\n                        <span style={{ textTransform: 'capitalize' }}>{route}</span>\r\n                      </Link>\r\n                    );\r\n                  })}\r\n                </Nav>\r\n              </Container>\r\n            </Navbar.Collapse>\r\n          </Container>\r\n        </Navbar>\r\n\r\n        <Container fluid className='py-3'>\r\n          <Switch>\r\n            <Route path='/ventas' component={VentasPage} />\r\n            <Route path='/clientes' component={ClientesPage} />\r\n            <Route path='/productos' component={ProductosPage} />\r\n            <Route path='/vendedores' component={EmployeesPage} />\r\n          </Switch>\r\n        </Container>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}