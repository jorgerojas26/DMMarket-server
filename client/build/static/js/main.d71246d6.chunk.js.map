{"version":3,"sources":["context/currency_rate.js","components/DatePicker/index.js","api/invoice/index.js","components/Table/index.js","components/InvoicesTable/columns.js","components/InvoicesTable/index.js","components/Modals/CurrencyModal.js","components/ProductsTable/pdf.js","components/ProductsTable/index.js","context/show_noe.js","pages/invoices/index.js","components/SaleReportTable/columns.js","components/SaleReportTable/index.js","components/Cards/SaleReport/index.js","components/Cards/GroupSales/index.js","pages/ventas/index.js","components/ClientReportTable/columns.js","components/ClientReportTable/index.js","components/Cards/ClientReport/index.js","components/SearchInput/index.js","api/products/index.js","components/ProductSearch/index.js","components/ClientPerProduct/Table/columns.js","components/ClientPerProduct/Table/index.js","api/clients/index.js","components/ClientPerProduct/Card/index.js","components/ClientSearch/index.js","components/MonthlyAverageClient/Card/index.js","pages/clientes/index.js","components/Cards/CostFluctuation/index.js","components/GroupSearch/index.js","api/groups/index.js","components/PriceListTable/columns.js","components/PriceListTable/index.js","components/PDF/PriceList/index.js","components/Cards/GroupStock/index.js","hooks/useReportFilter.js","components/ProductCostPerGroup/Card/index.js","pages/productos/index.js","employees/Table/Sales/columns.js","employees/Table/Sales/EmployeesSalesTable.js","api/employees/index.js","employees/Search/EmployeeSearch.js","employees/Modal/Commission/CommissionModal.js","employees/Actions/index.js","pages/employees/index.js","App.js","api/currency_rates/index.js","index.js"],"names":["CurrencyRateContext","React","createContext","CurrencyRateProvider","_ref","children","currencyRate","setCurrencyRate","useState","_jsx","Provider","value","DatePicker","onSubmit","loading","submitDisabled","dateRange","setDateRange","from","DateTime","now","toISODate","to","_jsxs","className","type","onChange","event","target","Button","variant","onClick","disabled","role","BASE_URL","Table","data","columns","filterPlaceholder","onFilter","maxHeight","showFooter","onRowSelect","multiSelect","console","log","getTableProps","getTableBodyProps","headerGroups","footerGroups","rows","prepareRow","state","useTable","useRowSelect","onFilterDebounced","debounce","useEffect","selectedRows","filter","row","isSelected","map","original","_rows$find","find","MemoizedRow","memo","_ref2","getRowProps","e","lastSelectedRowIndex","Object","keys","selectedRowIds","length","newSelectedRowIndex","index","ctrlKey","shiftKey","toggleRowSelected","i","getToggleRowSelectedProps","cells","cell","title","getCellProps","style","background","color","render","placeholder","autoFocus","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","group","getFooterGroupProps","getFooterProps","Header","accessor","Cell","concat","toFixed","dayjs","format","InvoicesTable","memoizedColumns","useMemo","Card","Body","CurrencyModal","show","onClose","Modal","size","onHide","closeButton","Title","pdfschema","productList","quantityTotal","totalSummary","currency","content","text","local","toFormat","table","widths","body","product","quantity","total","bold","styles","header","alignment","margin","pageMargins","pageSize","pdfMake","vfs","pdfFonts","ProductsTable","useContext","showCurrencyModal","setShowCurrencyModal","reduce","acc","item","sortedData","sort","a","b","toLowerCase","localeCompare","Footer","async","productsData","Number","price","Cambio","pdfData","pdf","createPdf","open","ShowNoeContext","showNoe","setShowNoe","ShowNoesProvider","_localStorage$getItem","localStorage","getItem","_showNoe$toString","setItem","toString","InvoicesPage","setLoading","invoices","setInvoices","setSelectedRows","productsSummary","products","forEach","productId","values","invoicesTotalSummary","invoice","Container","fluid","preventDefault","response","fetch","json","fetchInvoiceList","current","toLocaleString","_ref3","rawProfit","_ref4","_ref5","netProfit","_ref6","SaleReportTable","SaleReportCard","sorting","setSorting","setSortedData","sorted","marginRight","GroupSales","chartData","ResponsivePie","top","right","bottom","left","innerRadius","padAngle","cornerRadius","activeOuterRadiusOffset","arcLabel","borderWidth","arcLinkLabelsSkipAngle","arcLinkLabelsTextColor","arcLinkLabelsThickness","arcLinkLabelsColor","arcLabelsSkipAngle","arcLabelsTextColor","modifiers","tooltip","datum","label","VentasPage","setData","filtered_invoices_report","invoices_report","group_sales_chart","searchTerm","filteredData","f","includes","report","fetchInvoiceReport","group_sales_chart_data","id","categoria","sales_report","ClientReportTable","ClientReportCard","_Fragment","SearchInput","loadOptions","defaultOptions","cacheOptions","onSelect","AsyncSelect","inputValue","callback","loadingMessage","isClearable","fetchCostPerGroup","ProductSearch","filterParam","fetchProducts","record","product_name","Descripcion","key","handleSelect","option","action","ClientPerProductTable","ClientPerProductCard","selectedProduct","setSelectedProduct","fetchBestClientsPerProduct","IdProducto","then","display","flexDirection","gap","fromISO","flex","justifyContent","width","ClientSearch","clients","fetchClients","IdCliente","name","MonthlyAverageClient","selectedClient","setSelectedClient","clientId","fetchMonthlyAverage","ResponsiveLine","xScale","yScale","min","max","stacked","reverse","axisTop","axisRight","pointSize","pointColor","theme","pointBorderWidth","pointBorderColor","pointLabelYOffset","useMesh","ClientesPage","filtered_best_clients","best_clients","client","fetchBestClients","MonthlyAverageClientCard","CostFluctuation","report_data","fetchCostFluctuation","fetch_product_report","axisLeft","legend","legendPosition","legendOffset","axisBottom","GroupSearch","groups","fetchGroups","groupId","PriceListTable","PriceListPDF","stock","GroupStock","selectedGroup","setSelectedGroup","setFilteredData","data_to_filter","initial_state","arguments","undefined","filterValue","filterKey","nestedKey","nestedFilter","filtered","r","useReportFilter","inputRef","useRef","fetch_stock_by_group","fetchProductPriceList","ref","fetchProductsByGroup","div","document","createElement","doc","jsPDF","pdfName","Date","toISOString","replaceAll","setProperties","setFontSize","align","innerHTML","renderToStaticMarkup","autoTable","html","firstChild","cellPadding","didParseCell","section","raw","nodeName","fillColor","cellWidth","addPage","save","ProductCostPerGroupCard","group_name","total_cost","valueFormat","ProductosPage","CostFluctuationCard","ProductCostPerGroup","setZone","invoiceTotal","commissionTotal","EmployeeSalesTable","EmployeeSearch","employees","getAllEmployees","CommissionModal","employee","commissionInfo","setCommissionInfo","formData","setFormData","submissionState","setSubmissionState","error","message","employeeId","catch","getComisionInfo","res","method","JSON","stringify","updateComisionInfo","sanitizedFormData","success","Alert","Spinner","animation","info","step","commission","onFocus","select","EmployeeActions","onDateSubmit","employeeSalesLoading","setEmployeeSalesLoading","selectedEmployee","setSelectedEmployee","showCommissionModal","setShowCommissionModal","submitDateHandler","getEmployeeSales","EmployeesPage","employeeSales","setEmployeeSales","sales","App","location","useLocation","status","fetchCurrencyRates","Simbolo","Navbar","bg","expand","Brand","Toggle","Collapse","Nav","route","Link","pathname","textTransform","alignItems","checked","Switch","Route","path","component","ReactDOM","StrictMode","BrowserRouter","getElementById"],"mappings":"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","file":"static/js/main.d71246d6.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nexport const CurrencyRateContext = React.createContext();\r\n\r\nexport const CurrencyRateProvider = ({ children }) => {\r\n  const [currencyRate, setCurrencyRate] = useState(0);\r\n\r\n  return (\r\n    <CurrencyRateContext.Provider value={{ currencyRate, setCurrencyRate }}>{children}</CurrencyRateContext.Provider>\r\n  );\r\n};\r\n","import { useState } from 'react';\r\nimport { DateTime } from 'luxon';\r\nimport { Button } from 'react-bootstrap';\r\n\r\nconst DatePicker = ({ onSubmit, loading, submitDisabled }) => {\r\n  const [dateRange, setDateRange] = useState({\r\n    from: DateTime.now().toISODate(),\r\n    to: DateTime.now().toISODate(),\r\n  });\r\n\r\n  return (\r\n    <div className='d-flex flex-column flex-sm-row justify-content-center mb-3 gap-2'>\r\n      <div className='d-flex flex-row justify-content-center align-items-center gap-2 text-light'>\r\n        <label className='d-none d-sm-flex'>Desde:</label>\r\n        <input\r\n          type='date'\r\n          value={dateRange.from}\r\n          onChange={(event) => setDateRange({ ...dateRange, from: event.target.value })}\r\n        />\r\n        <label className='d-none d-sm-flex'>Hasta:</label>\r\n        <input\r\n          type='date'\r\n          value={dateRange.to}\r\n          onChange={(event) => setDateRange({ ...dateRange, to: event.target.value })}\r\n        />\r\n      </div>\r\n      <Button variant='primary' onClick={(event) => onSubmit(event, dateRange)} disabled={loading || submitDisabled}>\r\n        {loading && (\r\n          <div>\r\n            <span className='spinner-border spinner-border-sm' role='status' aria-hidden='true'></span>\r\n            <span className='visually-hidden'>Loading...</span>\r\n          </div>\r\n        )}\r\n        {!loading && <span className='mr-2'>Enviar</span>}\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DatePicker;\r\n","const BASE_URL = '/api/invoices';\r\n\r\nexport const fetchInvoiceReport = async ({ from, to }, showNoe) => {\r\n  const response = await fetch(`${BASE_URL}/sales?from=${from}&to=${to}&showNoe=${showNoe}`);\r\n  const report = await response.json();\r\n  console.log('From fetchInvoiceReport: ', report);\r\n  return report;\r\n};\r\n\r\nexport const fetchInvoiceList = async ({ from, to }, showNoe) => {\r\n  const response = await fetch(`${BASE_URL}?from=${from}&to=${to}&showNoe=${showNoe}`);\r\n  const invoices = await response.json();\r\n  return invoices;\r\n};\r\n","import { useEffect } from 'react';\r\nimport React from 'react';\r\nimport { useTable, useRowSelect } from 'react-table';\r\n\r\nimport debounce from 'lodash.debounce';\r\n\r\nconst Table = ({\r\n  data = [],\r\n  loading,\r\n  columns = [],\r\n  filterPlaceholder,\r\n  onFilter,\r\n  maxHeight = 350,\r\n  showFooter = false,\r\n  onRowSelect,\r\n  multiSelect = false,\r\n}) => {\r\n  console.log(data)\r\n  const { getTableProps, getTableBodyProps, headerGroups, footerGroups, rows, prepareRow, state } = useTable(\r\n    {\r\n      columns,\r\n      data: data ?? [],\r\n    },\r\n    useRowSelect\r\n  );\r\n\r\n  const onFilterDebounced = debounce((value) => {\r\n    onFilter(value);\r\n  }, 500);\r\n\r\n  useEffect(() => {\r\n    if (multiSelect) {\r\n      const selectedRows = rows.filter((row) => row.isSelected);\r\n      onRowSelect(selectedRows.map((row) => row.original));\r\n    } else {\r\n      onRowSelect && onRowSelect(rows.find((row) => row.isSelected)?.original);\r\n    }\r\n  }, [state, multiSelect, onRowSelect]);\r\n\r\n  const MemoizedRow = React.memo(\r\n    ({ row }) => {\r\n      return (\r\n        <tr\r\n          {...row.getRowProps({\r\n            onClick: onRowSelect\r\n              ? (e) => {\r\n                  const lastSelectedRowIndex = Object.keys(state.selectedRowIds)[\r\n                    Object.keys(state.selectedRowIds).length - 1\r\n                  ];\r\n                  const newSelectedRowIndex = row.index;\r\n\r\n                  if (e.ctrlKey && !e.shiftKey) {\r\n                    row.toggleRowSelected();\r\n                  } else if (e.shiftKey && !e.ctrlKey) {\r\n                    if (multiSelect) {\r\n                      if (newSelectedRowIndex >= lastSelectedRowIndex) {\r\n                        for (let i = lastSelectedRowIndex; i <= newSelectedRowIndex; i++) {\r\n                          if (i !== lastSelectedRowIndex) {\r\n                            rows[i].toggleRowSelected();\r\n                          }\r\n                        }\r\n                      } else {\r\n                        for (let i = lastSelectedRowIndex; i >= newSelectedRowIndex; i--) {\r\n                          if (i !== lastSelectedRowIndex) {\r\n                            rows[i].toggleRowSelected();\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  } else {\r\n                    if (row.isSelected) {\r\n                      row.toggleRowSelected();\r\n                    } else {\r\n                      state.selectedRowIds = {};\r\n                      row.toggleRowSelected();\r\n                    }\r\n                  }\r\n                }\r\n              : null,\r\n          })}\r\n          {...row.getToggleRowSelectedProps({})}\r\n        >\r\n          {row.cells.map((cell, index) => {\r\n            return (\r\n              <td\r\n                title={cell.value}\r\n                {...cell.getCellProps()}\r\n                style={{\r\n                  background: row.isSelected ? 'lightblue' : 'white',\r\n                  color: row.isSelected ? 'white' : 'black',\r\n                }}\r\n              >\r\n                {cell.render('Cell')}\r\n              </td>\r\n            );\r\n          })}\r\n        </tr>\r\n      );\r\n    },\r\n    [data]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {onFilter && (\r\n        <div className='table-filter-container'>\r\n          <input\r\n            className='table-filter-input'\r\n            onChange={(event) => onFilterDebounced(event.target.value)}\r\n            placeholder={filterPlaceholder}\r\n            autoFocus\r\n          />\r\n        </div>\r\n      )}\r\n      <div className='table-container' style={{ maxHeight }}>\r\n        <table {...getTableProps()}>\r\n          <thead>\r\n            {headerGroups.map((headerGroup) => (\r\n              <tr {...headerGroup.getHeaderGroupProps()}>\r\n                {headerGroup.headers.map((column) => (\r\n                  <th {...column.getHeaderProps()}>{column.render('Header')}</th>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </thead>\r\n          <tbody {...getTableBodyProps()}>\r\n            {rows.map((row) => {\r\n              prepareRow(row);\r\n              return <MemoizedRow row={row} />;\r\n            })}\r\n          </tbody>\r\n          {showFooter && data.length > 0 && (\r\n            <tfoot>\r\n              {footerGroups.map((group) => (\r\n                <tr {...group.getFooterGroupProps()}>\r\n                  {group.headers.map((column) => (\r\n                    <td {...column.getFooterProps()}>{column.render('Footer')}</td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tfoot>\r\n          )}\r\n        </table>\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import dayjs from 'dayjs';\r\n\r\nconst columns = [\r\n  {\r\n    Header: 'ID',\r\n    accessor: 'invoiceId',\r\n  },\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n  {\r\n    Header: 'RIF',\r\n    accessor: 'rif',\r\n  },\r\n  {\r\n    Header: 'TOTAL',\r\n    accessor: 'total',\r\n    Cell: ({ value }) => `$${value ? value.toFixed(2) : ''}`,\r\n  },\r\n  {\r\n    Header: 'Fecha',\r\n    accessor: 'createdAt',\r\n    Cell: ({ value }) => {\r\n      return dayjs(value).format('MMM DD, YYYY');\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import Table from 'components/Table';\r\nimport { Card } from 'react-bootstrap';\r\nimport { useMemo } from 'react';\r\nimport columns from './columns';\r\n\r\nconst InvoicesTable = ({ data, loading, onRowSelect }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return (\r\n    <Card className='noselect'>\r\n      <Card.Header>\r\n        <h3>Facturas</h3>\r\n      </Card.Header>\r\n      <Card.Body>\r\n        <Table data={data} columns={memoizedColumns} loading={loading} onRowSelect={onRowSelect} multiSelect />\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default InvoicesTable;\r\n","import { Modal, Button } from 'react-bootstrap';\r\n\r\nfunction CurrencyModal({ show, onClose, onSubmit }) {\r\n  return (\r\n    <Modal show={show} size='sm' onHide={onClose}>\r\n      <Modal.Header closeButton onHide={onClose}>\r\n        <Modal.Title>Moneda</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Button className='w-100 mb-3' onClick={() => onSubmit('USD')}>\r\n          USD\r\n        </Button>\r\n        <Button className='w-100' onClick={() => onSubmit('Bs')}>\r\n          Bs\r\n        </Button>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default CurrencyModal;\r\n","import { DateTime } from 'luxon';\r\n\r\nconst pdfschema = (productList, quantityTotal, totalSummary, currency) => ({\r\n  content: [\r\n    { text: 'ALIMENTOS DM MARKET, C.A.', style: 'header' },\r\n    {\r\n      text: 'CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.',\r\n      style: 'header',\r\n    },\r\n    { text: 'R.I.F.: J-41270446-0', style: 'header' },\r\n    { text: DateTime.local().toFormat('dd/MM/yyyy'), style: 'header' },\r\n    {\r\n      style: 'table',\r\n      table: {\r\n        widths: [85, '*', 'auto', 'auto'],\r\n        body: [\r\n          ['CATEGORÃA', 'PRODUCTO', 'CANTIDAD', `TOTAL (${currency})`],\r\n          ...productList.map(({ group, product, quantity, total }) => [group, product, quantity, total]),\r\n          ['', '', { text: quantityTotal, bold: true }, { text: `${currency} ${totalSummary}`, bold: true }],\r\n        ],\r\n      },\r\n    },\r\n  ],\r\n  styles: {\r\n    header: {\r\n      alignment: 'center',\r\n    },\r\n    table: {\r\n      margin: [0, 20, 0, 0],\r\n    },\r\n  },\r\n\r\n  pageMargins: 40,\r\n  pageSize: 'LETTER',\r\n});\r\n\r\nexport default pdfschema;\r\n","import { useMemo, useContext, useState } from 'react';\r\nimport { CurrencyRateContext } from '../../context/currency_rate';\r\nimport { Card, Button } from 'react-bootstrap';\r\nimport Table from 'components/Table';\r\nimport CurrencyModal from 'components/Modals/CurrencyModal';\r\nimport pdf from './pdf';\r\nimport pdfMake from 'pdfmake/build/pdfmake';\r\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\r\npdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\nconst ProductsTable = ({ data, totalSummary }) => {\r\n  const { currencyRate } = useContext(CurrencyRateContext);\r\n\r\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\r\n\r\n  const quantityTotal = useMemo(() => {\r\n    if (!data) return 0;\r\n\r\n    return data.reduce((acc, item) => {\r\n      return acc + item.quantity;\r\n    }, 0);\r\n  }, [data]);\r\n\r\n  const sortedData = useMemo(() => {\r\n    if (!data) return [];\r\n\r\n    return data.sort((a, b) => {\r\n      return (\r\n        a.group.toLowerCase().localeCompare(b.group.toLowerCase()) ||\r\n        a.product.toLowerCase().localeCompare(b.product.toLowerCase())\r\n      );\r\n    });\r\n  }, [data]);\r\n\r\n  const memoizedColumns = useMemo(\r\n    () => [\r\n      {\r\n        Header: 'CategorÃ­a',\r\n        accessor: 'group',\r\n      },\r\n      {\r\n        Header: 'ID',\r\n        accessor: 'productId',\r\n      },\r\n      {\r\n        Header: 'Producto',\r\n        accessor: 'product',\r\n      },\r\n      {\r\n        Header: 'Cantidad',\r\n        accessor: 'quantity',\r\n        Footer: () => {\r\n          return <span>{quantityTotal ? quantityTotal.toFixed(2) : ''}</span>;\r\n        },\r\n      },\r\n      {\r\n        Header: 'Total',\r\n        accessor: 'total',\r\n        Footer: () => {\r\n          return <span>${totalSummary ? totalSummary.toFixed(2) : ''}</span>;\r\n        },\r\n      },\r\n    ],\r\n    [totalSummary, quantityTotal]\r\n  );\r\n\r\n  console.log(sortedData);\r\n\r\n  const exportToPDF = () => {\r\n    const pdfData = pdf(sortedData, quantityTotal, totalSummary);\r\n\r\n    pdfMake.createPdf(pdfData).open();\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <div className='d-flex w-100 justify-content-between'>\r\n          <h3>Productos</h3>\r\n          <Button onClick={() => setShowCurrencyModal(true)}>Imprimir</Button>\r\n        </div>\r\n      </Card.Header>\r\n      <Card.Body>\r\n        <Table data={sortedData} columns={memoizedColumns} showFooter />\r\n      </Card.Body>\r\n      {showCurrencyModal && (\r\n        <CurrencyModal\r\n          show={showCurrencyModal}\r\n          onClose={() => setShowCurrencyModal(false)}\r\n          onSubmit={async (currency) => {\r\n            let productsData = sortedData;\r\n\r\n            if (currency === 'Bs') {\r\n              productsData = productsData.map((item) => {\r\n                return {\r\n                  ...item,\r\n                  total: Number(item.price * item.quantity * currencyRate?.Cambio).toFixed(2),\r\n                };\r\n              });\r\n            }\r\n\r\n            const pdfData = pdf(productsData, quantityTotal, totalSummary, currency);\r\n\r\n            pdfMake.createPdf(pdfData).open();\r\n          }}\r\n        />\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ProductsTable;\r\n","import React, { createContext, useEffect, useState } from 'react';\r\n\r\n// Crea el contexto con un valor inicial\r\nexport const ShowNoeContext = createContext({\r\n  showNoe: false,\r\n  setShowNoe: () => {},\r\n});\r\n\r\nexport const ShowNoesProvider = ({ children }) => {\r\n  const [showNoe, setShowNoe] = useState(localStorage.getItem('showNoe') ?? false);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('showNoe', showNoe.toString() ?? false);\r\n  }, [showNoe]);\r\n\r\n  return <ShowNoeContext.Provider value={{ showNoe, setShowNoe }}>{children}</ShowNoeContext.Provider>;\r\n};\r\n","import { useState, useMemo, useContext } from 'react';\r\nimport { Container } from 'react-bootstrap';\r\nimport DatePicker from 'components/DatePicker';\r\nimport { fetchInvoiceList } from '../../api/invoice';\r\nimport InvoicesTable from 'components/InvoicesTable';\r\nimport ProductsTable from 'components/ProductsTable';\r\nimport { ShowNoeContext } from 'context/show_noe';\r\n\r\nconst InvoicesPage = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [invoices, setInvoices] = useState([]);\r\n  const [selectedRows, setSelectedRows] = useState([]);\r\n  const { showNoe } = useContext(ShowNoeContext);\r\n\r\n  const productsSummary = useMemo(() => {\r\n    if (!selectedRows || selectedRows.length === 0) return [];\r\n\r\n    const products = {};\r\n\r\n    selectedRows.forEach((row) => {\r\n      row.products.forEach((product) => {\r\n        if (!products[product.productId]) {\r\n          products[product.productId] = {\r\n            ...product,\r\n            quantity: 0,\r\n          };\r\n        }\r\n\r\n        products[product.productId].quantity += product.quantity;\r\n        products[product.productId].total = products[product.productId].quantity * products[product.productId].price;\r\n        products[product.productId].total = products[product.productId].total.toFixed(2);\r\n      });\r\n    });\r\n    //convert products to an array\r\n    return Object.values(products);\r\n  }, [selectedRows]);\r\n\r\n  const invoicesTotalSummary = useMemo(() => {\r\n    if (!selectedRows || selectedRows.length === 0) return 0;\r\n\r\n    return selectedRows.reduce((total, invoice) => total + invoice?.total, 0);\r\n  }, [selectedRows]);\r\n\r\n  const onSubmit = async (event, dateRange) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n    const response = await fetchInvoiceList(dateRange, showNoe);\r\n    setInvoices(response);\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <DatePicker onSubmit={onSubmit} loading={loading} />\r\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\r\n        <div className='col-12 col-xl-6'>\r\n          <InvoicesTable data={invoices} loading={loading} onRowSelect={setSelectedRows} />\r\n        </div>\r\n        <div className='col-12 col-xl-6'>\r\n          <ProductsTable data={productsSummary} loading={loading} totalSummary={invoicesTotalSummary} />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default InvoicesPage;\r\n","const columns = [\r\n  {\r\n    Header: \"Producto\",\r\n    accessor: \"product\",\r\n  },\r\n  {\r\n    Header: \"Cantidad\",\r\n    accessor: \"quantity\",\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.quantity;\r\n      }, 0);\r\n      return Number(total).toFixed(2);\r\n    },\r\n  },\r\n  {\r\n    Header: \"Bruto\",\r\n    accessor: \"rawProfit\",\r\n    Cell: ({ value }) => {\r\n      return value ? \"$\" + value.toLocaleString() : \"\";\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.rawProfit;\r\n      }, 0);\r\n      return \"$\" + Number(total.toFixed(2)).toLocaleString();\r\n    },\r\n  },\r\n  {\r\n    Header: \"Utilidad\",\r\n    accessor: \"netProfit\",\r\n    Cell: ({ value }) => {\r\n      return value ? \"$\" + value.toLocaleString() : \"\";\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.netProfit;\r\n      }, 0);\r\n      return \"$\" + Number(total.toFixed(2)).toLocaleString();\r\n    },\r\n  },\r\n  {\r\n    Header: \"Promedio\",\r\n    accessor: \"averageProfitPercent\",\r\n    Cell: ({ value }) => {\r\n      return value + \"%\";\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst SaleReportTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} showFooter loading={loading} />;\r\n};\r\n\r\nexport default SaleReportTable;\r\n","import { useEffect, useState } from 'react';\r\nimport SaleReportTable from 'components/SaleReportTable';\r\n\r\nconst SaleReportCard = ({ data = [], onFilter, loading }) => {\r\n  const [sorting, setSorting] = useState('rawProfit');\r\n  const [sortedData, setSortedData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const sorted = data.sort((a, b) => {\r\n      return b[sorting] - a[sorting];\r\n    });\r\n    setSortedData([...sorted]);\r\n  }, [sorting, data]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Ventas</h3>\r\n        <div>\r\n          <label style={{ marginRight: '5px' }}>Ordenar:</label>\r\n          <select onChange={(event) => setSorting(event.target.value)} value={sorting}>\r\n            <option value='quantity'>Cantidad</option>\r\n            <option value='rawProfit'>Bruto</option>\r\n            <option value='netProfit'>Utilidad</option>\r\n            <option value='averageProfitPercent'>Promedio</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className='card-body'>\r\n        <input\r\n          className='input-filter'\r\n          placeholder='Buscar...'\r\n          type='search'\r\n          onChange={(event) => onFilter(event.target.value)}\r\n        />\r\n        <SaleReportTable data={sortedData} loading={loading} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SaleReportCard;\r\n","import { ResponsivePie } from '@nivo/pie';\r\n\r\nconst GroupSales = ({ chartData = [], loading }) => {\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>GrÃ¡fico de categorÃ­as</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        {chartData.length > 0 && (\r\n          <ResponsivePie\r\n            data={chartData}\r\n            margin={{ top: 30, right: 20, bottom: 20, left: 20 }}\r\n            innerRadius={0.5}\r\n            padAngle={0.7}\r\n            cornerRadius={3}\r\n            activeOuterRadiusOffset={8}\r\n            arcLabel={function (e) {\r\n              return `${e.value} (${e.data.netProfit})`;\r\n            }}\r\n            borderWidth={1}\r\n            arcLinkLabelsSkipAngle={10}\r\n            arcLinkLabelsTextColor='#333333'\r\n            arcLinkLabelsThickness={2}\r\n            arcLinkLabelsColor={{ from: 'color' }}\r\n            arcLabelsSkipAngle={10}\r\n            arcLabelsTextColor={{\r\n              from: 'color',\r\n              modifiers: [['darker', 2]],\r\n            }}\r\n            tooltip={({ datum }) => {\r\n              return (\r\n                <div className='tooltip-container'>\r\n                  <span className='small-square' style={{ background: datum.color }}></span>\r\n                  <strong>{datum.label}</strong>\r\n                  <label>Bruto: </label>\r\n                  <span>${Number(datum.value).toLocaleString()}</span>\r\n                  <label>Utilidad: </label>\r\n                  <span>${Number(datum.data.netProfit).toLocaleString()}</span>\r\n                </div>\r\n              );\r\n            }}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupSales;\r\n","import { useContext, useState } from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport SaleReportCard from 'components/Cards/SaleReport';\r\nimport GroupSales from 'components/Cards/GroupSales';\r\nimport DatePicker from 'components/DatePicker';\r\nimport { fetchInvoiceReport } from 'api/invoice';\r\nimport debounce from 'lodash.debounce';\r\nimport { ShowNoeContext } from 'context/show_noe';\r\n\r\nconst VentasPage = () => {\r\n  const [data, setData] = useState({\r\n    filtered_invoices_report: [],\r\n    invoices_report: [],\r\n    group_sales_chart: [],\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { showNoe } = useContext(ShowNoeContext);\r\n\r\n  const onFilter = debounce((searchTerm) => {\r\n    const filteredData = data.invoices_report.filter((f) => f.product.toLowerCase().includes(searchTerm.toLowerCase()));\r\n    setData({ ...data, filtered_invoices_report: filteredData });\r\n  }, 500);\r\n\r\n  const onSubmit = async (event, dateRange) => {\r\n    event.preventDefault();\r\n\r\n    setLoading(true);\r\n    const response = await fetchInvoiceReport(dateRange, showNoe);\r\n    const chartData = response.group_sales_chart_data.reduce(\r\n      (acc, current) => [\r\n        ...acc,\r\n        {\r\n          id: current.categoria,\r\n          label: current.categoria,\r\n          value: current.rawProfit,\r\n          netProfit: current.netProfit,\r\n        },\r\n      ],\r\n      []\r\n    );\r\n    setData({ ...data, invoices_report: response.sales_report, group_sales_chart: chartData });\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <DatePicker onSubmit={onSubmit} loading={loading} />\r\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\r\n        <div className='col-12 col-xl-6'>\r\n          <SaleReportCard\r\n            data={data.filtered_invoices_report.length > 0 ? data.filtered_invoices_report : data.invoices_report}\r\n            onFilter={onFilter}\r\n            loading={loading}\r\n          />\r\n        </div>\r\n        <div className='col-12 col-xl-6'>\r\n          <GroupSales chartData={data.group_sales_chart} loading={loading} />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default VentasPage;\r\n","const columns = [\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'total_USD',\r\n    Cell: ({ value }) => {\r\n      return '$' + value.toLocaleString();\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from '../Table';\r\nimport columns from './columns';\r\n\r\nconst ClientReportTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} loading={loading} />;\r\n};\r\n\r\nexport default ClientReportTable;\r\n","import ClientReportTable from 'components/ClientReportTable';\r\n\r\nconst ClientReportCard = ({ loading, data = [], onFilter }) => {\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Mejores clientes</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        {data.length > 0 && (\r\n          <>\r\n            <input\r\n              className='input-filter'\r\n              placeholder='Buscar...'\r\n              type='search'\r\n              onChange={(event) => onFilter(event.target.value, 'client', 'client_report')}\r\n            />\r\n            <ClientReportTable data={data} loading={loading} />\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientReportCard;\r\n","import AsyncSelect from 'react-select/async';\r\nimport debounce from 'debounce-promise';\r\n\r\nconst SearchInput = ({ placeholder, loadOptions, defaultOptions = true, cacheOptions = true, onSelect }) => {\r\n  return (\r\n    <AsyncSelect\r\n      loadOptions={debounce((inputValue, callback) => loadOptions(inputValue, callback), 700)}\r\n      cacheOptions={cacheOptions}\r\n      defaultOptions={defaultOptions}\r\n      placeholder={placeholder}\r\n      onChange={onSelect ? onSelect : null}\r\n      loadingMessage={() => {\r\n        return 'Cargando...';\r\n      }}\r\n      isClearable\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchInput;\r\n","const BASE_URL = \"/api/products\";\r\nconst REPORTS_BASE_URL = \"/api/reports/products\";\r\n\r\nexport const fetchProducts = async ({ filter }) => {\r\n  const filterParam = filter ? `?filter=${filter}` : \"\";\r\n  const response = await fetch(BASE_URL + filterParam);\r\n  const products = await response.json();\r\n  return products;\r\n};\r\n\r\nexport const fetchCostFluctuation = async (productId) => {\r\n  const response = await fetch(`${BASE_URL}/cost-fluctuation/${productId}`);\r\n  const report = await response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchCostPerGroup = async () => {\r\n  const response = await fetch(`${BASE_URL}/cost/group`);\r\n  const report = await response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchProductsByGroup = async () => {\r\n  const response = await fetch(`${BASE_URL}/group`);\r\n  const products = await response.json();\r\n  return products;\r\n};\r\n\r\nexport const fetchProductPriceList = async (groupId) => {\r\n  const response = await fetch(`${BASE_URL}/price-list/${groupId}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchProductReports = async (productId) => {\r\n  const response = await fetch(`${REPORTS_BASE_URL}/cost-fluctuation/${productId}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchBestClients = async (productId, dateRange) => {\r\n  const response = await fetch(\r\n    `${REPORTS_BASE_URL}/best-clients/${productId}?from=${dateRange.from}&to=${dateRange.to}`\r\n  );\r\n  const report = response.json();\r\n  return report;\r\n};\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchProducts } from 'api/products';\r\n\r\nconst ProductSearch = ({ onSelect }) => {\r\n    const loadProductVariants = async (inputValue) => {\r\n        let products = await fetchProducts({ filter: inputValue });\r\n\r\n        if (products && products.length > 0) {\r\n            const records = products.map((record) => {\r\n                let product_name = record.Descripcion;\r\n\r\n                const product = {\r\n                    key: record.id,\r\n                    label: product_name,\r\n                    value: record,\r\n                };\r\n                return product;\r\n            });\r\n\r\n            return records;\r\n        }\r\n    };\r\n\r\n    const handleSelect = (option, { action }) => {\r\n        if (action === 'select-option') {\r\n            onSelect(option.value, action);\r\n        } else if (action === 'clear') {\r\n            onSelect(null, action);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SearchInput\r\n            loadOptions={loadProductVariants}\r\n            defaultOptions={false}\r\n            placeholder='Buscar producto...'\r\n            onSelect={handleSelect}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ProductSearch;\r\n","const columns = [\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n  {\r\n    Header: 'Cantidad',\r\n    accessor: 'quantity_total',\r\n  },\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'total_USD',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value.toLocaleString() : '';\r\n    },\r\n  },\r\n  {\r\n    Header: 'Utilidad',\r\n    accessor: 'utilidad',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value.toLocaleString() : 0;\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst ClientPerProductTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} loading={loading} />;\r\n};\r\n\r\nexport default ClientPerProductTable;\r\n","const BASE_URL = '/api/clients';\r\n\r\nexport const fetchClients = async ({ filter }) => {\r\n  const filterParam = filter ? `?filter=${filter}` : '';\r\n  const response = await fetch(`${BASE_URL}${filterParam}`);\r\n  const clients = response.json();\r\n  return clients;\r\n};\r\nexport const fetchBestClients = async (dateRange, showNoe) => {\r\n  const response = await fetch(`${BASE_URL}/best/?from=${dateRange.from}&to=${dateRange.to}&showNoe=${showNoe}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchBestClientsPerProduct = async (productId, dateRange, showNoe) => {\r\n  const response = await fetch(\r\n    `${BASE_URL}/best/product/${productId}?from=${dateRange.from}&to=${dateRange.to}&showNoe=${showNoe}`\r\n  );\r\n  const report = response.json();\r\n  return report;\r\n};\r\n\r\nexport const fetchMonthlyAverage = async (clientId, showNoe) => {\r\n  const response = await fetch(`${BASE_URL}/average/month/${clientId}?showNoe=${showNoe}`);\r\n  const report = response.json();\r\n  return report;\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport ProductSearch from 'components/ProductSearch';\r\nimport ClientPerProductTable from 'components/ClientPerProduct/Table';\r\nimport { fetchBestClientsPerProduct } from 'api/clients';\r\nimport { DateTime } from 'luxon';\r\n\r\nconst ClientPerProductCard = ({ dateRange }) => {\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedProduct && dateRange.from && dateRange.to) {\r\n      setLoading(true);\r\n      fetchBestClientsPerProduct(selectedProduct.IdProducto, dateRange).then((response) => {\r\n        setData([...response]);\r\n        setLoading(false);\r\n      });\r\n    } else if (!selectedProduct) {\r\n      setData([]);\r\n    }\r\n  }, [selectedProduct, dateRange]);\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Cliente por producto</h3>\r\n        <div style={{ display: 'flex', flexDirection: 'row', gap: '5px' }}>\r\n          <small>Desde: </small>\r\n          <small>{DateTime.fromISO(dateRange.from).toLocaleString()} </small>\r\n          <small>Hasta: </small>\r\n          <small>{DateTime.fromISO(dateRange.to).toLocaleString()} </small>\r\n        </div>\r\n      </div>\r\n      <div className='card-body'>\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            flex: '1',\r\n            justifyContent: 'space-between',\r\n          }}\r\n        >\r\n          <div style={{ width: '100%' }}>\r\n            <ProductSearch onSelect={setSelectedProduct} />\r\n          </div>\r\n        </div>\r\n        <ClientPerProductTable data={data} loading={loading} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientPerProductCard;\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchClients } from 'api/clients';\r\n\r\nconst ClientSearch = ({ onSelect }) => {\r\n    const loadClients = async (inputValue) => {\r\n        let clients = await fetchClients({ filter: inputValue });\r\n\r\n        if (clients && clients.length > 0) {\r\n            const records = clients.map((record) => {\r\n                const client = {\r\n                    key: record.IdCliente,\r\n                    label: record.name,\r\n                    value: record,\r\n                };\r\n                return client;\r\n            });\r\n\r\n            return records;\r\n        }\r\n    };\r\n\r\n    const handleSelect = (option, { action }) => {\r\n        if (action === 'select-option') {\r\n            onSelect && onSelect(option.value, action);\r\n        } else if (action === 'clear') {\r\n            onSelect && onSelect(null, action);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SearchInput\r\n            loadOptions={loadClients}\r\n            defaultOptions={false}\r\n            placeholder='Buscar cliente...'\r\n            onSelect={handleSelect}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ClientSearch;\r\n","import { useState, useEffect } from 'react';\r\nimport { fetchMonthlyAverage } from 'api/clients';\r\nimport ClientSearch from 'components/ClientSearch';\r\nimport { ResponsiveLine } from '@nivo/line';\r\n\r\nconst MonthlyAverageClient = () => {\r\n  const [selectedClient, setSelectedClient] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedClient) {\r\n      setLoading(true);\r\n      fetchMonthlyAverage(selectedClient.IdCliente).then((response) => {\r\n        console.log(response);\r\n        if (Object.keys(response).length > 0) {\r\n          setData([response]);\r\n        }\r\n        setLoading(false);\r\n      });\r\n    } else {\r\n      setData([]);\r\n    }\r\n  }, [selectedClient]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Promedio mensual</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        <ClientSearch onSelect={setSelectedClient} />\r\n        {data && (\r\n          <ResponsiveLine\r\n            data={data}\r\n            margin={{ top: 20, right: 30, bottom: 80, left: 40 }}\r\n            xScale={{ type: 'point' }}\r\n            yScale={{\r\n              type: 'linear',\r\n              min: 'auto',\r\n              max: 'auto',\r\n              stacked: true,\r\n              reverse: false,\r\n            }}\r\n            axisTop={null}\r\n            axisRight={null}\r\n            pointSize={10}\r\n            pointColor={{ theme: 'background' }}\r\n            pointBorderWidth={2}\r\n            pointBorderColor={{ from: 'serieColor' }}\r\n            pointLabelYOffset={-12}\r\n            useMesh={true}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MonthlyAverageClient;\r\n","import { useState } from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport ClientReportCard from 'components/Cards/ClientReport';\r\nimport ClientPerProductCard from 'components/ClientPerProduct/Card';\r\nimport MonthlyAverageClientCard from 'components/MonthlyAverageClient/Card';\r\nimport DatePicker from 'components/DatePicker';\r\nimport { fetchBestClients } from 'api/clients';\r\nimport { DateTime } from 'luxon';\r\nimport debounce from 'lodash.debounce';\r\n\r\nconst ClientesPage = () => {\r\n  const [data, setData] = useState({\r\n    filtered_best_clients: [],\r\n    best_clients: [],\r\n    group_sales_chart: [],\r\n  });\r\n  const [dateRange, setDateRange] = useState({\r\n    from: DateTime.now().toISODate(),\r\n    to: DateTime.now().toISODate(),\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onFilter = debounce((searchTerm) => {\r\n    const filteredData = data.best_clients.filter((f) => f.client.toLowerCase().includes(searchTerm.toLowerCase()));\r\n    setData({ ...data, filtered_best_clients: filteredData });\r\n  }, 500);\r\n\r\n  const onSubmit = async (event, dateRange) => {\r\n    event.preventDefault();\r\n\r\n    setLoading(true);\r\n    const response = await fetchBestClients(dateRange);\r\n    setDateRange(dateRange);\r\n    setData({ ...data, best_clients: response });\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <DatePicker onSubmit={onSubmit} loading={loading} />\r\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\r\n        <div className='col-12 col-xl-4'>\r\n          <ClientReportCard\r\n            data={data.filtered_best_clients.length > 0 ? data.filtered_best_clients : data.best_clients}\r\n            onFilter={onFilter}\r\n            loading={loading}\r\n          />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <ClientPerProductCard dateRange={dateRange} />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <MonthlyAverageClientCard />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ClientesPage;\r\n","import { useState, useEffect } from 'react';\r\nimport ProductSearch from 'components/ProductSearch';\r\nimport { ResponsiveLine } from '@nivo/line';\r\nimport { fetchCostFluctuation } from 'api/products';\r\n\r\nconst CostFluctuation = () => {\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (selectedProduct) {\r\n      const fetch_product_report = async () => {\r\n        setLoading(true);\r\n        const report_data = await fetchCostFluctuation(selectedProduct.IdProducto);\r\n        if (Object.keys(report_data).length > 0) {\r\n          setData([report_data]);\r\n        }\r\n        setLoading(false);\r\n      };\r\n\r\n      fetch_product_report();\r\n    } else if (!selectedProduct) {\r\n      setData([]);\r\n    }\r\n  }, [selectedProduct]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Promedio mensual costo</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        <ProductSearch onSelect={setSelectedProduct} />\r\n        <ResponsiveLine\r\n          data={data}\r\n          margin={{ top: 20, right: 30, bottom: 80, left: 40 }}\r\n          xScale={{ type: 'point' }}\r\n          yScale={{\r\n            type: 'linear',\r\n            min: 'auto',\r\n            max: 'auto',\r\n            stacked: true,\r\n            reverse: false,\r\n          }}\r\n          axisTop={null}\r\n          axisRight={null}\r\n          axisLeft={{\r\n            legend: 'Precio',\r\n            legendPosition: 'middle',\r\n            legendOffset: -30,\r\n          }}\r\n          axisBottom={{\r\n            legend: 'Meses',\r\n            legendPosition: 'middle',\r\n            legendOffset: 30,\r\n          }}\r\n          pointSize={10}\r\n          pointColor={{ theme: 'background' }}\r\n          pointBorderWidth={2}\r\n          pointBorderColor={{ from: 'serieColor' }}\r\n          pointLabelYOffset={-12}\r\n          useMesh={true}\r\n        />\r\n      </div>\r\n      {loading && (\r\n        <div className='position-absolute top-50 start-50 translate-middle'>\r\n          <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CostFluctuation;\r\n","import SearchInput from 'components/SearchInput';\r\nimport { fetchGroups } from 'api/groups';\r\nimport { useContext } from 'react';\r\nimport { ShowNoeContext } from 'context/show_noe';\r\n\r\nconst GroupSearch = ({ onSelect }) => {\r\n  const { showNoe } = useContext(ShowNoeContext);\r\n\r\n  const loadGroups = async (inputValue) => {\r\n    let groups = await fetchGroups({ filter: inputValue, showNoe });\r\n\r\n    if (groups && groups.length > 0) {\r\n      const records = groups.map((record) => {\r\n        const group = {\r\n          key: record.groupId,\r\n          label: record.name,\r\n          value: record,\r\n        };\r\n        return group;\r\n      });\r\n\r\n      return records;\r\n    }\r\n  };\r\n\r\n  const handleSelect = (option, { action }) => {\r\n    if (action === 'select-option') {\r\n      onSelect(option.value, action);\r\n    } else if (action === 'clear') {\r\n      onSelect(null, action);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%' }}>\r\n      <SearchInput loadOptions={loadGroups} placeholder='Buscar categorÃ­a...' onSelect={handleSelect} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupSearch;\r\n","const BASE_URL = '/api/groups';\r\n\r\nexport const fetchGroups = async ({ filter, showNoe }) => {\r\n  const filterParam = filter ? `?filter=${filter}&showNoe=${showNoe}` : '';\r\n  const response = await fetch(BASE_URL + filterParam);\r\n  const groups = await response.json();\r\n  return groups;\r\n};\r\n","const columns = [\r\n  {\r\n    Header: 'Producto',\r\n    accessor: 'product',\r\n  },\r\n  {\r\n    Header: 'Precio',\r\n    accessor: 'price',\r\n  },\r\n  {\r\n    Header: 'Inventario',\r\n    accessor: 'stock',\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst PriceListTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return <Table data={data} columns={memoizedColumns} loading={loading} />;\r\n};\r\n\r\nexport default PriceListTable;\r\n","const PriceListPDF = ({ data = [], group = '', currency }) => {\r\n  return (\r\n    <table id='price-list-table'>\r\n      <thead>\r\n        <tr>\r\n          <th>CategorÃ­a</th>\r\n          <th>Producto</th>\r\n          <th>{`Precio (${currency})`}</th>\r\n          <th>DISPONIBLE</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {data.map((row) => {\r\n          if (row.stock > 0) {\r\n            return (\r\n              <tr key={row.productId}>\r\n                <td>{group}</td>\r\n                <td>{row.product}</td>\r\n                <td>{row.price}</td>\r\n                <td>EN STOCK</td>\r\n              </tr>\r\n            );\r\n          } else {\r\n            return '';\r\n          }\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default PriceListPDF;\r\n","import { useState, useEffect, useRef, useContext } from 'react';\r\nimport { CurrencyRateContext } from '../../../context/currency_rate';\r\nimport GroupSearch from 'components/GroupSearch';\r\nimport { fetchProductPriceList } from 'api/products';\r\nimport PriceListTable from 'components/PriceListTable';\r\nimport { useReportFilter } from 'hooks/useReportFilter';\r\nimport { DateTime } from 'luxon';\r\nimport PriceListPDF from 'components/PDF/PriceList';\r\nimport { renderToStaticMarkup } from 'react-dom/server';\r\nimport { fetchProductsByGroup } from 'api/products';\r\nimport { Button } from 'react-bootstrap';\r\nimport CurrencyModal from 'components/Modals/CurrencyModal';\r\n\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nconst GroupStock = () => {\r\n  const [selectedGroup, setSelectedGroup] = useState(null);\r\n  const [data, setData] = useState([]);\r\n  const { filteredData, setFilteredData, onFilterDebounced } = useReportFilter(data);\r\n  const inputRef = useRef(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\r\n\r\n  const { currencyRate } = useContext(CurrencyRateContext);\r\n\r\n  useEffect(() => {\r\n    if (selectedGroup) {\r\n      const fetch_stock_by_group = async () => {\r\n        setLoading(true);\r\n        const data = await fetchProductPriceList(selectedGroup.groupId);\r\n        setFilteredData([]);\r\n        inputRef.current.value = '';\r\n        setData([...data]);\r\n        setLoading(false);\r\n      };\r\n\r\n      fetch_stock_by_group();\r\n    } else if (!selectedGroup) {\r\n      setData([]);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedGroup]);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>Lista de precios por categorÃ­a</h3>\r\n        <Button variant='primary' onClick={() => setShowCurrencyModal(true)}>\r\n          <span>Imprimir</span>\r\n        </Button>\r\n      </div>\r\n      <div className='card-body'>\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            gap: '20%',\r\n          }}\r\n        >\r\n          <GroupSearch onSelect={setSelectedGroup} />\r\n\r\n          <input\r\n            ref={inputRef}\r\n            className='input-filter'\r\n            placeholder='Buscar...'\r\n            type='search'\r\n            onChange={(event) => {\r\n              onFilterDebounced(event.target.value, 'product');\r\n            }}\r\n          />\r\n        </div>\r\n        <PriceListTable data={filteredData.length > 0 ? filteredData : data} loading={loading} />\r\n      </div>\r\n      {showCurrencyModal && (\r\n        <CurrencyModal\r\n          show={showCurrencyModal}\r\n          onClose={() => setShowCurrencyModal(false)}\r\n          onSubmit={async (currency) => {\r\n            console.log('currency', currency);\r\n            const groups = await fetchProductsByGroup();\r\n            var div = document.createElement('div');\r\n\r\n            const doc = new jsPDF('p', 'pt', 'a4');\r\n            const pdfName = `LISTA-DE-PRECIOS-${DateTime.fromISO(new Date().toISOString())\r\n              .toLocaleString()\r\n              .replaceAll('/', '-')}.pdf`;\r\n            doc.setProperties({\r\n              title: pdfName,\r\n            });\r\n            doc.setFontSize(16);\r\n            doc.text('ALIMENTOS DM MARKET, C.A.', 300, 25, { align: 'center' });\r\n            doc.setFontSize(6);\r\n            doc.text(\r\n              'CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.',\r\n              300,\r\n              35,\r\n              { align: 'center' }\r\n            );\r\n            doc.setFontSize(8);\r\n            doc.text('R.I.F.: J-41270446-0', 300, 45, { align: 'center' });\r\n            doc.text('TelÃ©fono:', 300, 55, { align: 'center' });\r\n\r\n            doc.setFontSize(9);\r\n            doc.text(`LISTA DE PRECIOS AL ${DateTime.fromISO(new Date().toISOString()).toLocaleString()}`, 300, 70, {\r\n              align: 'center',\r\n            });\r\n\r\n            Object.keys(groups).forEach((key) => {\r\n              let products = groups[key];\r\n\r\n              products = products.map((product) => {\r\n                if (currency === 'Bs') {\r\n                  console.log('yes currency is Bs');\r\n                  return {\r\n                    ...product,\r\n                    price: Number(product.price * currencyRate?.Cambio).toFixed(2),\r\n                  };\r\n                }\r\n\r\n                return product;\r\n              });\r\n\r\n              div.innerHTML = renderToStaticMarkup(<PriceListPDF data={products} group={key} currency={currency} />);\r\n              doc.autoTable({\r\n                html: div.firstChild,\r\n                styles: { cellPadding: 2 },\r\n                didParseCell: (data) => {\r\n                  if (data.section === 'body' && data.cell.raw && data.cell.raw.nodeName === 'TH') {\r\n                    data.cell.styles.fillColor = 'gray';\r\n                    data.cell.styles.color = 'white';\r\n                    data.cell.styles.cellWidth = 'wrap';\r\n                  }\r\n                },\r\n                margin: { top: 80 },\r\n              });\r\n              doc.addPage();\r\n            });\r\n            doc.save(pdfName);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupStock;\r\n","import { useState } from 'react';\r\nimport debounce from 'lodash.debounce';\r\n\r\nexport const useReportFilter = (data_to_filter, initial_state = []) => {\r\n  const [filteredData, setFilteredData] = useState(initial_state);\r\n\r\n  const onFilterDebounced = debounce((filterValue, filterKey, nestedKey) => {\r\n    if (nestedKey) {\r\n      nestedFilter(filterValue, filterKey, nestedKey);\r\n    } else {\r\n      filter(filterValue, filterKey);\r\n    }\r\n  }, 500);\r\n\r\n  const filter = (filterValue, filterKey) => {\r\n    const filtered = data_to_filter.filter((r) => r[filterKey].toLowerCase().includes(filterValue.toLowerCase()));\r\n    setFilteredData(filtered);\r\n    return filtered;\r\n  };\r\n\r\n  const nestedFilter = (filterValue, filterKey, nestedKey) => {\r\n    console.log('nestedKLey', nestedKey);\r\n    const filtered = data_to_filter[nestedKey].filter((r) => r[filterKey].toLowerCase().includes(filterValue.toLowerCase()));\r\n    setFilteredData({ ...filteredData, [nestedKey]: filtered });\r\n  };\r\n\r\n  return {\r\n    filter,\r\n    filteredData,\r\n    setFilteredData,\r\n    onFilterDebounced,\r\n  };\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { ResponsivePie } from '@nivo/pie';\r\nimport { fetchCostPerGroup } from 'api/products';\r\n\r\nconst ProductCostPerGroupCard = () => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      setLoading(true);\r\n      const response = await fetchCostPerGroup();\r\n      if (response && response.length) {\r\n        const chartData = response.reduce(\r\n          (acc, current) => [\r\n            ...acc,\r\n            {\r\n              id: current.group_name,\r\n              label: current.product,\r\n              value: current.total_cost,\r\n            },\r\n          ],\r\n          []\r\n        );\r\n        console.log(response, chartData);\r\n        setData(chartData);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    fetch();\r\n  }, []);\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-header'>\r\n        <h3>InversiÃ³n por categorÃ­a</h3>\r\n      </div>\r\n      <div className='card-body'>\r\n        {data.length > 0 && (\r\n          <ResponsivePie\r\n            data={data}\r\n            margin={{ top: 30, right: 20, bottom: 20, left: 20 }}\r\n            innerRadius={0.5}\r\n            padAngle={0.7}\r\n            cornerRadius={3}\r\n            valueFormat={(value) => value.toLocaleString()}\r\n            activeOuterRadiusOffset={8}\r\n            borderWidth={1}\r\n            arcLinkLabelsSkipAngle={10}\r\n            arcLinkLabelsTextColor='#333333'\r\n            arcLinkLabelsThickness={2}\r\n            arcLinkLabelsColor={{ from: 'color' }}\r\n            arcLabelsSkipAngle={10}\r\n            arcLabelsTextColor={{\r\n              from: 'color',\r\n              modifiers: [['darker', 2]],\r\n            }}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <div className='position-absolute top-50 start-50 translate-middle'>\r\n            <span className='spinner-border spinner-border-md' role='status' aria-hidden='true' />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCostPerGroupCard;\r\n","import Container from 'react-bootstrap/Container';\r\nimport CostFluctuationCard from 'components/Cards/CostFluctuation';\r\nimport GroupStock from 'components/Cards/GroupStock';\r\nimport ProductCostPerGroup from 'components/ProductCostPerGroup/Card';\r\n\r\nconst ProductosPage = () => {\r\n  return (\r\n    <Container fluid>\r\n      <div className='d-flex flex-column flex-xl-row justify-content-center gap-3'>\r\n        <div className='col-12 col-xl-4'>\r\n          <CostFluctuationCard />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <GroupStock />\r\n        </div>\r\n        <div className='col-12 col-xl-4'>\r\n          <ProductCostPerGroup />\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProductosPage;\r\n","import { DateTime } from 'luxon';\r\n\r\nconst columns = [\r\n  {\r\n    Header: 'ID',\r\n    accessor: 'invoiceId',\r\n  },\r\n  {\r\n    Header: 'Cliente',\r\n    accessor: 'client',\r\n  },\r\n\r\n  {\r\n    Header: 'Rif',\r\n    accessor: 'rif',\r\n  },\r\n  {\r\n    Header: 'Fecha',\r\n    accessor: 'createdAt',\r\n    Cell: ({ value }) => {\r\n      return DateTime.fromISO(value, { setZone: true }).toFormat('F');\r\n    },\r\n  },\r\n\r\n  {\r\n    Header: 'Total',\r\n    accessor: 'invoiceTotal',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value : '';\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.invoiceTotal;\r\n      }, 0);\r\n      return total ? '$' + Number(total).toLocaleString() : 0;\r\n    },\r\n  },\r\n\r\n  {\r\n    Header: 'ComisiÃ³n',\r\n    accessor: 'commissionTotal',\r\n    Cell: ({ value }) => {\r\n      return value ? '$' + value : '';\r\n    },\r\n    Footer: ({ data }) => {\r\n      const total = data.reduce((acc, current) => {\r\n        return acc + current.commissionTotal;\r\n      }, 0);\r\n      return total ? '$' + Number(total).toLocaleString() : 0;\r\n    },\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import { useMemo } from 'react';\r\nimport Table from 'components/Table';\r\nimport columns from './columns';\r\n\r\nconst EmployeeSalesTable = ({ data, loading }) => {\r\n  const memoizedColumns = useMemo(() => columns, []);\r\n\r\n  return (\r\n    <>\r\n      <div className='card'>\r\n        <div className='card-header'>\r\n          <h2>Reporte de ventas</h2>\r\n        </div>\r\n        <div className='card-body'>\r\n          <Table data={data} columns={memoizedColumns} loading={loading} showFooter maxHeight={400} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmployeeSalesTable;\r\n","const BASE_URL = '/api/employees';\r\n\r\nexport const getAllEmployees = async () => {\r\n  const response = await fetch(`${BASE_URL}`);\r\n  const employees = await response.json();\r\n  return employees;\r\n};\r\n\r\nexport const getComisionInfo = async (employeeId) => {\r\n  const response = await fetch(`${BASE_URL}/commissionInfo/${employeeId}`).catch((error) => ({ error }));\r\n  const commissionInfo = await response.json();\r\n  return commissionInfo;\r\n};\r\n\r\nexport const updateComisionInfo = async (employeeId, data) => {\r\n  const res = await fetch(`${BASE_URL}/commissionInfo/${employeeId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ commissionInfo: data }),\r\n  }).catch((error) => ({ error }));\r\n\r\n  const response = await res.json();\r\n  return response;\r\n};\r\n\r\nexport const getEmployeeSales = async (employeeId, dateRange, showNoe) => {\r\n  const response = await fetch(\r\n    `${BASE_URL}/sales/${employeeId}?from=${dateRange.from}&to=${dateRange.to}&showNoe=${showNoe}`\r\n  ).catch((error) => ({ error }));\r\n  const sales = await response.json();\r\n  return sales;\r\n};\r\n","import { getAllEmployees } from 'api/employees';\r\nimport SearchInput from 'components/SearchInput';\r\n\r\nconst EmployeeSearch = ({ onSelect }) => {\r\n  const loadEmployees = async (inputValue) => {\r\n    let employees = await getAllEmployees({ filter: inputValue });\r\n\r\n    if (employees && employees.length > 0) {\r\n      const records = employees.map((record) => {\r\n        const employee = {\r\n          key: record.id,\r\n          label: record.name,\r\n          value: record,\r\n        };\r\n        return employee;\r\n      });\r\n\r\n      return records;\r\n    }\r\n  };\r\n\r\n  const handleSelect = (option, { action }) => {\r\n    if (action === 'select-option') {\r\n      onSelect && onSelect(option.value, action);\r\n    } else if (action === 'clear') {\r\n      onSelect && onSelect(null, action);\r\n    }\r\n  };\r\n\r\n  return <SearchInput loadOptions={loadEmployees} placeholder='Buscar vendedor...' onSelect={handleSelect} />;\r\n};\r\n\r\nexport default EmployeeSearch;\r\n","import { useEffect, useState } from 'react';\r\nimport { Modal, Button, Alert, Spinner } from 'react-bootstrap';\r\nimport { getComisionInfo, updateComisionInfo } from 'api/employees';\r\n\r\nconst CommissionModal = ({ employee, show, onClose }) => {\r\n  const [commissionInfo, setCommissionInfo] = useState({ data: [], loading: false });\r\n  const [formData, setFormData] = useState({});\r\n  const [submissionState, setSubmissionState] = useState({\r\n    loading: false,\r\n    error: false,\r\n    message: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    setCommissionInfo({ ...commissionInfo, loading: true });\r\n    getComisionInfo(employee.id).then((data) => {\r\n      setCommissionInfo({ data, loading: false });\r\n    });\r\n  }, []);\r\n\r\n  const sanitizedFormData = () => {\r\n    const data = {};\r\n    Object.keys(formData).map((key) => {\r\n      if (formData[key]) {\r\n        data[key] = Number(formData[key]);\r\n      }\r\n    });\r\n    return data;\r\n  };\r\n\r\n  const submitForm = async (event) => {\r\n    event.preventDefault();\r\n    if (!submissionState.loading) {\r\n      setSubmissionState({ ...submissionState, loading: true, text: '' });\r\n      const response = await updateComisionInfo(employee.id, sanitizedFormData());\r\n      if (response.error) {\r\n        setSubmissionState({ error: true, text: response.error.message, loading: false });\r\n      } else if (response.success) {\r\n        setSubmissionState({ error: false, text: 'El recurso fue actualizado con Ã©xito', loading: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  const modalBody = () => {\r\n    if (commissionInfo.data.error) {\r\n      return <Alert variant='danger'>{commissionInfo.data.error.message}</Alert>;\r\n    } else if (commissionInfo.loading) {\r\n      return <Spinner animation='border' />;\r\n    } else {\r\n      return commissionInfo.data.map((info) => {\r\n        return (\r\n          <div key={info.groupId} className='d-flex flex-column col-sm-4'>\r\n            <label className='form-label'>{info.group}</label>\r\n            <div className='input-group mb-3'>\r\n              <span className='input-group-text' id='basic-addon1'>\r\n                %\r\n              </span>\r\n              <input\r\n                type='number'\r\n                min={0}\r\n                step={0.01}\r\n                className='form-control'\r\n                placeholder={info.commission || 0}\r\n                value={formData[info.groupId] || ''}\r\n                onChange={(e) => setFormData({ ...formData, [info.groupId]: e.target.value })}\r\n                onFocus={(e) => e.target.select()}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} size='lg' onHide={onClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>{employee.name}</Modal.Title>\r\n      </Modal.Header>\r\n      <form onSubmit={submitForm}>\r\n        <Modal.Body>\r\n          <div className='row justify-content-center'>{modalBody()}</div>\r\n        </Modal.Body>\r\n        <Modal.Footer className='px-0 pb-2'>\r\n          <div className='container-fluid d-flex justify-content-between align-items-center gap-5'>\r\n            <div className='col-9'>\r\n              {submissionState.text && (\r\n                <Alert variant={submissionState.error ? 'danger' : 'success'} className='mb-0 mt-0 p-1'>\r\n                  {submissionState.text}\r\n                </Alert>\r\n              )}\r\n            </div>\r\n            <div className='col-3 d-flex flex-wrap gap-2'>\r\n              <Button\r\n                type='submit'\r\n                variant='success'\r\n                disabled={Object.keys(formData).length === 0 || submissionState.loading}\r\n              >\r\n                Enviar\r\n              </Button>\r\n              <Button variant='danger' onClick={onClose}>\r\n                Cerrar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Modal.Footer>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CommissionModal;\r\n","import { useContext, useState } from 'react';\r\nimport EmployeeSearch from 'employees/Search';\r\nimport { Button } from 'react-bootstrap';\r\nimport DatePicker from 'components/DatePicker';\r\nimport CommissionModal from 'employees/Modal/Commission';\r\nimport { getEmployeeSales } from 'api/employees';\r\nimport { ShowNoeContext } from 'context/show_noe';\r\n\r\nconst EmployeeActions = ({ onDateSubmit }) => {\r\n  const [employeeSalesLoading, setEmployeeSalesLoading] = useState(false);\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n  const [showCommissionModal, setShowCommissionModal] = useState(false);\r\n  const { showNoe } = useContext(ShowNoeContext);\r\n\r\n  const submitDateHandler = (event, dateRange) => {\r\n    event.preventDefault();\r\n    if (selectedEmployee) {\r\n      setEmployeeSalesLoading(true);\r\n      getEmployeeSales(selectedEmployee.id, dateRange, showNoe).then((response) => {\r\n        setEmployeeSalesLoading(false);\r\n        onDateSubmit(response);\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className='col-12 mb-4'>\r\n        <div className='row justify-content-end'>\r\n          <div className='col-6 mb-2'>\r\n            <EmployeeSearch onSelect={setSelectedEmployee} />\r\n          </div>\r\n          <div className='col-4'>\r\n            <Button variant='primary' disabled={!selectedEmployee} onClick={() => setShowCommissionModal(true)}>\r\n              Asignar comisiÃ³n\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <DatePicker onSubmit={submitDateHandler} loading={employeeSalesLoading} submitDisabled={!selectedEmployee} />\r\n      </div>\r\n      {showCommissionModal && (\r\n        <CommissionModal\r\n          show={showCommissionModal}\r\n          onClose={() => setShowCommissionModal(false)}\r\n          employee={selectedEmployee}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmployeeActions;\r\n","import { useState } from 'react';\r\nimport EmployeeSalesTable from 'employees/Table/Sales';\r\nimport EmployeeActions from 'employees/Actions';\r\n\r\nconst EmployeesPage = () => {\r\n  const [employeeSales, setEmployeeSales] = useState([]);\r\n\r\n  const onSubmit = (sales) => {\r\n    setEmployeeSales(sales);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className='row justify-content-center'>\r\n        <div className='col-sm-12 col-xl-8'>\r\n          <EmployeeActions onDateSubmit={onSubmit} />\r\n          <EmployeeSalesTable data={employeeSales} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmployeesPage;\r\n","import { useEffect, useContext } from 'react';\r\n\r\nimport { CurrencyRateContext } from './context/currency_rate';\r\n\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Nav from 'react-bootstrap/Nav';\r\n\r\nimport InvoicesPage from 'pages/invoices';\r\nimport VentasPage from 'pages/ventas';\r\nimport ClientesPage from 'pages/clientes';\r\nimport ProductosPage from 'pages/productos';\r\nimport EmployeesPage from 'pages/employees';\r\n\r\nimport { ShowNoeContext } from 'context/show_noe';\r\n\r\nimport { Link, Switch, Route, useLocation } from 'react-router-dom';\r\nimport { fetchCurrencyRates } from './api/currency_rates';\r\n\r\nfunction App() {\r\n  const location = useLocation();\r\n  const { currencyRate, setCurrencyRate } = useContext(CurrencyRateContext);\r\n  const { showNoe, setShowNoe } = useContext(ShowNoeContext);\r\n\r\n  useEffect(() => {\r\n    fetchCurrencyRates().then((response) => {\r\n      if (response.status === 200) {\r\n        setCurrencyRate(response.data.find((currency) => currency.Simbolo === 'BsS'));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className='App bg-dark'>\r\n      <Container fluid id='main' className='m-0 p-0 vh-100'>\r\n        <Navbar bg='dark' variant='dark' className='border-bottom' expand='lg'>\r\n          <Container fluid>\r\n            <Navbar.Brand>SISTEMA DE REPORTES</Navbar.Brand>\r\n\r\n            <Navbar.Toggle aria-controls='basic-navbar-nav' />\r\n            <Navbar.Collapse id='basic-navbar-nav'>\r\n              <Container fluid className='d-flex gap-5 justify-content-between align-items-center'>\r\n                <Nav className='me-auto'>\r\n                  {['facturas', 'ventas', 'clientes', 'productos', 'vendedores'].map((route, index) => {\r\n                    return (\r\n                      <Link\r\n                        key={index}\r\n                        to={`/${route}`}\r\n                        className={`text-decoration-none mx-1 text-secondary nav-link ${\r\n                          (location.pathname.includes(route) && 'active') || ''\r\n                        }`}\r\n                      >\r\n                        <span style={{ textTransform: 'capitalize' }}>{route}</span>\r\n                      </Link>\r\n                    );\r\n                  })}\r\n                </Nav>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                  <span className='text-light'>Facturas</span>\r\n                  <div>\r\n                    <label className='switch'>\r\n                      <input type='checkbox' checked={showNoe} onChange={(e) => setShowNoe(e.target.checked)} />\r\n                      <span className='slider round'></span>\r\n                    </label>\r\n                  </div>\r\n                  <span className='text-light'>Notas de entrega</span>\r\n                </div>\r\n                <div className='text-light'>\r\n                  <span>\r\n                    REF: <span className='fw-bold text-info'>{currencyRate?.Cambio}</span> {currencyRate?.Simbolo}\r\n                  </span>\r\n                </div>\r\n              </Container>\r\n            </Navbar.Collapse>\r\n          </Container>\r\n        </Navbar>\r\n\r\n        <Container fluid className='py-3'>\r\n          <Switch>\r\n            <Route path='/facturas' component={InvoicesPage} />\r\n            <Route path='/ventas' component={VentasPage} />\r\n            <Route path='/clientes' component={ClientesPage} />\r\n            <Route path='/productos' component={ProductosPage} />\r\n            <Route path='/vendedores' component={EmployeesPage} />\r\n          </Switch>\r\n        </Container>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const BASE_URL = '/api/currency_rates';\r\n\r\nexport const fetchCurrencyRates = async () => {\r\n  const response = await fetch(`${BASE_URL}`);\r\n  const data = await response.json();\r\n\r\n  return { status: response.status, data };\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { CurrencyRateProvider } from './context/currency_rate';\r\nimport { ShowNoesProvider } from 'context/show_noe';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <CurrencyRateProvider>\r\n        <ShowNoesProvider>\r\n          <App />\r\n        </ShowNoesProvider>\r\n      </CurrencyRateProvider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}