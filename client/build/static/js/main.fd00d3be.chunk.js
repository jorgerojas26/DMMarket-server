(this["webpackJsonpreport-demo"]=this["webpackJsonpreport-demo"]||[]).push([[0],{300:function(e,t,n){},446:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(36),o=n.n(a),s=(n(300),n(6)),i=n(1),l=c.a.createContext(),u=function(e){var t=e.children,n=Object(r.useState)(0),c=Object(s.a)(n,2),a=c[0],o=c[1];return Object(i.jsx)(l.Provider,{value:{currencyRate:a,setCurrencyRate:o},children:t})},d=n(118),j=n(52),b=n(290),O=n(5),f=n(11),p=n(4),h=n(38),x=n(485),m=function(e){var t=e.onSubmit,n=e.loading,c=e.submitDisabled,a=Object(r.useState)({from:h.DateTime.now().toISODate(),to:h.DateTime.now().toISODate()}),o=Object(s.a)(a,2),l=o[0],u=o[1];return Object(i.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-center mb-3 gap-2",children:[Object(i.jsxs)("div",{className:"d-flex flex-row justify-content-center align-items-center gap-2 text-light",children:[Object(i.jsx)("label",{className:"d-none d-sm-flex",children:"Desde:"}),Object(i.jsx)("input",{type:"date",value:l.from,onChange:function(e){return u(Object(p.a)(Object(p.a)({},l),{},{from:e.target.value}))}}),Object(i.jsx)("label",{className:"d-none d-sm-flex",children:"Hasta:"}),Object(i.jsx)("input",{type:"date",value:l.to,onChange:function(e){return u(Object(p.a)(Object(p.a)({},l),{},{to:e.target.value}))}})]}),Object(i.jsxs)(x.a,{variant:"primary",onClick:function(e){return t(e,l)},disabled:n||c,children:[n&&Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(i.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}),!n&&Object(i.jsx)("span",{className:"mr-2",children:"Enviar"})]})]})},v="/api/invoices",g=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r,c,a,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.from,r=t.to,c=t.showNoe,e.next=3,fetch("".concat(v,"/sales?from=").concat(n,"&to=").concat(r,"&showNoe=").concat(c));case 3:return a=e.sent,e.next=6,a.json();case 6:return o=e.sent,console.log("From fetchInvoiceReport: ",o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r,c,a,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.from,r=t.to,c=t.showNoe,e.next=3,fetch("".concat(v,"?from=").concat(n,"&to=").concat(r,"&showNoe=").concat(c));case 3:return a=e.sent,e.next=6,a.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=n(185),N=n(56),y=n.n(N),C=function(e){var t=e.data,n=void 0===t?[]:t,a=e.loading,o=e.columns,s=void 0===o?[]:o,l=e.filterPlaceholder,u=e.onFilter,d=e.maxHeight,j=void 0===d?350:d,b=e.showFooter,O=void 0!==b&&b,f=e.onRowSelect,h=e.multiSelect,x=void 0!==h&&h,m=Object(S.useTable)({columns:s,data:n},S.useRowSelect),v=m.getTableProps,g=m.getTableBodyProps,w=m.headerGroups,N=m.footerGroups,C=m.rows,k=m.prepareRow,L=m.state,T=y()((function(e){u(e)}),500);Object(r.useEffect)((function(){if(x){var e=C.filter((function(e){return e.isSelected}));f(e.map((function(e){return e.original})))}else{var t;f&&f(null===(t=C.find((function(e){return e.isSelected})))||void 0===t?void 0:t.original)}}),[L,x,f]);var I=c.a.memo((function(e){var t=e.row;return Object(i.jsx)("tr",Object(p.a)(Object(p.a)(Object(p.a)({},t.getRowProps({onClick:f?function(e){var n=Object.keys(L.selectedRowIds)[Object.keys(L.selectedRowIds).length-1],r=t.index;if(e.ctrlKey&&!e.shiftKey)t.toggleRowSelected();else if(e.shiftKey&&!e.ctrlKey){if(x)if(r>=n)for(var c=n;c<=r;c++)c!==n&&C[c].toggleRowSelected();else for(var a=n;a>=r;a--)a!==n&&C[a].toggleRowSelected()}else t.isSelected||(L.selectedRowIds={}),t.toggleRowSelected()}:null})),t.getToggleRowSelectedProps({})),{},{children:t.cells.map((function(e,n){return Object(i.jsx)("td",Object(p.a)(Object(p.a)({title:e.value},e.getCellProps()),{},{style:{background:t.isSelected?"lightblue":"white",color:t.isSelected?"white":"black"},children:e.render("Cell")}))}))}))}),[n]);return Object(i.jsxs)("div",{children:[u&&Object(i.jsx)("div",{className:"table-filter-container",children:Object(i.jsx)("input",{className:"table-filter-input",onChange:function(e){return T(e.target.value)},placeholder:l,autoFocus:!0})}),Object(i.jsxs)("div",{className:"table-container",style:{maxHeight:j},children:[Object(i.jsxs)("table",Object(p.a)(Object(p.a)({},v()),{},{children:[Object(i.jsx)("thead",{children:w.map((function(e){return Object(i.jsx)("tr",Object(p.a)(Object(p.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(i.jsx)("th",Object(p.a)(Object(p.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(i.jsx)("tbody",Object(p.a)(Object(p.a)({},g()),{},{children:C.map((function(e){return k(e),Object(i.jsx)(I,{row:e})}))})),O&&n.length>0&&Object(i.jsx)("tfoot",{children:N.map((function(e){return Object(i.jsx)("tr",Object(p.a)(Object(p.a)({},e.getFooterGroupProps()),{},{children:e.headers.map((function(e){return Object(i.jsx)("td",Object(p.a)(Object(p.a)({},e.getFooterProps()),{},{children:e.render("Footer")}))}))}))}))})]})),a&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},k=n(491),L=n(271),T=n.n(L),I=[{Header:"ID",accessor:"invoiceId"},{Header:"Cliente",accessor:"client"},{Header:"RIF",accessor:"rif"},{Header:"TOTAL",accessor:"total",Cell:function(e){var t=e.value;return"$".concat(t?t.toFixed(2):"")}},{Header:"Fecha",accessor:"createdAt",Cell:function(e){var t=e.value;return T()(t).format("MMM DD, YYYY")}}],R=function(e){var t=e.data,n=e.loading,c=e.onRowSelect,a=Object(r.useMemo)((function(){return I}),[]);return Object(i.jsxs)(k.a,{className:"noselect",children:[Object(i.jsx)(k.a.Header,{children:Object(i.jsx)("h3",{children:"Facturas"})}),Object(i.jsx)(k.a.Body,{children:Object(i.jsx)(C,{data:t,columns:a,loading:n,onRowSelect:c,multiSelect:!0})})]})},P=n(489);var D=function(e){var t=e.show,n=e.onClose,r=e.onSubmit;return Object(i.jsxs)(P.a,{show:t,size:"sm",onHide:n,children:[Object(i.jsx)(P.a.Header,{closeButton:!0,onHide:n,children:Object(i.jsx)(P.a.Title,{children:"Moneda"})}),Object(i.jsxs)(P.a.Body,{children:[Object(i.jsx)(x.a,{className:"w-100 mb-3",onClick:function(){return r("USD")},children:"USD"}),Object(i.jsx)(x.a,{className:"w-100",onClick:function(){return r("Bs")},children:"Bs"})]})]})},F=n(20),E=function(e,t,n,r){return{content:[{text:"ALIMENTOS DM MARKET, C.A.",style:"header"},{text:"CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.",style:"header"},{text:"R.I.F.: J-41270446-0",style:"header"},{text:h.DateTime.local().toFormat("dd/MM/yyyy"),style:"header"},{style:"table",table:{widths:[85,"*","auto","auto"],body:[["CATEGOR\xcdA","PRODUCTO","CANTIDAD","TOTAL (".concat(r,")")]].concat(Object(F.a)(e.map((function(e){return[e.group,e.product,e.quantity,e.total]}))),[["","",{text:t,bold:!0},{text:"".concat(r," ").concat(n),bold:!0}]])}}],styles:{header:{alignment:"center"},table:{margin:[0,20,0,0]}},pageMargins:40,pageSize:"LETTER"}},H=n(186),A=n.n(H),_=n(272),M=n.n(_);A.a.vfs=M.a.pdfMake.vfs;var B=function(e){var t=e.data,n=e.totalSummary,c=Object(r.useContext)(l).currencyRate,a=Object(r.useState)(!1),o=Object(s.a)(a,2),u=o[0],d=o[1],j=Object(r.useMemo)((function(){return t?t.reduce((function(e,t){return e+t.quantity}),0):0}),[t]),b=Object(r.useMemo)((function(){return t?t.sort((function(e,t){return e.group.toLowerCase().localeCompare(t.group.toLowerCase())||e.product.toLowerCase().localeCompare(t.product.toLowerCase())})):[]}),[t]),h=Object(r.useMemo)((function(){return[{Header:"Categor\xeda",accessor:"group"},{Header:"ID",accessor:"productId"},{Header:"Producto",accessor:"product"},{Header:"Cantidad",accessor:"quantity",Footer:function(){return Object(i.jsx)("span",{children:j?j.toFixed(2):""})}},{Header:"Total",accessor:"total",Footer:function(){return Object(i.jsxs)("span",{children:["$",n?n.toFixed(2):""]})}}]}),[n,j]);return console.log(b),Object(i.jsxs)(k.a,{children:[Object(i.jsx)(k.a.Header,{children:Object(i.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(i.jsx)("h3",{children:"Productos"}),Object(i.jsx)(x.a,{onClick:function(){return d(!0)},children:"Imprimir"})]})}),Object(i.jsx)(k.a.Body,{children:Object(i.jsx)(C,{data:b,columns:h,showFooter:!0})}),u&&Object(i.jsx)(D,{show:u,onClose:function(){return d(!1)},onSubmit:function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=b,"Bs"===t&&(r=r.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{total:Number(e.price*e.quantity*(null===c||void 0===c?void 0:c.Cambio)).toFixed(2)})}))),a=E(r,j,n,t),A.a.createPdf(a).open();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},U=Object(r.createContext)({showNoe:!1,setShowNoe:function(){}}),$=function(e){var t,n=e.children,c=Object(r.useState)(null!==(t=localStorage.getItem("showNoe"))&&void 0!==t&&t),a=Object(s.a)(c,2),o=a[0],l=a[1];return Object(r.useEffect)((function(){var e;localStorage.setItem("showNoe",null!==(e=o.toString())&&void 0!==e&&e)}),[o]),Object(i.jsx)(U.Provider,{value:{showNoe:o,setShowNoe:l},children:n})},q=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(r.useState)([]),b=Object(s.a)(d,2),h=b[0],x=b[1],v=Object(r.useContext)(U).showNoe,g=Object(r.useMemo)((function(){if(!h||0===h.length)return[];var e={};return h.forEach((function(t){t.products.forEach((function(t){e[t.productId]||(e[t.productId]=Object(p.a)(Object(p.a)({},t),{},{quantity:0})),e[t.productId].quantity+=t.quantity,e[t.productId].total=e[t.productId].quantity*e[t.productId].price,e[t.productId].total=e[t.productId].total.toFixed(2)}))})),Object.values(e)}),[h]),S=Object(r.useMemo)((function(){return h&&0!==h.length?h.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.total)}),0):0}),[h]),N=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n){var r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),e.next=4,w(Object(p.a)(Object(p.a)({},n),{},{showNoe:v}));case 4:r=e.sent,u(r),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(m,{onSubmit:N,loading:n}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(R,{data:l,loading:n,onRowSelect:x})}),Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(B,{data:g,loading:n,totalSummary:S})})]})]})},z=[{Header:"Producto",accessor:"product"},{Header:"Cantidad",accessor:"quantity",Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.quantity}),0);return Number(t).toFixed(2)}},{Header:"Bruto",accessor:"rawProfit",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.rawProfit}),0);return"$"+Number(t.toFixed(2)).toLocaleString()}},{Header:"Utilidad",accessor:"netProfit",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.netProfit}),0);return"$"+Number(t.toFixed(2)).toLocaleString()}},{Header:"Promedio",accessor:"averageProfitPercent",Cell:function(e){return e.value+"%"}}],G=function(e){var t=e.data,n=e.loading,c=Object(r.useMemo)((function(){return z}),[]);return Object(i.jsx)(C,{data:t,columns:c,showFooter:!0,loading:n})},K=function(e){var t=e.data,n=void 0===t?[]:t,c=e.onFilter,a=e.loading,o=Object(r.useState)("rawProfit"),l=Object(s.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)([]),b=Object(s.a)(j,2),O=b[0],f=b[1];return Object(r.useEffect)((function(){var e=n.sort((function(e,t){return t[u]-e[u]}));f(Object(F.a)(e))}),[u,n]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsxs)("div",{className:"card-header",children:[Object(i.jsx)("h3",{children:"Ventas"}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{style:{marginRight:"5px"},children:"Ordenar:"}),Object(i.jsxs)("select",{onChange:function(e){return d(e.target.value)},value:u,children:[Object(i.jsx)("option",{value:"quantity",children:"Cantidad"}),Object(i.jsx)("option",{value:"rawProfit",children:"Bruto"}),Object(i.jsx)("option",{value:"netProfit",children:"Utilidad"}),Object(i.jsx)("option",{value:"averageProfitPercent",children:"Promedio"})]})]})]}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("input",{className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){return c(e.target.value)}}),Object(i.jsx)(G,{data:O,loading:a})]})]})},W=n(97),Y=function(e){var t=e.chartData,n=void 0===t?[]:t,r=e.loading;return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Gr\xe1fico de categor\xedas"})}),Object(i.jsxs)("div",{className:"card-body",children:[n.length>0&&Object(i.jsx)(W.a,{data:n,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,arcLabel:function(e){return"".concat(e.value," (").concat(e.data.netProfit,")")},borderWidth:1,arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:function(e){var t=e.datum;return Object(i.jsxs)("div",{className:"tooltip-container",children:[Object(i.jsx)("span",{className:"small-square",style:{background:t.color}}),Object(i.jsx)("strong",{children:t.label}),Object(i.jsx)("label",{children:"Bruto: "}),Object(i.jsxs)("span",{children:["$",Number(t.value).toLocaleString()]}),Object(i.jsx)("label",{children:"Utilidad: "}),Object(i.jsxs)("span",{children:["$",Number(t.data.netProfit).toLocaleString()]})]})}}),r&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},J=function(){var e=Object(r.useState)({filtered_invoices_report:[],invoices_report:[],group_sales_chart:[]}),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(r.useContext)(U).showNoe,b=y()((function(e){var t=n.invoices_report.filter((function(t){return t.product.toLowerCase().includes(e.toLowerCase())}));c(Object(p.a)(Object(p.a)({},n),{},{filtered_invoices_report:t}))}),500),h=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,r){var a,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),e.next=4,g(Object(p.a)(Object(p.a)({},r),{},{showNoe:d}));case 4:a=e.sent,o=a.group_sales_chart_data.reduce((function(e,t){return[].concat(Object(F.a)(e),[{id:t.categoria,label:t.categoria,value:t.rawProfit,netProfit:t.netProfit}])}),[]),c(Object(p.a)(Object(p.a)({},n),{},{invoices_report:a.sales_report,group_sales_chart:o})),u(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(m,{onSubmit:h,loading:l}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(K,{data:n.filtered_invoices_report.length>0?n.filtered_invoices_report:n.invoices_report,onFilter:b,loading:l})}),Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(Y,{chartData:n.group_sales_chart,loading:l})})]})]})},Z=[{Header:"Cliente",accessor:"client"},{Header:"Total",accessor:"total_USD",Cell:function(e){return"$"+e.value.toLocaleString()}}],V=function(e){var t=e.data,n=e.loading,c=Object(r.useMemo)((function(){return Z}),[]);return Object(i.jsx)(C,{data:t,columns:c,loading:n})},Q=function(e){var t=e.loading,n=e.data,r=void 0===n?[]:n,c=e.onFilter;return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Mejores clientes"})}),Object(i.jsx)("div",{className:"card-body",children:r.length>0&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",{className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){return c(e.target.value,"client","client_report")}}),Object(i.jsx)(V,{data:r,loading:t})]})})]})},X=n(289),ee=n(284),te=n.n(ee),ne=function(e){var t=e.placeholder,n=e.loadOptions,r=e.defaultOptions,c=void 0===r||r,a=e.cacheOptions,o=void 0===a||a,s=e.onSelect;return Object(i.jsx)(X.a,{loadOptions:te()((function(e,t){return n(e,t)}),700),cacheOptions:o,defaultOptions:c,placeholder:t,onChange:s||null,loadingMessage:function(){return"Cargando..."},isClearable:!0})},re="/api/products",ce=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter,r=n?"?filter=".concat(n):"",e.next=4,fetch(re+r);case 4:return c=e.sent,e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/cost-fluctuation/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/cost/group"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/group"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/price-list/").concat(t));case 2:return n=e.sent,r=n.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){var t=e.onSelect,n=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce({filter:t});case 2:if(!((n=e.sent)&&n.length>0)){e.next=6;break}return r=n.map((function(e){var t=e.Descripcion;return{key:e.id,label:t,value:e}})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(ne,{loadOptions:n,defaultOptions:!1,placeholder:"Buscar producto...",onSelect:function(e,n){var r=n.action;"select-option"===r?t(e.value,r):"clear"===r&&t(null,r)}})},ue=[{Header:"Cliente",accessor:"client"},{Header:"Cantidad",accessor:"quantity_total"},{Header:"Total",accessor:"total_USD",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():""}},{Header:"Utilidad",accessor:"utilidad",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():0}}],de=function(e){var t=e.data,n=e.loading,c=Object(r.useMemo)((function(){return ue}),[]);return Object(i.jsx)(C,{data:t,columns:c,loading:n})},je="/api/clients",be=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter,r=n?"?filter=".concat(n):"",e.next=4,fetch("".concat(je).concat(r));case 4:return c=e.sent,a=c.json(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n){var r,c;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(je,"/best/?from=").concat(t.from,"&to=").concat(t.to,"&showNoe=").concat(n));case 2:return r=e.sent,c=r.json(),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n,r){var c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(je,"/best/product/").concat(t,"?from=").concat(n.from,"&to=").concat(n.to,"&showNoe=").concat(r));case 2:return c=e.sent,a=c.json(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pe=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n){var r,c;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(je,"/average/month/").concat(t,"?showNoe=").concat(n));case 2:return r=e.sent,c=r.json(),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(e){var t=e.dateRange,n=Object(r.useState)(null),c=Object(s.a)(n,2),a=c[0],o=c[1],l=Object(r.useState)([]),u=Object(s.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)(!1),O=Object(s.a)(b,2),f=O[0],p=O[1],x=Object(r.useContext)(U).showNoe;return Object(r.useEffect)((function(){a&&t.from&&t.to?(p(!0),fe(a.IdProducto,t,x).then((function(e){e&&!e.error&&j(Object(F.a)(e)),p(!1)}))):a||j([])}),[a,t,x]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsxs)("div",{className:"card-header",children:[Object(i.jsx)("h3",{children:"Cliente por producto"}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"5px"},children:[Object(i.jsx)("small",{children:"Desde: "}),Object(i.jsxs)("small",{children:[h.DateTime.fromISO(t.from).toLocaleString()," "]}),Object(i.jsx)("small",{children:"Hasta: "}),Object(i.jsxs)("small",{children:[h.DateTime.fromISO(t.to).toLocaleString()," "]})]})]}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("div",{style:{display:"flex",flex:"1",justifyContent:"space-between"},children:Object(i.jsx)("div",{style:{width:"100%"},children:Object(i.jsx)(le,{onSelect:o})})}),Object(i.jsx)(de,{data:d,loading:f})]})]})},xe=function(e){var t=e.onSelect,n=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be({filter:t});case 2:if(!((n=e.sent)&&n.length>0)){e.next=6;break}return r=n.map((function(e){return{key:e.IdCliente,label:e.name,value:e}})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(ne,{loadOptions:n,defaultOptions:!1,placeholder:"Buscar cliente...",onSelect:function(e,n){var r=n.action;"select-option"===r?t&&t(e.value,r):"clear"===r&&t&&t(null,r)}})},me=n(148),ve=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(r.useState)(!1),j=Object(s.a)(d,2),b=j[0],O=j[1],f=Object(r.useContext)(U).showNoe;return Object(r.useEffect)((function(){n?(O(!0),pe(n.IdCliente,f).then((function(e){console.log(e),Object.keys(e).length>0&&u([e]),O(!1)}))):u([])}),[n,f]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Promedio mensual"})}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)(xe,{onSelect:c}),l&&Object(i.jsx)(me.a,{data:l,margin:{top:20,right:30,bottom:80,left:40},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisTop:null,axisRight:null,pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0}),b&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},ge=function(){var e=Object(r.useState)({filtered_best_clients:[],best_clients:[],group_sales_chart:[]}),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({from:h.DateTime.now().toISODate(),to:h.DateTime.now().toISODate()}),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(r.useState)(!1),b=Object(s.a)(d,2),x=b[0],v=b[1],g=Object(r.useContext)(U).showNoe,w=y()((function(e){var t=n.best_clients.filter((function(t){return t.client.toLowerCase().includes(e.toLowerCase())}));c(Object(p.a)(Object(p.a)({},n),{},{filtered_best_clients:t}))}),500),S=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,r){var a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!0),e.next=4,Oe(r,g);case 4:a=e.sent,u(r),c(Object(p.a)(Object(p.a)({},n),{},{best_clients:a})),v(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(m,{onSubmit:S,loading:x}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(Q,{data:n.filtered_best_clients.length>0?n.filtered_best_clients:n.best_clients,onFilter:w,loading:x})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(he,{dateRange:l})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(ve,{})})]})]})},we=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(r.useState)(!1),j=Object(s.a)(d,2),b=j[0],p=j[1];return Object(r.useEffect)((function(){if(n){var e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,ae(n.IdProducto);case 3:t=e.sent,Object.keys(t).length>0&&u([t]),p(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}else n||u([])}),[n]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Promedio mensual costo"})}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)(le,{onSelect:c}),Object(i.jsx)(me.a,{data:l,margin:{top:20,right:30,bottom:80,left:40},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisTop:null,axisRight:null,axisLeft:{legend:"Precio",legendPosition:"middle",legendOffset:-30},axisBottom:{legend:"Meses",legendPosition:"middle",legendOffset:30},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0})]}),b&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})},Se="/api/groups",Ne=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r,c,a,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter,r=t.showNoe,c=n?"?filter=".concat(n,"&showNoe=").concat(r):"",e.next=4,fetch(Se+c);case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r,c,a,o,s;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.from,r=t.to,c=t.categoryId,a=t.showNoe,e.next=3,fetch("".concat(Se,"/sales/").concat(c,"?from=").concat(n,"&to=").concat(r,"&showNoe=").concat(a));case 3:return o=e.sent,e.next=6,o.json();case 6:return s=e.sent,console.log("From fetchSalesByCategory",s),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e){var t=e.onSelect,n=Object(r.useContext)(U).showNoe,c=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,c;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne({filter:t,showNoe:n});case 2:if(!((r=e.sent)&&r.length>0)){e.next=6;break}return c=r.map((function(e){return{key:e.groupId,label:e.name,value:e}})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{style:{width:"100%"},children:Object(i.jsx)(ne,{loadOptions:c,placeholder:"Buscar categor\xeda...",onSelect:function(e,n){var r=n.action;"select-option"===r?t(e.value,r):"clear"===r&&t(null,r)},isSearchable:!1})})},ke=[{Header:"Producto",accessor:"product"},{Header:"Precio",accessor:"price"},{Header:"Inventario",accessor:"stock"}],Le=function(e){var t=e.data,n=e.loading,c=Object(r.useMemo)((function(){return ke}),[]);return Object(i.jsx)(C,{data:t,columns:c,loading:n})},Te=n(17),Ie=function(e){var t=e.data,n=void 0===t?[]:t,r=e.group,c=void 0===r?"":r,a=e.currency;return Object(i.jsxs)("table",{id:"price-list-table",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Categor\xeda"}),Object(i.jsx)("th",{children:"Producto"}),Object(i.jsx)("th",{children:"Precio (".concat(a,")")}),Object(i.jsx)("th",{children:"DISPONIBLE"})]})}),Object(i.jsx)("tbody",{children:n.map((function(e){return e.stock>0?Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:c}),Object(i.jsx)("td",{children:e.product}),Object(i.jsx)("td",{children:e.price}),Object(i.jsx)("td",{children:"EN STOCK"})]},e.productId):""}))})]})},Re=n(288),Pe=n(183),De=(n(441),function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),u=o[0],d=o[1],j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(r.useState)(t),c=Object(s.a)(n,2),a=c[0],o=c[1],i=y()((function(e,t,n){n?u(e,t,n):l(e,t)}),500),l=function(t,n){var r=e.filter((function(e){return e[n].toLowerCase().includes(t.toLowerCase())}));return o(r),r},u=function(t,n,r){console.log("nestedKLey",r);var c=e[r].filter((function(e){return e[n].toLowerCase().includes(t.toLowerCase())}));o(Object(p.a)(Object(p.a)({},a),{},Object(Te.a)({},r,c)))};return{filter:l,filteredData:a,setFilteredData:o,onFilterDebounced:i}}(u),b=j.filteredData,m=j.setFilteredData,v=j.onFilterDebounced,g=Object(r.useRef)(null),w=Object(r.useState)(!1),S=Object(s.a)(w,2),N=S[0],C=S[1],k=Object(r.useState)(!1),L=Object(s.a)(k,2),T=L[0],I=L[1],R=Object(r.useContext)(l).currencyRate;return Object(r.useEffect)((function(){if(n){var e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,ie(n.groupId);case 3:t=e.sent,m([]),g.current.value="",d(Object(F.a)(t)),C(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}else n||d([])}),[n]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsxs)("div",{className:"card-header",children:[Object(i.jsx)("h3",{children:"Lista de precios por categor\xeda"}),Object(i.jsx)(x.a,{variant:"primary",onClick:function(){return I(!0)},children:Object(i.jsx)("span",{children:"Imprimir"})})]}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsxs)("div",{style:{display:"flex",gap:"20%"},children:[Object(i.jsx)(Ce,{onSelect:c}),Object(i.jsx)("input",{ref:g,className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){v(e.target.value,"product")}})]}),Object(i.jsx)(Le,{data:b.length>0?b:u,loading:N})]}),T&&Object(i.jsx)(D,{show:T,onClose:function(){return I(!1)},onSubmit:function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("currency",t),e.next=3,se();case 3:n=e.sent,r=document.createElement("div"),c=new Pe.default("p","pt","a4"),a="LISTA-DE-PRECIOS-".concat(h.DateTime.fromISO((new Date).toISOString()).toLocaleString().replaceAll("/","-"),".pdf"),c.setProperties({title:a}),c.setFontSize(16),c.text("ALIMENTOS DM MARKET, C.A.",300,25,{align:"center"}),c.setFontSize(6),c.text("CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.",300,35,{align:"center"}),c.setFontSize(8),c.text("R.I.F.: J-41270446-0",300,45,{align:"center"}),c.text("Tel\xe9fono:",300,55,{align:"center"}),c.setFontSize(9),c.text("LISTA DE PRECIOS AL ".concat(h.DateTime.fromISO((new Date).toISOString()).toLocaleString()),300,70,{align:"center"}),Object.keys(n).forEach((function(e){var a=n[e];a=a.map((function(e){return"Bs"===t?(console.log("yes currency is Bs"),Object(p.a)(Object(p.a)({},e),{},{price:Number(e.price*(null===R||void 0===R?void 0:R.Cambio)).toFixed(2)})):e})),r.innerHTML=Object(Re.renderToStaticMarkup)(Object(i.jsx)(Ie,{data:a,group:e,currency:t})),c.autoTable({html:r.firstChild,styles:{cellPadding:2},didParseCell:function(e){"body"===e.section&&e.cell.raw&&"TH"===e.cell.raw.nodeName&&(e.cell.styles.fillColor="gray",e.cell.styles.color="white",e.cell.styles.cellWidth="wrap")},margin:{top:80}}),c.addPage()})),c.save(a);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}),Fe=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),o=Object(s.a)(a,2),l=o[0],u=o[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,oe();case 3:(t=e.sent)&&t.length&&(n=t.reduce((function(e,t){return[].concat(Object(F.a)(e),[{id:t.group_name,label:t.product,value:t.total_cost}])}),[]),console.log(t,n),c(n)),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Inversi\xf3n por categor\xeda"})}),Object(i.jsxs)("div",{className:"card-body",children:[n.length>0&&Object(i.jsx)(W.a,{data:n,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,valueFormat:function(e){return e.toLocaleString()},activeOuterRadiusOffset:8,borderWidth:1,arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]}}),l&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},Ee=function(){return Object(i.jsx)(j.a,{fluid:!0,children:Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(we,{})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(De,{})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(Fe,{})})]})})},He=[{Header:"ID",accessor:"invoiceId"},{Header:"Cliente",accessor:"client"},{Header:"Rif",accessor:"rif"},{Header:"Fecha",accessor:"createdAt",Cell:function(e){var t=e.value;return h.DateTime.fromISO(t,{setZone:!0}).toFormat("F")}},{Header:"Total",accessor:"invoiceTotal",Cell:function(e){var t=e.value;return t?"$"+t:""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.invoiceTotal}),0);return t?"$"+Number(t).toLocaleString():0}},{Header:"Comisi\xf3n",accessor:"commissionTotal",Cell:function(e){var t=e.value;return t?"$"+t:""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.commissionTotal}),0);return t?"$"+Number(t).toLocaleString():0}}],Ae=function(e){var t=e.data,n=e.loading,c=Object(r.useMemo)((function(){return He}),[]);return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h2",{children:"Reporte de ventas"})}),Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)(C,{data:t,columns:c,loading:n,showFooter:!0,maxHeight:400})})]})})},_e="/api/employees",Me=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_e));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_e,"/commissionInfo/").concat(t)).catch((function(e){return{error:e}}));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n){var r,c;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_e,"/commissionInfo/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({commissionInfo:n})}).catch((function(e){return{error:e}}));case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n,r){var c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_e,"/sales/").concat(t,"?from=").concat(n.from,"&to=").concat(n.to,"&showNoe=").concat(r)).catch((function(e){return{error:e}}));case 2:return c=e.sent,e.next=5,c.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qe=function(e){var t=e.onSelect,n=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me({filter:t});case 2:if(!((n=e.sent)&&n.length>0)){e.next=6;break}return r=n.map((function(e){return{key:e.id,label:e.name,value:e}})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(ne,{loadOptions:n,placeholder:"Buscar vendedor...",onSelect:function(e,n){var r=n.action;"select-option"===r?t&&t(e.value,r):"clear"===r&&t&&t(null,r)}})},ze=n(487),Ge=n(488),Ke=function(e){var t=e.employee,n=e.show,c=e.onClose,a=Object(r.useState)({data:[],loading:!1}),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(r.useState)({}),j=Object(s.a)(d,2),b=j[0],h=j[1],m=Object(r.useState)({loading:!1,error:!1,message:""}),v=Object(s.a)(m,2),g=v[0],w=v[1];Object(r.useEffect)((function(){u(Object(p.a)(Object(p.a)({},l),{},{loading:!0})),Be(t.id).then((function(e){u({data:e,loading:!1})}))}),[]);var S=function(){var e={};return Object.keys(b).map((function(t){b[t]&&(e[t]=Number(b[t]))})),e},N=function(){var e=Object(f.a)(Object(O.a)().mark((function e(n){var r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),g.loading){e.next=7;break}return w(Object(p.a)(Object(p.a)({},g),{},{loading:!0,text:""})),e.next=5,Ue(t.id,S());case 5:(r=e.sent).error?w({error:!0,text:r.error.message,loading:!1}):r.success&&w({error:!1,text:"El recurso fue actualizado con \xe9xito",loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)(P.a,{show:n,size:"lg",onHide:c,children:[Object(i.jsx)(P.a.Header,{closeButton:!0,children:Object(i.jsx)(P.a.Title,{children:t.name})}),Object(i.jsxs)("form",{onSubmit:N,children:[Object(i.jsx)(P.a.Body,{children:Object(i.jsx)("div",{className:"row justify-content-center",children:l.data.error?Object(i.jsx)(ze.a,{variant:"danger",children:l.data.error.message}):l.loading?Object(i.jsx)(Ge.a,{animation:"border"}):l.data.map((function(e){return Object(i.jsxs)("div",{className:"d-flex flex-column col-sm-4",children:[Object(i.jsx)("label",{className:"form-label",children:e.group}),Object(i.jsxs)("div",{className:"input-group mb-3",children:[Object(i.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"%"}),Object(i.jsx)("input",{type:"number",min:0,step:.01,className:"form-control",placeholder:e.commission||0,value:b[e.groupId]||"",onChange:function(t){return h(Object(p.a)(Object(p.a)({},b),{},Object(Te.a)({},e.groupId,t.target.value)))},onFocus:function(e){return e.target.select()}})]})]},e.groupId)}))})}),Object(i.jsx)(P.a.Footer,{className:"px-0 pb-2",children:Object(i.jsxs)("div",{className:"container-fluid d-flex justify-content-between align-items-center gap-5",children:[Object(i.jsx)("div",{className:"col-9",children:g.text&&Object(i.jsx)(ze.a,{variant:g.error?"danger":"success",className:"mb-0 mt-0 p-1",children:g.text})}),Object(i.jsxs)("div",{className:"col-3 d-flex flex-wrap gap-2",children:[Object(i.jsx)(x.a,{type:"submit",variant:"success",disabled:0===Object.keys(b).length||g.loading,children:"Enviar"}),Object(i.jsx)(x.a,{variant:"danger",onClick:c,children:"Cerrar"})]})]})})]})]})},We=function(e){var t=e.onDateSubmit,n=Object(r.useState)(!1),c=Object(s.a)(n,2),a=c[0],o=c[1],l=Object(r.useState)(null),u=Object(s.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)(!1),O=Object(s.a)(b,2),f=O[0],p=O[1],h=Object(r.useContext)(U).showNoe;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"col-12 mb-4",children:[Object(i.jsxs)("div",{className:"row justify-content-end",children:[Object(i.jsx)("div",{className:"col-6 mb-2",children:Object(i.jsx)(qe,{onSelect:j})}),Object(i.jsx)("div",{className:"col-4",children:Object(i.jsx)(x.a,{variant:"primary",disabled:!d,onClick:function(){return p(!0)},children:"Asignar comisi\xf3n"})})]}),Object(i.jsx)(m,{onSubmit:function(e,n){e.preventDefault(),d&&(o(!0),$e(d.id,n,h).then((function(e){o(!1),t(e)})))},loading:a,submitDisabled:!d})]}),f&&Object(i.jsx)(Ke,{show:f,onClose:function(){return p(!1)},employee:d})]})},Ye=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"row justify-content-center",children:Object(i.jsxs)("div",{className:"col-sm-12 col-xl-8",children:[Object(i.jsx)(We,{onDateSubmit:function(e){c(e)}}),Object(i.jsx)(Ae,{data:n})]})})})},Je=function(e){var t=e.chartData,n=void 0===t?[]:t,r=e.loading;return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Productos m\xe1s vendidos"})}),Object(i.jsxs)("div",{className:"card-body",children:[n.length>0&&Object(i.jsx)(W.a,{data:n,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,arcLabel:function(e){return"".concat(e.value," (").concat(e.data.netProfit,")")},borderWidth:1,arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:function(e){var t=e.datum;return Object(i.jsxs)("div",{className:"tooltip-container",children:[Object(i.jsx)("span",{className:"small-square",style:{background:t.color}}),Object(i.jsx)("strong",{children:t.label}),Object(i.jsx)("label",{children:"Bruto: "}),Object(i.jsxs)("span",{children:["$",Number(t.value).toLocaleString()]}),Object(i.jsx)("label",{children:"Utilidad: "}),Object(i.jsxs)("span",{children:["$",Number(t.data.netProfit).toLocaleString()]})]})}}),r&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},Ze=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(r.useState)([]),j=Object(s.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)(),x=Object(s.a)(h,2),v=x[0],g=x[1];console.log("filteredData",b),console.log("selectedGroup",v);var w=Object(r.useMemo)((function(){return(null!==b&&void 0!==b&&b.length?b:l).reduce((function(e,t){return[].concat(Object(F.a)(e),[{id:t.product,label:t.product,value:t.rawProfit,netProfit:t.netProfit}])}),[])}),[l,b]),S=y()((function(e){var t=l.filter((function(t){return t.product.toLowerCase().includes(e.toLowerCase())}));p(t)}),500),N=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n){var r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!v){e.next=16;break}return e.prev=2,c(!0),e.next=6,ye({from:n.from,to:n.to,categoryId:null===v||void 0===v?void 0:v.groupId});case 6:r=e.sent,u(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("error",e.t0);case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"d-flex justify-content-center w-100",children:Object(i.jsxs)("div",{className:"d-flex align-items-center mb-2 gap-3",children:[Object(i.jsx)("span",{className:"text-white",children:"Categor\xeda"}),Object(i.jsx)(Ce,{onSelect:g})]})}),Object(i.jsx)("div",{children:Object(i.jsx)(m,{onSubmit:N,loading:n,submitDisabled:!v})}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-lg-row justify-content-center align-items-center gap-5 mt-5",children:[Object(i.jsx)("div",{className:"w-100",children:Object(i.jsx)(K,{data:null!==b&&void 0!==b&&b.length?b:l,loading:n,onFilter:S})}),Object(i.jsx)("div",{className:"w-100",children:Object(i.jsx)(Je,{chartData:w,loading:n})})]})]})},Ve=n(31),Qe=n(147),Xe=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api/currency_rates"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{status:t.status,data:n});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var et=function(){var e=Object(Ve.f)(),t=Object(r.useContext)(l),n=t.currencyRate,c=t.setCurrencyRate,a=Object(r.useContext)(U),o=a.showNoe,s=a.setShowNoe;return Object(r.useEffect)((function(){Xe().then((function(e){200===e.status&&c(e.data.find((function(e){return"BsS"===e.Simbolo})))}))}),[]),Object(i.jsx)("div",{className:"App bg-dark",children:Object(i.jsxs)(j.a,{fluid:!0,id:"main",className:"m-0 p-0 vh-100",children:[Object(i.jsx)(d.a,{bg:"dark",variant:"dark",className:"border-bottom",expand:"lg",children:Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(d.a.Brand,{children:"SISTEMA DE REPORTES"}),Object(i.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(i.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:Object(i.jsxs)(j.a,{fluid:!0,className:"d-flex gap-5 justify-content-between align-items-center",children:[Object(i.jsx)(b.a,{className:"me-auto",children:["facturas","ventas","clientes","productos","vendedores","categorias"].map((function(t,n){return Object(i.jsx)(Qe.b,{to:"/".concat(t),className:"text-decoration-none mx-1 text-secondary nav-link ".concat(e.pathname.includes(t)?"active":""),children:Object(i.jsx)("span",{style:{textTransform:"capitalize"},children:t})},n)}))}),Object(i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[Object(i.jsx)("span",{className:"text-light",children:"Facturas"}),Object(i.jsx)("div",{children:Object(i.jsxs)("label",{className:"switch",children:[Object(i.jsx)("input",{type:"checkbox",checked:o,onChange:function(e){return s(e.target.checked)}}),Object(i.jsx)("span",{className:"slider round"})]})}),Object(i.jsx)("span",{className:"text-light",children:"Notas de entrega"})]}),Object(i.jsx)("div",{className:"text-light",children:Object(i.jsxs)("span",{children:["REF: ",Object(i.jsx)("span",{className:"fw-bold text-info",children:null===n||void 0===n?void 0:n.Cambio})," ",null===n||void 0===n?void 0:n.Simbolo]})})]})})]})}),Object(i.jsx)(j.a,{fluid:!0,className:"py-3",children:Object(i.jsxs)(Ve.c,{children:[Object(i.jsx)(Ve.a,{path:"/categorias",component:Ze}),Object(i.jsx)(Ve.a,{path:"/facturas",component:q}),Object(i.jsx)(Ve.a,{path:"/ventas",component:J}),Object(i.jsx)(Ve.a,{path:"/clientes",component:ge}),Object(i.jsx)(Ve.a,{path:"/productos",component:Ee}),Object(i.jsx)(Ve.a,{path:"/vendedores",component:Ye})]})})]})})};n(445);o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(Qe.a,{children:Object(i.jsx)(u,{children:Object(i.jsx)($,{children:Object(i.jsx)(et,{})})})})}),document.getElementById("root"))}},[[446,1,2]]]);
//# sourceMappingURL=main.fd00d3be.chunk.js.map