(this["webpackJsonpreport-demo"]=this["webpackJsonpreport-demo"]||[]).push([[0],{300:function(e,t,r){},446:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(36),o=r.n(a),s=(r(300),r(6)),i=r(1),l=c.a.createContext(),u=function(e){var t=e.children,r=Object(n.useState)(0),c=Object(s.a)(r,2),a=c[0],o=c[1];return Object(i.jsx)(l.Provider,{value:{currencyRate:a,setCurrencyRate:o},children:t})},d=r(118),j=r(52),b=r(290),O=r(5),f=r(11),p=r(4),x=r(38),h=r(485),m=function(e){var t=e.onSubmit,r=e.loading,c=e.submitDisabled,a=Object(n.useState)({from:x.DateTime.now().toISODate(),to:x.DateTime.now().toISODate()}),o=Object(s.a)(a,2),l=o[0],u=o[1];return Object(i.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-center mb-3 gap-2",children:[Object(i.jsxs)("div",{className:"d-flex flex-row justify-content-center align-items-center gap-2 text-light",children:[Object(i.jsx)("label",{className:"d-none d-sm-flex",children:"Desde:"}),Object(i.jsx)("input",{type:"date",value:l.from,onChange:function(e){return u(Object(p.a)(Object(p.a)({},l),{},{from:e.target.value}))}}),Object(i.jsx)("label",{className:"d-none d-sm-flex",children:"Hasta:"}),Object(i.jsx)("input",{type:"date",value:l.to,onChange:function(e){return u(Object(p.a)(Object(p.a)({},l),{},{to:e.target.value}))}})]}),Object(i.jsxs)(h.a,{variant:"primary",onClick:function(e){return t(e,l)},disabled:r||c,children:[r&&Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(i.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}),!r&&Object(i.jsx)("span",{className:"mr-2",children:"Enviar"})]})]})},v="/api/invoices",g=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.from,n=t.to,e.next=3,fetch("".concat(v,"/sales?from=").concat(r,"&to=").concat(n));case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,console.log("From fetchInvoiceReport: ",a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.from,n=t.to,e.next=3,fetch("".concat(v,"?from=").concat(r,"&to=").concat(n));case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=r(185),w=r(56),N=r.n(w),C=function(e){var t=e.data,r=void 0===t?[]:t,a=e.loading,o=e.columns,s=void 0===o?[]:o,l=e.filterPlaceholder,u=e.onFilter,d=e.maxHeight,j=void 0===d?350:d,b=e.showFooter,O=void 0!==b&&b,f=e.onRowSelect,x=e.multiSelect,h=void 0!==x&&x,m=Object(y.useTable)({columns:s,data:r},y.useRowSelect),v=m.getTableProps,g=m.getTableBodyProps,S=m.headerGroups,w=m.footerGroups,C=m.rows,k=m.prepareRow,L=m.state,T=N()((function(e){u(e)}),500);Object(n.useEffect)((function(){if(h){var e=C.filter((function(e){return e.isSelected}));f(e.map((function(e){return e.original})))}else{var t;f&&f(null===(t=C.find((function(e){return e.isSelected})))||void 0===t?void 0:t.original)}}),[L,h,f]);var I=c.a.memo((function(e){var t=e.row;return Object(i.jsx)("tr",Object(p.a)(Object(p.a)(Object(p.a)({},t.getRowProps({onClick:f?function(e){var r=Object.keys(L.selectedRowIds)[Object.keys(L.selectedRowIds).length-1],n=t.index;if(e.ctrlKey&&!e.shiftKey)t.toggleRowSelected();else if(e.shiftKey&&!e.ctrlKey){if(h)if(n>=r)for(var c=r;c<=n;c++)c!==r&&C[c].toggleRowSelected();else for(var a=r;a>=n;a--)a!==r&&C[a].toggleRowSelected()}else t.isSelected||(L.selectedRowIds={}),t.toggleRowSelected()}:null})),t.getToggleRowSelectedProps({})),{},{children:t.cells.map((function(e,r){return Object(i.jsx)("td",Object(p.a)(Object(p.a)({title:e.value},e.getCellProps()),{},{style:{background:t.isSelected?"lightblue":"white",color:t.isSelected?"white":"black"},children:e.render("Cell")}))}))}))}),[r]);return Object(i.jsxs)("div",{children:[u&&Object(i.jsx)("div",{className:"table-filter-container",children:Object(i.jsx)("input",{className:"table-filter-input",onChange:function(e){return T(e.target.value)},placeholder:l,autoFocus:!0})}),Object(i.jsxs)("div",{className:"table-container",style:{maxHeight:j},children:[Object(i.jsxs)("table",Object(p.a)(Object(p.a)({},v()),{},{children:[Object(i.jsx)("thead",{children:S.map((function(e){return Object(i.jsx)("tr",Object(p.a)(Object(p.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(i.jsx)("th",Object(p.a)(Object(p.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(i.jsx)("tbody",Object(p.a)(Object(p.a)({},g()),{},{children:C.map((function(e){return k(e),Object(i.jsx)(I,{row:e})}))})),O&&r.length>0&&Object(i.jsx)("tfoot",{children:w.map((function(e){return Object(i.jsx)("tr",Object(p.a)(Object(p.a)({},e.getFooterGroupProps()),{},{children:e.headers.map((function(e){return Object(i.jsx)("td",Object(p.a)(Object(p.a)({},e.getFooterProps()),{},{children:e.render("Footer")}))}))}))}))})]})),a&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},k=r(491),L=r(271),T=r.n(L),I=[{Header:"ID",accessor:"invoiceId"},{Header:"Cliente",accessor:"client"},{Header:"RIF",accessor:"rif"},{Header:"TOTAL",accessor:"total",Cell:function(e){var t=e.value;return"$".concat(t?t.toFixed(2):"")}},{Header:"Fecha",accessor:"createdAt",Cell:function(e){var t=e.value;return T()(t).format("MMM DD, YYYY")}}],R=function(e){var t=e.data,r=e.loading,c=e.onRowSelect,a=Object(n.useMemo)((function(){return I}),[]);return Object(i.jsxs)(k.a,{className:"noselect",children:[Object(i.jsx)(k.a.Header,{children:Object(i.jsx)("h3",{children:"Facturas"})}),Object(i.jsx)(k.a.Body,{children:Object(i.jsx)(C,{data:t,columns:a,loading:r,onRowSelect:c,multiSelect:!0})})]})},D=r(489);var P=function(e){var t=e.show,r=e.onClose,n=e.onSubmit;return Object(i.jsxs)(D.a,{show:t,size:"sm",onHide:r,children:[Object(i.jsx)(D.a.Header,{closeButton:!0,onHide:r,children:Object(i.jsx)(D.a.Title,{children:"Moneda"})}),Object(i.jsxs)(D.a.Body,{children:[Object(i.jsx)(h.a,{className:"w-100 mb-3",onClick:function(){return n("USD")},children:"USD"}),Object(i.jsx)(h.a,{className:"w-100",onClick:function(){return n("Bs")},children:"Bs"})]})]})},F=r(20),E=function(e,t,r,n){return{content:[{text:"ALIMENTOS DM MARKET, C.A.",style:"header"},{text:"CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.",style:"header"},{text:"R.I.F.: J-41270446-0",style:"header"},{text:x.DateTime.local().toFormat("dd/MM/yyyy"),style:"header"},{style:"table",table:{widths:[85,"*","auto","auto"],body:[["CATEGOR\xcdA","PRODUCTO","CANTIDAD","TOTAL (".concat(n,")")]].concat(Object(F.a)(e.map((function(e){return[e.group,e.product,e.quantity,e.total]}))),[["","",{text:t,bold:!0},{text:"".concat(n," ").concat(r),bold:!0}]])}}],styles:{header:{alignment:"center"},table:{margin:[0,20,0,0]}},pageMargins:40,pageSize:"LETTER"}},H=r(186),A=r.n(H),_=r(272),M=r.n(_);A.a.vfs=M.a.pdfMake.vfs;var B=function(e){var t=e.data,r=e.totalSummary,c=Object(n.useContext)(l).currencyRate,a=Object(n.useState)(!1),o=Object(s.a)(a,2),u=o[0],d=o[1],j=Object(n.useMemo)((function(){return t?t.reduce((function(e,t){return e+t.quantity}),0):0}),[t]),b=Object(n.useMemo)((function(){return t?t.sort((function(e,t){return e.group.toLowerCase().localeCompare(t.group.toLowerCase())||e.product.toLowerCase().localeCompare(t.product.toLowerCase())})):[]}),[t]),x=Object(n.useMemo)((function(){return[{Header:"Categor\xeda",accessor:"group"},{Header:"ID",accessor:"productId"},{Header:"Producto",accessor:"product"},{Header:"Cantidad",accessor:"quantity",Footer:function(){return Object(i.jsx)("span",{children:j?j.toFixed(2):""})}},{Header:"Total",accessor:"total",Footer:function(){return Object(i.jsxs)("span",{children:["$",r?r.toFixed(2):""]})}}]}),[r,j]);return console.log(b),Object(i.jsxs)(k.a,{children:[Object(i.jsx)(k.a.Header,{children:Object(i.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(i.jsx)("h3",{children:"Productos"}),Object(i.jsx)(h.a,{onClick:function(){return d(!0)},children:"Imprimir"})]})}),Object(i.jsx)(k.a.Body,{children:Object(i.jsx)(C,{data:b,columns:x,showFooter:!0})}),u&&Object(i.jsx)(P,{show:u,onClose:function(){return d(!1)},onSubmit:function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var n,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b,"Bs"===t&&(n=n.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{total:Number(e.price*e.quantity*(null===c||void 0===c?void 0:c.Cambio)).toFixed(2)})}))),a=E(n,j,r,t),A.a.createPdf(a).open();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},U=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(n.useState)([]),b=Object(s.a)(d,2),x=b[0],h=b[1],v=Object(n.useMemo)((function(){if(!x||0===x.length)return[];var e={};return x.forEach((function(t){t.products.forEach((function(t){e[t.productId]||(e[t.productId]=Object(p.a)(Object(p.a)({},t),{},{quantity:0})),e[t.productId].quantity+=t.quantity,e[t.productId].total=e[t.productId].quantity*e[t.productId].price,e[t.productId].total=e[t.productId].total.toFixed(2)}))})),Object.values(e)}),[x]),g=Object(n.useMemo)((function(){return x&&0!==x.length?x.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.total)}),0):0}),[x]),y=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,r){var n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),e.next=4,S(r);case 4:n=e.sent,u(n),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(m,{onSubmit:y,loading:r}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(R,{data:l,loading:r,onRowSelect:h})}),Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(B,{data:v,loading:r,totalSummary:g})})]})]})},$=[{Header:"Producto",accessor:"product"},{Header:"Cantidad",accessor:"quantity",Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.quantity}),0);return Number(t).toFixed(2)}},{Header:"Bruto",accessor:"rawProfit",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.rawProfit}),0);return"$"+Number(t.toFixed(2)).toLocaleString()}},{Header:"Utilidad",accessor:"netProfit",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.netProfit}),0);return"$"+Number(t.toFixed(2)).toLocaleString()}},{Header:"Promedio",accessor:"averageProfitPercent",Cell:function(e){return e.value+"%"}}],q=function(e){var t=e.data,r=e.loading,c=Object(n.useMemo)((function(){return $}),[]);return Object(i.jsx)(C,{data:t,columns:c,showFooter:!0,loading:r})},z=function(e){var t=e.data,r=void 0===t?[]:t,c=e.onFilter,a=e.loading,o=Object(n.useState)("rawProfit"),l=Object(s.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)([]),b=Object(s.a)(j,2),O=b[0],f=b[1];return Object(n.useEffect)((function(){var e=r.sort((function(e,t){return t[u]-e[u]}));f(Object(F.a)(e))}),[u,r]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsxs)("div",{className:"card-header",children:[Object(i.jsx)("h3",{children:"Ventas"}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{style:{marginRight:"5px"},children:"Ordenar:"}),Object(i.jsxs)("select",{onChange:function(e){return d(e.target.value)},value:u,children:[Object(i.jsx)("option",{value:"quantity",children:"Cantidad"}),Object(i.jsx)("option",{value:"rawProfit",children:"Bruto"}),Object(i.jsx)("option",{value:"netProfit",children:"Utilidad"}),Object(i.jsx)("option",{value:"averageProfitPercent",children:"Promedio"})]})]})]}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("input",{className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){return c(e.target.value)}}),Object(i.jsx)(q,{data:O,loading:a})]})]})},G=r(97),K=function(e){var t=e.chartData,r=void 0===t?[]:t,n=e.loading;return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Gr\xe1fico de categor\xedas"})}),Object(i.jsxs)("div",{className:"card-body",children:[r.length>0&&Object(i.jsx)(G.a,{data:r,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,arcLabel:function(e){return"".concat(e.value," (").concat(e.data.netProfit,")")},borderWidth:1,arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:function(e){var t=e.datum;return Object(i.jsxs)("div",{className:"tooltip-container",children:[Object(i.jsx)("span",{className:"small-square",style:{background:t.color}}),Object(i.jsx)("strong",{children:t.label}),Object(i.jsx)("label",{children:"Bruto: "}),Object(i.jsxs)("span",{children:["$",Number(t.value).toLocaleString()]}),Object(i.jsx)("label",{children:"Utilidad: "}),Object(i.jsxs)("span",{children:["$",Number(t.data.netProfit).toLocaleString()]})]})}}),n&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},W=function(){var e=Object(n.useState)({filtered_invoices_report:[],invoices_report:[],group_sales_chart:[]}),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(!1),o=Object(s.a)(a,2),l=o[0],u=o[1],d=N()((function(e){var t=r.invoices_report.filter((function(t){return t.product.toLowerCase().includes(e.toLowerCase())}));c(Object(p.a)(Object(p.a)({},r),{},{filtered_invoices_report:t}))}),500),b=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n){var a,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),e.next=4,g(n);case 4:a=e.sent,o=a.group_sales_chart_data.reduce((function(e,t){return[].concat(Object(F.a)(e),[{id:t.categoria,label:t.categoria,value:t.rawProfit,netProfit:t.netProfit}])}),[]),c(Object(p.a)(Object(p.a)({},r),{},{invoices_report:a.sales_report,group_sales_chart:o})),u(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(m,{onSubmit:b,loading:l}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(z,{data:r.filtered_invoices_report.length>0?r.filtered_invoices_report:r.invoices_report,onFilter:d,loading:l})}),Object(i.jsx)("div",{className:"col-12 col-xl-6",children:Object(i.jsx)(K,{chartData:r.group_sales_chart,loading:l})})]})]})},Y=[{Header:"Cliente",accessor:"client"},{Header:"Total",accessor:"total_USD",Cell:function(e){return"$"+e.value.toLocaleString()}}],J=function(e){var t=e.data,r=e.loading,c=Object(n.useMemo)((function(){return Y}),[]);return Object(i.jsx)(C,{data:t,columns:c,loading:r})},Z=function(e){var t=e.loading,r=e.data,n=void 0===r?[]:r,c=e.onFilter;return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Mejores clientes"})}),Object(i.jsx)("div",{className:"card-body",children:n.length>0&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",{className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){return c(e.target.value,"client","client_report")}}),Object(i.jsx)(J,{data:n,loading:t})]})})]})},V=r(289),Q=r(284),X=r.n(Q),ee=function(e){var t=e.placeholder,r=e.loadOptions,n=e.defaultOptions,c=void 0===n||n,a=e.cacheOptions,o=void 0===a||a,s=e.onSelect;return Object(i.jsx)(V.a,{loadOptions:X()((function(e,t){return r(e,t)}),700),cacheOptions:o,defaultOptions:c,placeholder:t,onChange:s||null,loadingMessage:function(){return"Cargando..."},isClearable:!0})},te="/api/products",re=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filter,n=r?"?filter=".concat(r):"",e.next=4,fetch(te+n);case 4:return c=e.sent,e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(te,"/cost-fluctuation/").concat(t));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(te,"/cost/group"));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(te,"/group"));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(te,"/price-list/").concat(t));case 2:return r=e.sent,n=r.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e){var t=e.onSelect,r=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re({filter:t});case 2:if(!((r=e.sent)&&r.length>0)){e.next=6;break}return n=r.map((function(e){var t=e.Descripcion;return{key:e.id,label:t,value:e}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(ee,{loadOptions:r,defaultOptions:!1,placeholder:"Buscar producto...",onSelect:function(e,r){var n=r.action;"select-option"===n?t(e.value,n):"clear"===n&&t(null,n)}})},ie=[{Header:"Cliente",accessor:"client"},{Header:"Cantidad",accessor:"quantity_total"},{Header:"Total",accessor:"total_USD",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():""}},{Header:"Utilidad",accessor:"utilidad",Cell:function(e){var t=e.value;return t?"$"+t.toLocaleString():0}}],le=function(e){var t=e.data,r=e.loading,c=Object(n.useMemo)((function(){return ie}),[]);return Object(i.jsx)(C,{data:t,columns:c,loading:r})},ue="/api/clients",de=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filter,n=r?"?filter=".concat(r):"",e.next=4,fetch("".concat(ue).concat(n));case 4:return c=e.sent,a=c.json(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/best/?from=").concat(t.from,"&to=").concat(t.to));case 2:return r=e.sent,n=r.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,r){var n,c;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/best/product/").concat(t,"?from=").concat(r.from,"&to=").concat(r.to));case 2:return n=e.sent,c=n.json(),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ue,"/average/month/").concat(t));case 2:return r=e.sent,n=r.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=e.dateRange,r=Object(n.useState)(null),c=Object(s.a)(r,2),a=c[0],o=c[1],l=Object(n.useState)([]),u=Object(s.a)(l,2),d=u[0],j=u[1],b=Object(n.useState)(!1),O=Object(s.a)(b,2),f=O[0],p=O[1];return Object(n.useEffect)((function(){a&&t.from&&t.to?(p(!0),be(a.IdProducto,t).then((function(e){j(Object(F.a)(e)),p(!1)}))):a||j([])}),[a,t]),console.log(d),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsxs)("div",{className:"card-header",children:[Object(i.jsx)("h3",{children:"Cliente por producto"}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"5px"},children:[Object(i.jsx)("small",{children:"Desde: "}),Object(i.jsxs)("small",{children:[x.DateTime.fromISO(t.from).toLocaleString()," "]}),Object(i.jsx)("small",{children:"Hasta: "}),Object(i.jsxs)("small",{children:[x.DateTime.fromISO(t.to).toLocaleString()," "]})]})]}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("div",{style:{display:"flex",flex:"1",justifyContent:"space-between"},children:Object(i.jsx)("div",{style:{width:"100%"},children:Object(i.jsx)(se,{onSelect:o})})}),Object(i.jsx)(le,{data:d,loading:f})]})]})},pe=function(e){var t=e.onSelect,r=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de({filter:t});case 2:if(!((r=e.sent)&&r.length>0)){e.next=6;break}return n=r.map((function(e){return{key:e.IdCliente,label:e.name,value:e}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(ee,{loadOptions:r,defaultOptions:!1,placeholder:"Buscar cliente...",onSelect:function(e,r){var n=r.action;"select-option"===n?t&&t(e.value,n):"clear"===n&&t&&t(null,n)}})},xe=r(148),he=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(n.useState)(!1),j=Object(s.a)(d,2),b=j[0],O=j[1];return Object(n.useEffect)((function(){r?(O(!0),Oe(r.IdCliente).then((function(e){console.log(e),Object.keys(e).length>0&&u([e]),O(!1)}))):u([])}),[r]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Promedio mensual"})}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)(pe,{onSelect:c}),l&&Object(i.jsx)(xe.a,{data:l,margin:{top:20,right:30,bottom:80,left:40},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisTop:null,axisRight:null,pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0}),b&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},me=function(){var e=Object(n.useState)({filtered_best_clients:[],best_clients:[],group_sales_chart:[]}),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)({from:x.DateTime.now().toISODate(),to:x.DateTime.now().toISODate()}),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(n.useState)(!1),b=Object(s.a)(d,2),h=b[0],v=b[1],g=N()((function(e){var t=r.best_clients.filter((function(t){return t.client.toLowerCase().includes(e.toLowerCase())}));c(Object(p.a)(Object(p.a)({},r),{},{filtered_best_clients:t}))}),500),S=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,n){var a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!0),e.next=4,je(n);case 4:a=e.sent,u(n),c(Object(p.a)(Object(p.a)({},r),{},{best_clients:a})),v(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(m,{onSubmit:S,loading:h}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(Z,{data:r.filtered_best_clients.length>0?r.filtered_best_clients:r.best_clients,onFilter:g,loading:h})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(fe,{dateRange:l})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(he,{})})]})]})},ve=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(n.useState)(!1),j=Object(s.a)(d,2),b=j[0],p=j[1];return Object(n.useEffect)((function(){if(r){var e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,ne(r.IdProducto);case 3:t=e.sent,Object.keys(t).length>0&&u([t]),p(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}else r||u([])}),[r]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Promedio mensual costo"})}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)(se,{onSelect:c}),Object(i.jsx)(xe.a,{data:l,margin:{top:20,right:30,bottom:80,left:40},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisTop:null,axisRight:null,axisLeft:{legend:"Precio",legendPosition:"middle",legendOffset:-30},axisBottom:{legend:"Meses",legendPosition:"middle",legendOffset:30},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0})]}),b&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})},ge="/api/groups",Se=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filter,n=r?"?filter=".concat(r):"",e.next=4,fetch(ge+n);case 4:return c=e.sent,e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n,c,a,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.from,n=t.to,c=t.categoryId,e.next=3,fetch("".concat(ge,"/sales/").concat(c,"?from=").concat(r,"&to=").concat(n));case 3:return a=e.sent,e.next=6,a.json();case 6:return o=e.sent,console.log("From fetchSalesByCategory",o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e){var t=e.onSelect,r=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se({filter:t});case 2:if(!((r=e.sent)&&r.length>0)){e.next=6;break}return n=r.map((function(e){return{key:e.groupId,label:e.name,value:e}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{style:{width:"100%"},children:Object(i.jsx)(ee,{loadOptions:r,placeholder:"Buscar categor\xeda...",onSelect:function(e,r){var n=r.action;"select-option"===n?t(e.value,n):"clear"===n&&t(null,n)},isSearchable:!1})})},Ne=[{Header:"Producto",accessor:"product"},{Header:"Precio",accessor:"price"},{Header:"Inventario",accessor:"stock"}],Ce=function(e){var t=e.data,r=e.loading,c=Object(n.useMemo)((function(){return Ne}),[]);return Object(i.jsx)(C,{data:t,columns:c,loading:r})},ke=r(17),Le=function(e){var t=e.data,r=void 0===t?[]:t,n=e.group,c=void 0===n?"":n,a=e.currency;return Object(i.jsxs)("table",{id:"price-list-table",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Categor\xeda"}),Object(i.jsx)("th",{children:"Producto"}),Object(i.jsx)("th",{children:"Precio (".concat(a,")")}),Object(i.jsx)("th",{children:"DISPONIBLE"})]})}),Object(i.jsx)("tbody",{children:r.map((function(e){return e.stock>0?Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:c}),Object(i.jsx)("td",{children:e.product}),Object(i.jsx)("td",{children:e.price}),Object(i.jsx)("td",{children:"EN STOCK"})]},e.productId):""}))})]})},Te=r(288),Ie=r(183),Re=(r(441),function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)([]),o=Object(s.a)(a,2),u=o[0],d=o[1],j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(n.useState)(t),c=Object(s.a)(r,2),a=c[0],o=c[1],i=N()((function(e,t,r){r?u(e,t,r):l(e,t)}),500),l=function(t,r){var n=e.filter((function(e){return e[r].toLowerCase().includes(t.toLowerCase())}));return o(n),n},u=function(t,r,n){console.log("nestedKLey",n);var c=e[n].filter((function(e){return e[r].toLowerCase().includes(t.toLowerCase())}));o(Object(p.a)(Object(p.a)({},a),{},Object(ke.a)({},n,c)))};return{filter:l,filteredData:a,setFilteredData:o,onFilterDebounced:i}}(u),b=j.filteredData,m=j.setFilteredData,v=j.onFilterDebounced,g=Object(n.useRef)(null),S=Object(n.useState)(!1),y=Object(s.a)(S,2),w=y[0],C=y[1],k=Object(n.useState)(!1),L=Object(s.a)(k,2),T=L[0],I=L[1],R=Object(n.useContext)(l).currencyRate;return Object(n.useEffect)((function(){if(r){var e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,oe(r.groupId);case 3:t=e.sent,m([]),g.current.value="",d(Object(F.a)(t)),C(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}else r||d([])}),[r]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsxs)("div",{className:"card-header",children:[Object(i.jsx)("h3",{children:"Lista de precios por categor\xeda"}),Object(i.jsx)(h.a,{variant:"primary",onClick:function(){return I(!0)},children:Object(i.jsx)("span",{children:"Imprimir"})})]}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsxs)("div",{style:{display:"flex",gap:"20%"},children:[Object(i.jsx)(we,{onSelect:c}),Object(i.jsx)("input",{ref:g,className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){v(e.target.value,"product")}})]}),Object(i.jsx)(Ce,{data:b.length>0?b:u,loading:w})]}),T&&Object(i.jsx)(P,{show:T,onClose:function(){return I(!1)},onSubmit:function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n,c,a;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("currency",t),e.next=3,ae();case 3:r=e.sent,n=document.createElement("div"),c=new Ie.default("p","pt","a4"),a="LISTA-DE-PRECIOS-".concat(x.DateTime.fromISO((new Date).toISOString()).toLocaleString().replaceAll("/","-"),".pdf"),c.setProperties({title:a}),c.setFontSize(16),c.text("ALIMENTOS DM MARKET, C.A.",300,25,{align:"center"}),c.setFontSize(6),c.text("CALLE ILUSTRES PROCERES LOCAL NRO S/N SECTOR CENTRO ALTAGRACIA DE ORITUCO DE ORITUCO ZONA POSTAL 2320.",300,35,{align:"center"}),c.setFontSize(8),c.text("R.I.F.: J-41270446-0",300,45,{align:"center"}),c.text("Tel\xe9fono:",300,55,{align:"center"}),c.setFontSize(9),c.text("LISTA DE PRECIOS AL ".concat(x.DateTime.fromISO((new Date).toISOString()).toLocaleString()),300,70,{align:"center"}),Object.keys(r).forEach((function(e){var a=r[e];a=a.map((function(e){return"Bs"===t?(console.log("yes currency is Bs"),Object(p.a)(Object(p.a)({},e),{},{price:Number(e.price*(null===R||void 0===R?void 0:R.Cambio)).toFixed(2)})):e})),n.innerHTML=Object(Te.renderToStaticMarkup)(Object(i.jsx)(Le,{data:a,group:e,currency:t})),c.autoTable({html:n.firstChild,styles:{cellPadding:2},didParseCell:function(e){"body"===e.section&&e.cell.raw&&"TH"===e.cell.raw.nodeName&&(e.cell.styles.fillColor="gray",e.cell.styles.color="white",e.cell.styles.cellWidth="wrap")},margin:{top:80}}),c.addPage()})),c.save(a);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}),De=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(!1),o=Object(s.a)(a,2),l=o[0],u=o[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,ce();case 3:(t=e.sent)&&t.length&&(r=t.reduce((function(e,t){return[].concat(Object(F.a)(e),[{id:t.group_name,label:t.product,value:t.total_cost}])}),[]),console.log(t,r),c(r)),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Inversi\xf3n por categor\xeda"})}),Object(i.jsxs)("div",{className:"card-body",children:[r.length>0&&Object(i.jsx)(G.a,{data:r,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,valueFormat:function(e){return e.toLocaleString()},activeOuterRadiusOffset:8,borderWidth:1,arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]}}),l&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},Pe=function(){return Object(i.jsx)(j.a,{fluid:!0,children:Object(i.jsxs)("div",{className:"d-flex flex-column flex-xl-row justify-content-center gap-3",children:[Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(ve,{})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(Re,{})}),Object(i.jsx)("div",{className:"col-12 col-xl-4",children:Object(i.jsx)(De,{})})]})})},Fe=[{Header:"ID",accessor:"invoiceId"},{Header:"Cliente",accessor:"client"},{Header:"Rif",accessor:"rif"},{Header:"Fecha",accessor:"createdAt",Cell:function(e){var t=e.value;return x.DateTime.fromISO(t,{setZone:!0}).toFormat("F")}},{Header:"Total",accessor:"invoiceTotal",Cell:function(e){var t=e.value;return t?"$"+t:""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.invoiceTotal}),0);return t?"$"+Number(t).toLocaleString():0}},{Header:"Comisi\xf3n",accessor:"commissionTotal",Cell:function(e){var t=e.value;return t?"$"+t:""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.commissionTotal}),0);return t?"$"+Number(t).toLocaleString():0}}],Ee=function(e){var t=e.data,r=e.loading,c=Object(n.useMemo)((function(){return Fe}),[]);return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h2",{children:"Reporte de ventas"})}),Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)(C,{data:t,columns:c,loading:r,showFooter:!0,maxHeight:400})})]})})},He="/api/employees",Ae=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(He));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(He,"/commissionInfo/").concat(t)).catch((function(e){return{error:e}}));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,r){var n,c;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(He,"/commissionInfo/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({commissionInfo:r})}).catch((function(e){return{error:e}}));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Be=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,r){var n,c;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(He,"/sales/").concat(t,"?from=").concat(r.from,"&to=").concat(r.to)).catch((function(e){return{error:e}}));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ue=function(e){var t=e.onSelect,r=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t){var r,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae({filter:t});case 2:if(!((r=e.sent)&&r.length>0)){e.next=6;break}return n=r.map((function(e){return{key:e.id,label:e.name,value:e}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(ee,{loadOptions:r,placeholder:"Buscar vendedor...",onSelect:function(e,r){var n=r.action;"select-option"===n?t&&t(e.value,n):"clear"===n&&t&&t(null,n)}})},$e=r(487),qe=r(488),ze=function(e){var t=e.employee,r=e.show,c=e.onClose,a=Object(n.useState)({data:[],loading:!1}),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(n.useState)({}),j=Object(s.a)(d,2),b=j[0],x=j[1],m=Object(n.useState)({loading:!1,error:!1,message:""}),v=Object(s.a)(m,2),g=v[0],S=v[1];Object(n.useEffect)((function(){u(Object(p.a)(Object(p.a)({},l),{},{loading:!0})),_e(t.id).then((function(e){u({data:e,loading:!1})}))}),[]);var y=function(){var e={};return Object.keys(b).map((function(t){b[t]&&(e[t]=Number(b[t]))})),e},w=function(){var e=Object(f.a)(Object(O.a)().mark((function e(r){var n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),g.loading){e.next=7;break}return S(Object(p.a)(Object(p.a)({},g),{},{loading:!0,text:""})),e.next=5,Me(t.id,y());case 5:(n=e.sent).error?S({error:!0,text:n.error.message,loading:!1}):n.success&&S({error:!1,text:"El recurso fue actualizado con \xe9xito",loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)(D.a,{show:r,size:"lg",onHide:c,children:[Object(i.jsx)(D.a.Header,{closeButton:!0,children:Object(i.jsx)(D.a.Title,{children:t.name})}),Object(i.jsxs)("form",{onSubmit:w,children:[Object(i.jsx)(D.a.Body,{children:Object(i.jsx)("div",{className:"row justify-content-center",children:l.data.error?Object(i.jsx)($e.a,{variant:"danger",children:l.data.error.message}):l.loading?Object(i.jsx)(qe.a,{animation:"border"}):l.data.map((function(e){return Object(i.jsxs)("div",{className:"d-flex flex-column col-sm-4",children:[Object(i.jsx)("label",{className:"form-label",children:e.group}),Object(i.jsxs)("div",{className:"input-group mb-3",children:[Object(i.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"%"}),Object(i.jsx)("input",{type:"number",min:0,step:.01,className:"form-control",placeholder:e.commission||0,value:b[e.groupId]||"",onChange:function(t){return x(Object(p.a)(Object(p.a)({},b),{},Object(ke.a)({},e.groupId,t.target.value)))},onFocus:function(e){return e.target.select()}})]})]},e.groupId)}))})}),Object(i.jsx)(D.a.Footer,{className:"px-0 pb-2",children:Object(i.jsxs)("div",{className:"container-fluid d-flex justify-content-between align-items-center gap-5",children:[Object(i.jsx)("div",{className:"col-9",children:g.text&&Object(i.jsx)($e.a,{variant:g.error?"danger":"success",className:"mb-0 mt-0 p-1",children:g.text})}),Object(i.jsxs)("div",{className:"col-3 d-flex flex-wrap gap-2",children:[Object(i.jsx)(h.a,{type:"submit",variant:"success",disabled:0===Object.keys(b).length||g.loading,children:"Enviar"}),Object(i.jsx)(h.a,{variant:"danger",onClick:c,children:"Cerrar"})]})]})})]})]})},Ge=function(e){var t=e.onDateSubmit,r=Object(n.useState)(!1),c=Object(s.a)(r,2),a=c[0],o=c[1],l=Object(n.useState)(null),u=Object(s.a)(l,2),d=u[0],j=u[1],b=Object(n.useState)(!1),O=Object(s.a)(b,2),f=O[0],p=O[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"col-12 mb-4",children:[Object(i.jsxs)("div",{className:"row justify-content-end",children:[Object(i.jsx)("div",{className:"col-6 mb-2",children:Object(i.jsx)(Ue,{onSelect:j})}),Object(i.jsx)("div",{className:"col-4",children:Object(i.jsx)(h.a,{variant:"primary",disabled:!d,onClick:function(){return p(!0)},children:"Asignar comisi\xf3n"})})]}),Object(i.jsx)(m,{onSubmit:function(e,r){e.preventDefault(),d&&(o(!0),Be(d.id,r).then((function(e){o(!1),t(e)})))},loading:a,submitDisabled:!d})]}),f&&Object(i.jsx)(ze,{show:f,onClose:function(){return p(!1)},employee:d})]})},Ke=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],c=t[1];return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"row justify-content-center",children:Object(i.jsxs)("div",{className:"col-sm-12 col-xl-8",children:[Object(i.jsx)(Ge,{onDateSubmit:function(e){c(e)}}),Object(i.jsx)(Ee,{data:r})]})})})},We=function(e){var t=e.chartData,r=void 0===t?[]:t,n=e.loading;return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("div",{className:"card-header",children:Object(i.jsx)("h3",{children:"Productos m\xe1s vendidos"})}),Object(i.jsxs)("div",{className:"card-body",children:[r.length>0&&Object(i.jsx)(G.a,{data:r,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,arcLabel:function(e){return"".concat(e.value," (").concat(e.data.netProfit,")")},borderWidth:1,arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:function(e){var t=e.datum;return Object(i.jsxs)("div",{className:"tooltip-container",children:[Object(i.jsx)("span",{className:"small-square",style:{background:t.color}}),Object(i.jsx)("strong",{children:t.label}),Object(i.jsx)("label",{children:"Bruto: "}),Object(i.jsxs)("span",{children:["$",Number(t.value).toLocaleString()]}),Object(i.jsx)("label",{children:"Utilidad: "}),Object(i.jsxs)("span",{children:["$",Number(t.data.netProfit).toLocaleString()]})]})}}),n&&Object(i.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(i.jsx)("span",{className:"spinner-border spinner-border-md",role:"status","aria-hidden":"true"})})]})]})},Ye=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)([]),o=Object(s.a)(a,2),l=o[0],u=o[1],d=Object(n.useState)([]),j=Object(s.a)(d,2),b=j[0],p=j[1],x=Object(n.useState)(),h=Object(s.a)(x,2),v=h[0],g=h[1];console.log("filteredData",b),console.log("selectedGroup",v);var S=Object(n.useMemo)((function(){return(null!==b&&void 0!==b&&b.length?b:l).reduce((function(e,t){return[].concat(Object(F.a)(e),[{id:t.product,label:t.product,value:t.rawProfit,netProfit:t.netProfit}])}),[])}),[l,b]),y=N()((function(e){var t=l.filter((function(t){return t.product.toLowerCase().includes(e.toLowerCase())}));p(t)}),500),w=function(){var e=Object(f.a)(Object(O.a)().mark((function e(t,r){var n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!v){e.next=16;break}return e.prev=2,c(!0),e.next=6,ye({from:r.from,to:r.to,categoryId:null===v||void 0===v?void 0:v.groupId});case 6:n=e.sent,u(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("error",e.t0);case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"d-flex justify-content-center w-100",children:Object(i.jsxs)("div",{className:"d-flex align-items-center mb-2 gap-3",children:[Object(i.jsx)("span",{className:"text-white",children:"Categor\xeda"}),Object(i.jsx)(we,{onSelect:g})]})}),Object(i.jsx)("div",{children:Object(i.jsx)(m,{onSubmit:w,loading:r,submitDisabled:!v})}),Object(i.jsxs)("div",{className:"d-flex flex-column flex-lg-row justify-content-center align-items-center gap-5 mt-5",children:[Object(i.jsx)("div",{className:"w-100",children:Object(i.jsx)(z,{data:null!==b&&void 0!==b&&b.length?b:l,loading:r,onFilter:y})}),Object(i.jsx)("div",{className:"w-100",children:Object(i.jsx)(We,{chartData:S,loading:r})})]})]})},Je=r(31),Ze=r(147),Ve=function(){var e=Object(f.a)(Object(O.a)().mark((function e(){var t,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api/currency_rates"));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",{status:t.status,data:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Qe=function(){var e=Object(Je.f)(),t=Object(n.useContext)(l),r=t.currencyRate,c=t.setCurrencyRate;return Object(n.useEffect)((function(){Ve().then((function(e){200===e.status&&c(e.data.find((function(e){return"BsS"===e.Simbolo})))}))}),[]),Object(i.jsx)("div",{className:"App bg-dark",children:Object(i.jsxs)(j.a,{fluid:!0,id:"main",className:"m-0 p-0 vh-100",children:[Object(i.jsx)(d.a,{bg:"dark",variant:"dark",className:"border-bottom",expand:"lg",children:Object(i.jsxs)(j.a,{fluid:!0,children:[Object(i.jsx)(d.a.Brand,{children:"SISTEMA DE REPORTES"}),Object(i.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(i.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:Object(i.jsxs)(j.a,{fluid:!0,className:"d-flex justify-content-between align-items-center",children:[Object(i.jsx)(b.a,{className:"me-auto",children:["facturas","ventas","clientes","productos","vendedores","categorias"].map((function(t,r){return Object(i.jsx)(Ze.b,{to:"/".concat(t),className:"text-decoration-none mx-1 text-secondary nav-link ".concat(e.pathname.includes(t)?"active":""),children:Object(i.jsx)("span",{style:{textTransform:"capitalize"},children:t})},r)}))}),Object(i.jsx)("div",{className:"text-light",children:Object(i.jsxs)("span",{children:["REF: ",Object(i.jsx)("span",{className:"fw-bold text-info",children:null===r||void 0===r?void 0:r.Cambio})," ",null===r||void 0===r?void 0:r.Simbolo]})})]})})]})}),Object(i.jsx)(j.a,{fluid:!0,className:"py-3",children:Object(i.jsxs)(Je.c,{children:[Object(i.jsx)(Je.a,{path:"/categorias",component:Ye}),Object(i.jsx)(Je.a,{path:"/facturas",component:U}),Object(i.jsx)(Je.a,{path:"/ventas",component:W}),Object(i.jsx)(Je.a,{path:"/clientes",component:me}),Object(i.jsx)(Je.a,{path:"/productos",component:Pe}),Object(i.jsx)(Je.a,{path:"/vendedores",component:Ke})]})})]})})};r(445);o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(Ze.a,{children:Object(i.jsx)(u,{children:Object(i.jsx)(Qe,{})})})}),document.getElementById("root"))}},[[446,1,2]]]);
//# sourceMappingURL=main.3824a2a4.chunk.js.map