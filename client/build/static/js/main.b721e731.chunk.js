(this["webpackJsonpreport-demo"]=this["webpackJsonpreport-demo"]||[]).push([[0],{186:function(e,t,r){},296:function(e,t,r){"use strict";r.r(t);var c=r(2),a=r.n(c),n=r(74),o=r.n(n),i=(r(186),r(24)),s=r(75),l=r(10),d=r(14),j=r.n(d),u=r(32),b=r(12),O=r(172),h=r(76),p=r.n(h),f=r(1),x=function(e){var t=e.data,r=void 0===t?[]:t,c=e.loading,a=e.columns,n=void 0===a?[]:a,o=e.filterPlaceholder,i=e.theme,s=void 0===i?"light":i,d=e.onFilter,j=e.maxheight,u=e.showFooter,b=void 0!==u&&u,h=Object(O.useTable)({columns:n,data:r}),x=h.getTableProps,m=h.getTableBodyProps,g=h.headerGroups,v=h.footerGroups,_=h.rows,L=h.prepareRow,N=p()((function(e){d(e)}),500);return Object(f.jsxs)(f.Fragment,{children:[d&&Object(f.jsx)("div",{className:"table-filter-container",children:Object(f.jsx)("input",{className:"table-filter-input",onChange:function(e){return N(e.target.value)},placeholder:o,autoFocus:!0})}),Object(f.jsx)("div",{className:"table-container",maxheight:j,children:Object(f.jsxs)("table",Object(l.a)(Object(l.a)({},x()),{},{children:[Object(f.jsx)("thead",{children:g.map((function(e){return Object(f.jsx)("tr",Object(l.a)(Object(l.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(f.jsx)("th",Object(l.a)(Object(l.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(f.jsx)("tbody",Object(l.a)(Object(l.a)({},m()),{},{children:_.map((function(e){return L(e),Object(f.jsx)("tr",Object(l.a)(Object(l.a)({theme:s},e.getRowProps({})),{},{children:e.cells.map((function(e,t){return Object(f.jsx)("td",Object(l.a)(Object(l.a)({title:e.value},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))})),b&&Object(f.jsx)("tfoot",{children:v.map((function(e){return Object(f.jsx)("tr",Object(l.a)(Object(l.a)({},e.getFooterGroupProps()),{},{children:e.headers.map((function(e){return Object(f.jsx)("td",Object(l.a)(Object(l.a)({},e.getFooterProps()),{},{children:e.render("Footer")}))}))}))}))})]}))}),c&&Object(f.jsx)("div",{className:"loading-container",data:r.length?1:0,children:"Cargando..."})]})},m=[{Header:"Producto",accessor:"product"},{Header:"Cantidad",accessor:"quantity"},{Header:"Bruto",accessor:"rawProfit",Cell:function(e){var t=e.value;return t?"$"+t:""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.rawProfit}),0);return"$"+Number(t.toFixed(2)).toLocaleString()}},{Header:"Neto",accessor:"netProfit",Cell:function(e){var t=e.value;return t?"$"+t:""},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.netProfit}),0);return"$"+Number(t.toFixed(2)).toLocaleString()}}],g=function(e){var t=e.data,r=Object(c.useMemo)((function(){return m}));return Object(f.jsx)(x,{data:t,columns:r,showFooter:!0})},v=[{Header:"Cliente",accessor:"client"},{Header:"Total",accessor:"total_USD"}],_=function(e){var t=e.data,r=Object(c.useMemo)((function(){return v}));return Object(f.jsx)(x,{data:t,columns:r})},L=r(108),N=function(){var e=Object(u.a)(j.a.mark((function e(t){var r,c,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.from,c=t.to,e.next=3,fetch("".concat("/api/reports/invoice","?from=").concat(r,"&to=").concat(c));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,console.log("From fetchInvoiceReport: ",n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=r(109);var C=function(){var e=Object(c.useState)({from:L.DateTime.now().toISODate(),to:L.DateTime.now().toISODate()}),t=Object(b.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)({sale_report:[],categories_report:[],client_report:[]}),o=Object(b.a)(n,2),d=o[0],O=o[1],h=Object(c.useState)({sale_report:[],categories_report:[],client_report:[]}),x=Object(b.a)(h,2),m=x[0],v=x[1],C=Object(c.useState)({sale_report:[],categories_report:[],client_report:[]}),w=Object(b.a)(C,2),P=w[0],y=w[1],F=function(){var e=Object(u.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N(r);case 3:c=e.sent,O(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=p()((function(e,t,r){!function(e,t,r){var c=d[t].filter((function(t){return t[r].toLowerCase().includes(e.toLowerCase())}));y(Object(l.a)(Object(l.a)({},P),{},Object(s.a)({},t,c)))}(e,t,r)}),250);return Object(c.useEffect)((function(){var e=d.categories_report.reduce((function(e,t){return[].concat(Object(i.a)(e),[{id:t.categoria,label:t.categoria,value:t.rawProfit,netProfit:t.netProfit}])}),[]),t=d.client_report.reduce((function(e,t){return[].concat(Object(i.a)(e),[{id:t.client,label:t.client,value:t.total_USD}])}),[]);v(Object(l.a)(Object(l.a)({},m),{},{categories_report:e,client_report:t}))}),[d]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("div",{id:"date-range-wrapper",children:Object(f.jsxs)("div",{id:"date-range-container",children:[Object(f.jsx)("label",{children:"Desde:"}),Object(f.jsx)("input",{type:"date",value:r.from,onChange:function(e){return a(Object(l.a)(Object(l.a)({},r),{},{from:e.target.value}))}}),Object(f.jsx)("label",{children:"Hasta:"}),Object(f.jsx)("input",{type:"date",value:r.to,onChange:function(e){return a(Object(l.a)(Object(l.a)({},r),{},{to:e.target.value}))}}),Object(f.jsx)("input",{type:"submit",onClick:F})]})}),Object(f.jsxs)("main",{id:"main",children:[Object(f.jsxs)("div",{id:"left-content",children:[Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("div",{className:"card-header",children:Object(f.jsx)("h2",{children:"Ventas"})}),Object(f.jsx)("div",{className:"card-body",children:d.sale_report.length>0&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){return S(e.target.value,"sale_report","product")}}),Object(f.jsx)(g,{data:P.sale_report.length>0?P.sale_report:d.sale_report})]})})]}),Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("div",{className:"card-header",children:Object(f.jsx)("h2",{children:"Clientes"})}),Object(f.jsx)("div",{className:"card-body",children:d.client_report.length>0&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{className:"input-filter",placeholder:"Buscar...",type:"search",onChange:function(e){return S(e.target.value,"client_report","client")}}),Object(f.jsx)(_,{data:P.client_report.length>0?P.client_report:d.client_report})]})})]})]}),Object(f.jsxs)("div",{id:"right-content",children:[Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("div",{className:"card-header",children:Object(f.jsx)("h2",{children:"Gr\xe1fico de categor\xedas"})}),Object(f.jsx)("div",{className:"card-body",children:m.categories_report.length>0&&Object(f.jsx)("div",{style:{height:"300px"},children:Object(f.jsx)(k.a,{data:m.categories_report,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,arcLabel:function(e){return"".concat(e.value," (").concat(e.data.netProfit,")")},borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:function(e){var t=e.datum;return Object(f.jsxs)("div",{className:"tooltip-container",children:[Object(f.jsx)("span",{className:"small-square",style:{background:t.color}}),Object(f.jsx)("strong",{children:t.label}),Object(f.jsx)("label",{children:"Bruto: "}),Object(f.jsxs)("span",{children:["$",t.value]}),Object(f.jsx)("label",{children:"Neto: "}),Object(f.jsxs)("span",{children:["$",t.data.netProfit]})]})}})})})]}),Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("div",{className:"card-header",children:Object(f.jsx)("h2",{children:"Gr\xe1fico de clientes"})}),Object(f.jsx)("div",{className:"card-body",children:m.client_report.length>0&&Object(f.jsx)("div",{style:{height:"300px"},children:Object(f.jsx)(k.a,{data:m.client_report,margin:{top:30,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]}})})})]})]})]})]})};o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root"))}},[[296,1,2]]]);
//# sourceMappingURL=main.b721e731.chunk.js.map